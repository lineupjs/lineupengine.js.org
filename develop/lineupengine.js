/*! lineupengine - v1.0.0-20180108-082103 - 2018
* https://sgratzl.github.io/lineupengine/
* Copyright (c) 2018 Samuel Gratzl; Licensed MIT*/

(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["lineupengine"] = factory();
	else
		root["lineupengine"] = factory();
})(typeof self !== 'undefined' ? self : this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 10);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"e\"] = uniformContext;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = nonUniformContext;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = randomContext;\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = range;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = frozenDelta;\n/* harmony export (immutable) */ __webpack_exports__[\"f\"] = updateFrozen;\nclass RowHeightException {\r\n    constructor(index, y, height) {\r\n        this.index = index;\r\n        this.y = y;\r\n        this.height = height;\r\n    }\r\n    get y2() {\r\n        return this.y + this.height;\r\n    }\r\n}\r\nfunction uniformContext(numberOfRows, rowHeight, rowPadding = 0) {\r\n    rowHeight += rowPadding;\r\n    const exceptionsLookup = {\r\n        keys: () => [].values(),\r\n        get: () => rowHeight,\r\n        has: () => false,\r\n        size: 0\r\n    };\r\n    return {\r\n        exceptions: [],\r\n        exceptionsLookup,\r\n        totalHeight: numberOfRows * rowHeight,\r\n        numberOfRows,\r\n        defaultRowHeight: rowHeight,\r\n        padding: () => rowPadding\r\n    };\r\n}\r\nfunction mostFrequentValue(values) {\r\n    const lookup = new Map();\r\n    values.forEach((value) => {\r\n        lookup.set(value, (lookup.get(value) || 0) + 1);\r\n    });\r\n    if (lookup.size === 0) {\r\n        return 20;\r\n    }\r\n    const sorted = Array.from(lookup).sort((a, b) => {\r\n        if (a[1] !== b[1]) {\r\n            return b[1] - a[1];\r\n        }\r\n        return a[0] - b[0];\r\n    });\r\n    const mostFrequent = sorted[0][0];\r\n    if (mostFrequent === 0) {\r\n        return sorted.length > 1 ? sorted[1][0] : 20;\r\n    }\r\n    return mostFrequent;\r\n}\r\nfunction nonUniformContext(rowHeights, defaultRowHeight = NaN, rowPadding = 0) {\r\n    const exceptionsLookup = new Map();\r\n    const exceptions = [];\r\n    const padding = typeof rowPadding === 'function' ? rowPadding : () => rowPadding;\r\n    if (isNaN(defaultRowHeight)) {\r\n        defaultRowHeight = mostFrequentValue(rowHeights);\r\n    }\r\n    defaultRowHeight += padding(-1);\r\n    let prev = -1, acc = 0, totalHeight = 0, numberOfRows = 0;\r\n    rowHeights.forEach((height, index) => {\r\n        height += padding(index);\r\n        totalHeight += height;\r\n        numberOfRows++;\r\n        if (height === defaultRowHeight) {\r\n            return;\r\n        }\r\n        exceptionsLookup.set(index, height);\r\n        const between = (index - prev - 1) * defaultRowHeight;\r\n        prev = index;\r\n        const y = acc + between;\r\n        acc = y + height;\r\n        exceptions.push(new RowHeightException(index, y, height));\r\n    });\r\n    return { exceptionsLookup, exceptions, totalHeight, defaultRowHeight, numberOfRows, padding };\r\n}\r\nfunction randomContext(numberOfRows, defaultRowHeight, minRowHeight = 2, maxRowHeight = defaultRowHeight * 10, ratio = 0.2, seed = Date.now()) {\r\n    let actSeed = seed;\r\n    const random = () => {\r\n        const x = Math.sin(actSeed++) * 10000;\r\n        return x - Math.floor(x);\r\n    };\r\n    const getter = () => {\r\n        const coin = random();\r\n        if (coin < ratio) {\r\n            return minRowHeight + Math.round(random() * (maxRowHeight - minRowHeight));\r\n        }\r\n        return defaultRowHeight;\r\n    };\r\n    const forEach = (callback) => {\r\n        for (let index = 0; index < numberOfRows; ++index) {\r\n            callback(getter(), index);\r\n        }\r\n    };\r\n    return nonUniformContext({ forEach }, defaultRowHeight);\r\n}\r\nfunction range(scrollTop, clientHeight, rowHeight, heightExceptions, numberOfRows) {\r\n    if (numberOfRows === 0) {\r\n        return { first: 0, last: -1, firstRowPos: 0, endPos: 0 };\r\n    }\r\n    if (numberOfRows === 1) {\r\n        return {\r\n            first: 0,\r\n            last: 0,\r\n            firstRowPos: 0,\r\n            endPos: heightExceptions.length === 0 ? rowHeight : heightExceptions[0].y2\r\n        };\r\n    }\r\n    const offset = scrollTop;\r\n    const offset2 = offset + clientHeight;\r\n    function indexOf(pos, indexShift) {\r\n        return Math.min(numberOfRows - 1, indexShift + Math.max(0, Math.floor(pos / rowHeight)));\r\n    }\r\n    function calc(offsetShift, indexShift, isGuess = false) {\r\n        const shifted = offset - offsetShift;\r\n        const shifted2 = offset2 - offsetShift;\r\n        const first = indexOf(shifted, indexShift);\r\n        const last = indexOf(shifted2, indexShift);\r\n        const firstRowPos = offsetShift + (first - indexShift) * rowHeight;\r\n        const endPos = offsetShift + (last + 1 - indexShift) * rowHeight;\r\n        console.assert(!isGuess || !(firstRowPos > offset || (endPos < offset2 && last < numberOfRows - 1)), 'error', isGuess, firstRowPos, endPos, offset, offset2, indexShift, offsetShift);\r\n        return { first, last, firstRowPos, endPos };\r\n    }\r\n    const r = calc(0, 0, true);\r\n    if (heightExceptions.length === 0) {\r\n        return r;\r\n    }\r\n    if (r.last < heightExceptions[0].index) {\r\n        return r;\r\n    }\r\n    if (r.last === heightExceptions[0].index && heightExceptions[0].height > rowHeight) {\r\n        return Object.assign(r, { endPos: heightExceptions[0].y2 });\r\n    }\r\n    const lastPos = heightExceptions[heightExceptions.length - 1];\r\n    if (offset >= lastPos.y) {\r\n        const rest = calc(lastPos.y2, lastPos.index + 1);\r\n        if (offset < lastPos.y2) {\r\n            return Object.assign(rest, { first: lastPos.index, firstRowPos: lastPos.y });\r\n        }\r\n        return rest;\r\n    }\r\n    const visible = [];\r\n    let closest = heightExceptions[0];\r\n    for (const item of heightExceptions) {\r\n        const { y, y2 } = item;\r\n        if (y >= offset2) {\r\n            break;\r\n        }\r\n        if (y2 <= offset) {\r\n            closest = item;\r\n            continue;\r\n        }\r\n        visible.push(item);\r\n    }\r\n    if (visible.length === 0) {\r\n        return calc(closest.y2, closest.index + 1);\r\n    }\r\n    {\r\n        const firstException = visible[0];\r\n        const lastException = visible[visible.length - 1];\r\n        const first = Math.max(0, firstException.index - Math.max(0, Math.ceil((firstException.y - offset) / rowHeight)));\r\n        let last = lastException.index;\r\n        if (offset2 >= lastException.y2) {\r\n            last = indexOf(offset2 - lastException.y2, lastException.index + 1);\r\n        }\r\n        const firstRowPos = firstException.y - (firstException.index - first) * rowHeight;\r\n        const endPos = lastException.y2 + (last - lastException.index) * rowHeight;\r\n        console.assert(firstRowPos <= offset && (endPos >= offset2 || last === numberOfRows - 1), 'error', firstRowPos, endPos, offset, offset2, firstException, lastException);\r\n        return { first, last, firstRowPos, endPos };\r\n    }\r\n}\r\nfunction frozenDelta(current, target) {\r\n    const clength = current.length;\r\n    const tlength = target.length;\r\n    if (clength === 0) {\r\n        return { added: target, removed: [], common: 0 };\r\n    }\r\n    if (tlength === 0) {\r\n        return { added: [], removed: current, common: 0 };\r\n    }\r\n    if (clength === tlength) {\r\n        return { added: [], removed: [], common: clength };\r\n    }\r\n    const removed = current.slice(Math.min(tlength, clength));\r\n    const added = target.slice(Math.min(tlength, clength));\r\n    return { added, removed, common: clength - removed.length };\r\n}\r\nfunction updateFrozen(old, columns, first) {\r\n    const oldLast = old.length === 0 ? 0 : old[old.length - 1] + 1;\r\n    const added = [];\r\n    const removed = [];\r\n    for (let i = old.length - 1; i >= 0; --i) {\r\n        const index = old[i];\r\n        if (index >= first) {\r\n            removed.push(old.pop());\r\n        }\r\n        else {\r\n            break;\r\n        }\r\n    }\r\n    for (let i = oldLast; i < first; ++i) {\r\n        if (columns[i].frozen) {\r\n            added.push(i);\r\n            old.push(i);\r\n        }\r\n    }\r\n    return { target: old, added, removed };\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvbG9naWMudHM/NzkwYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIGdlbmVyaWMgZXhjZXB0aW9uIG9mIGEgdW5pZm9ybSBzcGFjZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIElSb3dIZWlnaHRFeGNlcHRpb24ge1xuICAvKipcbiAgICogcmVmZXJlbmNlIGluZGV4XG4gICAqL1xuICByZWFkb25seSBpbmRleDogbnVtYmVyO1xuICAvKipcbiAgICogaGVpZ2h0IG9mIHRoZSBlbGVtZW50XG4gICAqL1xuICByZWFkb25seSBoZWlnaHQ6IG51bWJlcjtcbiAgLyoqXG4gICAqIHN0YXJ0aW5nIHlcbiAgICovXG4gIHJlYWRvbmx5IHk6IG51bWJlcjtcbiAgLyoqXG4gICAqIGVuZGluZyB5XG4gICAqL1xuICByZWFkb25seSB5MjogbnVtYmVyO1xufVxuXG5jbGFzcyBSb3dIZWlnaHRFeGNlcHRpb24gaW1wbGVtZW50cyBJUm93SGVpZ2h0RXhjZXB0aW9uIHtcbiAgY29uc3RydWN0b3IocHVibGljIHJlYWRvbmx5IGluZGV4OiBudW1iZXIsIHB1YmxpYyByZWFkb25seSB5OiBudW1iZXIsIHB1YmxpYyByZWFkb25seSBoZWlnaHQ6IG51bWJlcikge1xuXG4gIH1cblxuICBnZXQgeTIoKSB7XG4gICAgcmV0dXJuIHRoaXMueSArIHRoaXMuaGVpZ2h0O1xuICB9XG59XG5cbi8qKlxuICogc2ltbGlhciB0byBhIG1hcFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElSb3dIZWlnaHRFeGNlcHRpb25Mb29rdXAge1xuICBrZXlzKCk6IEl0ZXJhYmxlSXRlcmF0b3I8bnVtYmVyPjtcblxuICBnZXQoaW5kZXg6IG51bWJlcik6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICBoYXMoaW5kZXg6IG51bWJlcik6IGJvb2xlYW47XG5cbiAgcmVhZG9ubHkgc2l6ZTogbnVtYmVyO1xufVxuXG4vKipcbiAqIGV4Y2VwdGlvbiBjb250ZXh0IGZvciBvcHRpbWl6ZWQgbm9uIHVuaWZvcm0gaGVpZ2h0IGV4Y2VwdGlvbnNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJRXhjZXB0aW9uQ29udGV4dCB7XG4gIC8qKlxuICAgKiBoZWlnaHQgZXhjZXB0aW9ucyBhcyBhIGxpc3RcbiAgICovXG4gIHJlYWRvbmx5IGV4Y2VwdGlvbnM6IElSb3dIZWlnaHRFeGNlcHRpb25bXTtcbiAgLyoqXG4gICAqIGxvb2t1cCBmb3IgdGhlIGhlaWdodCBvZiBhIGdpdmVuIGluZGV4LCBpZiBub3QgcGFydCBvZiB0aGlzIG1hcCBpdCBoYXMgdGhlIGRlZmF1bHQgaGVpZ2h0XG4gICAqL1xuICByZWFkb25seSBleGNlcHRpb25zTG9va3VwOiBJUm93SGVpZ2h0RXhjZXB0aW9uTG9va3VwO1xuICAvKipcbiAgICogbnVtYmVyIG9mIHJvd3NcbiAgICovXG4gIHJlYWRvbmx5IG51bWJlck9mUm93czogbnVtYmVyO1xuICAvKipcbiAgICogZGVmYXVsdCBoZWlnaHQgb2Ygcm93c1xuICAgKi9cbiAgcmVhZG9ubHkgZGVmYXVsdFJvd0hlaWdodDogbnVtYmVyO1xuICAvKipcbiAgICogdG90YWwgaGVpZ2h0XG4gICAqL1xuICByZWFkb25seSB0b3RhbEhlaWdodDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBwYWRkaW5nIGJldHdlZW4gcm93cywgaG93ZXZlciBhbHJlYWR5IGluY2x1ZGVkIGluIGFsbCBoZWlnaHRzIHRvIGhhdmUgdGhlIHByZWNpc2UgbnVtYmVyc1xuICAgKi9cbiAgcmVhZG9ubHkgcGFkZGluZzogKGluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbn1cblxuLyoqXG4gKiBjcmVhdGVzIGEgdW5pZm9ybSBleGNlcHRpb24gY29udGV4dCwgaS5lIG5vIGV4Y2VwdGlvbnMgYWxsIHJvd3MgYXJlIG9mIHRoZSBzYW1lIGhlaWdodFxuICogQHBhcmFtIHtudW1iZXJ9IG51bWJlck9mUm93c1xuICogQHBhcmFtIHtudW1iZXJ9IHJvd0hlaWdodFxuICogQHBhcmFtIHtudW1iZXJ9IHJvd1BhZGRpbmcgcGFkZGluZyBiZXR3ZWVuIHJvd3NcbiAqIEByZXR1cm4ge0lFeGNlcHRpb25Db250ZXh0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5pZm9ybUNvbnRleHQobnVtYmVyT2ZSb3dzOiBudW1iZXIsIHJvd0hlaWdodDogbnVtYmVyLCByb3dQYWRkaW5nOiBudW1iZXIgPSAwKTogSUV4Y2VwdGlvbkNvbnRleHQge1xuICByb3dIZWlnaHQgKz0gcm93UGFkZGluZztcbiAgY29uc3QgZXhjZXB0aW9uc0xvb2t1cCA9IHtcbiAgICBrZXlzOiAoKSA9PiBbXS52YWx1ZXMoKSxcbiAgICBnZXQ6ICgpID0+IHJvd0hlaWdodCxcbiAgICBoYXM6ICgpID0+IGZhbHNlLFxuICAgIHNpemU6IDBcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBleGNlcHRpb25zOiBbXSxcbiAgICBleGNlcHRpb25zTG9va3VwLFxuICAgIHRvdGFsSGVpZ2h0OiBudW1iZXJPZlJvd3MgKiByb3dIZWlnaHQsXG4gICAgbnVtYmVyT2ZSb3dzLFxuICAgIGRlZmF1bHRSb3dIZWlnaHQ6IHJvd0hlaWdodCxcbiAgICBwYWRkaW5nOiAoKSA9PiByb3dQYWRkaW5nXG4gIH07XG59XG5cbi8qKlxuICogY29tcHV0ZXMgdGhlIG1vc3QgZnJlcXVlbnQgdmFsdWUgaW4gYSBnaXZlbiBhcnJheSBsaWtlXG4gKiBAcGFyYW0ge30gdmFsdWVzXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbmZ1bmN0aW9uIG1vc3RGcmVxdWVudFZhbHVlKHZhbHVlczogeyBmb3JFYWNoOiAoY2FsbGJhY2s6IChoZWlnaHQ6IG51bWJlciwgaW5kZXg6IG51bWJlcikgPT4gYW55KSA9PiBhbnkgfSk6IG51bWJlciB7XG4gIGNvbnN0IGxvb2t1cCA9IG5ldyBNYXA8bnVtYmVyLCBudW1iZXI+KCk7XG4gIHZhbHVlcy5mb3JFYWNoKCh2YWx1ZSkgPT4ge1xuICAgIGxvb2t1cC5zZXQodmFsdWUsIChsb29rdXAuZ2V0KHZhbHVlKSB8fCAwKSArIDEpO1xuICB9KTtcbiAgaWYgKGxvb2t1cC5zaXplID09PSAwKSB7XG4gICAgcmV0dXJuIDIwOyAvLyBkZWZhdWx0IHZhbHVlIHNpbmNlIGl0IGRvZXNuJ3QgbWF0dGVyXG4gIH1cbiAgLy8gc29ydCBkZXNjIHRha2UgZmlyc3Qga2V5IGFuZCBhc2MgYnkgdGhlIHNlY29uZCBpbiBjYXNlIG9mIHRpZSwgaXQgaXMgb3B0aW1pemVkIHRvIGhhdmUgZXhjZXB0aW9ucyBmb3IgaGlnaGVyIHJvd3MgbGVzcyBmb3IgYmlnIHJvd3NcbiAgY29uc3Qgc29ydGVkID0gQXJyYXkuZnJvbShsb29rdXApLnNvcnQoKGEsIGIpID0+IHtcbiAgICBpZiAoYVsxXSAhPT0gYlsxXSkge1xuICAgICAgcmV0dXJuIGJbMV0gLSBhWzFdO1xuICAgIH1cbiAgICByZXR1cm4gYVswXSAtIGJbMF07XG4gIH0pO1xuICBjb25zdCBtb3N0RnJlcXVlbnQgPSBzb3J0ZWRbMF1bMF07XG4gIGlmIChtb3N0RnJlcXVlbnQgPT09IDApIHsgLy8gY29ybmVyY2FzZVxuICAgIHJldHVybiBzb3J0ZWQubGVuZ3RoID4gMSA/IHNvcnRlZFsxXVswXSA6IDIwOyAvLyBhbGwgZW1wdHlcbiAgfVxuICByZXR1cm4gbW9zdEZyZXF1ZW50O1xufVxuXG4vKipcbiAqIGNyZWF0ZXMgYSBub24gdW5pZm9ybSBjb250ZXh0IGJhc2VkIG9uIHRoZSBnaXZlbiBhcnJheSBsaWtlIGhlaWdodHNcbiAqIEBwYXJhbSByb3dIZWlnaHRzIGFycmF5aXNoIHRvIGdldCB0aGUgaGVpZ2h0c1xuICogQHBhcmFtIHtudW1iZXJ9IGRlZmF1bHRSb3dIZWlnaHQgaWYgbm90IGdpdmVuIHRoZSBtb3N0IGZyZXF1ZW50IHZhbHVlIHdpbGwgYmUgdXNlZFxuICogQHBhcmFtIHtudW1iZXJ9IHJvd1BhZGRpbmcgcGFkZGluZyBiZXR3ZWVuIHJvd3NcbiAqIEByZXR1cm4ge0lFeGNlcHRpb25Db250ZXh0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gbm9uVW5pZm9ybUNvbnRleHQocm93SGVpZ2h0czogeyBmb3JFYWNoOiAoY2FsbGJhY2s6IChoZWlnaHQ6IG51bWJlciwgaW5kZXg6IG51bWJlcikgPT4gYW55KSA9PiBhbnkgfSwgZGVmYXVsdFJvd0hlaWdodDogbnVtYmVyID0gTmFOLCByb3dQYWRkaW5nOiBudW1iZXIgfCAoKGluZGV4OiBudW1iZXIpID0+IG51bWJlcikgPSAwKTogSUV4Y2VwdGlvbkNvbnRleHQge1xuICBjb25zdCBleGNlcHRpb25zTG9va3VwID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcj4oKTtcbiAgY29uc3QgZXhjZXB0aW9uczogSVJvd0hlaWdodEV4Y2VwdGlvbltdID0gW107XG5cbiAgY29uc3QgcGFkZGluZyA9IHR5cGVvZiByb3dQYWRkaW5nID09PSAnZnVuY3Rpb24nID8gcm93UGFkZGluZyA6ICgpID0+IDxudW1iZXI+cm93UGFkZGluZztcblxuICBpZiAoaXNOYU4oZGVmYXVsdFJvd0hlaWdodCkpIHtcbiAgICBkZWZhdWx0Um93SGVpZ2h0ID0gbW9zdEZyZXF1ZW50VmFsdWUocm93SGVpZ2h0cyk7XG4gIH1cblxuICBkZWZhdWx0Um93SGVpZ2h0ICs9IHBhZGRpbmcoLTEpO1xuXG4gIGxldCBwcmV2ID0gLTEsIGFjYyA9IDAsIHRvdGFsSGVpZ2h0ID0gMCwgbnVtYmVyT2ZSb3dzID0gMDtcbiAgcm93SGVpZ2h0cy5mb3JFYWNoKChoZWlnaHQsIGluZGV4KSA9PiB7XG4gICAgaGVpZ2h0ICs9IHBhZGRpbmcoaW5kZXgpO1xuICAgIHRvdGFsSGVpZ2h0ICs9IGhlaWdodDtcbiAgICBudW1iZXJPZlJvd3MrKztcbiAgICBpZiAoaGVpZ2h0ID09PSBkZWZhdWx0Um93SGVpZ2h0KSB7XG4gICAgICAvL3JlZ3VsYXJcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZXhjZXB0aW9uc0xvb2t1cC5zZXQoaW5kZXgsIGhlaWdodCk7XG4gICAgY29uc3QgYmV0d2VlbiA9IChpbmRleCAtIHByZXYgLSAxKSAqIGRlZmF1bHRSb3dIZWlnaHQ7XG4gICAgcHJldiA9IGluZGV4O1xuICAgIGNvbnN0IHkgPSBhY2MgKyBiZXR3ZWVuO1xuICAgIGFjYyA9IHkgKyBoZWlnaHQ7XG4gICAgZXhjZXB0aW9ucy5wdXNoKG5ldyBSb3dIZWlnaHRFeGNlcHRpb24oaW5kZXgsIHksIGhlaWdodCkpO1xuICB9KTtcbiAgcmV0dXJuIHtleGNlcHRpb25zTG9va3VwLCBleGNlcHRpb25zLCB0b3RhbEhlaWdodCwgZGVmYXVsdFJvd0hlaWdodCwgbnVtYmVyT2ZSb3dzLCBwYWRkaW5nfTtcbn1cblxuLyoqXG4gKiBjcmVhdGVzIGEgcmFuZG9tIGNvbnRleHQgd2l0aCB0aGUgZ2l2ZW4gY29uc3RyYWludHNcbiAqIEBwYXJhbSB7bnVtYmVyfSBudW1iZXJPZlJvd3NcbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWZhdWx0Um93SGVpZ2h0XG4gKiBAcGFyYW0ge251bWJlcn0gbWluUm93SGVpZ2h0XG4gKiBAcGFyYW0ge251bWJlcn0gbWF4Um93SGVpZ2h0XG4gKiBAcGFyYW0ge251bWJlcn0gcmF0aW8gYXJvdW5kIHJhdGlvIHBlcmNlbnQgd2lsbCBnZXQgYSBub24gdW5pZm9ybSBoZWlnaHRcbiAqIEBwYXJhbSB7bnVtYmVyfSBzZWVkIHJhbmRvbSBzZWVkXG4gKiBAcmV0dXJuIHtJRXhjZXB0aW9uQ29udGV4dH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbUNvbnRleHQobnVtYmVyT2ZSb3dzOiBudW1iZXIsIGRlZmF1bHRSb3dIZWlnaHQ6IG51bWJlciwgbWluUm93SGVpZ2h0ID0gMiwgbWF4Um93SGVpZ2h0ID0gZGVmYXVsdFJvd0hlaWdodCAqIDEwLCByYXRpbyA9IDAuMiwgc2VlZCA9IERhdGUubm93KCkpIHtcbiAgbGV0IGFjdFNlZWQgPSBzZWVkO1xuICBjb25zdCByYW5kb20gPSAoKSA9PiB7XG4gICAgY29uc3QgeCA9IE1hdGguc2luKGFjdFNlZWQrKykgKiAxMDAwMDtcbiAgICByZXR1cm4geCAtIE1hdGguZmxvb3IoeCk7XG4gIH07XG5cblxuICBjb25zdCBnZXR0ZXIgPSAoKSA9PiB7XG4gICAgY29uc3QgY29pbiA9IHJhbmRvbSgpO1xuICAgIGlmIChjb2luIDwgcmF0aW8pIHtcbiAgICAgIC8vbm9uIHVuaWZvcm1cbiAgICAgIHJldHVybiBtaW5Sb3dIZWlnaHQgKyBNYXRoLnJvdW5kKHJhbmRvbSgpICogKG1heFJvd0hlaWdodCAtIG1pblJvd0hlaWdodCkpO1xuICAgIH1cbiAgICByZXR1cm4gZGVmYXVsdFJvd0hlaWdodDtcbiAgfTtcbiAgY29uc3QgZm9yRWFjaCA9IChjYWxsYmFjazogKGhlaWdodDogbnVtYmVyLCBpbmRleDogbnVtYmVyKSA9PiBhbnkpID0+IHtcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbnVtYmVyT2ZSb3dzOyArK2luZGV4KSB7XG4gICAgICBjYWxsYmFjayhnZXR0ZXIoKSwgaW5kZXgpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIG5vblVuaWZvcm1Db250ZXh0KHtmb3JFYWNofSwgZGVmYXVsdFJvd0hlaWdodCk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVZpc2libGVSYW5nZSB7XG4gIC8qKlxuICAgKiBmaXJzdCB2aXNpYmxlIGluZGV4XG4gICAqL1xuICByZWFkb25seSBmaXJzdDogbnVtYmVyO1xuICAvKipcbiAgICogbGFzdCB2aXNpYmxlIGluZGV4XG4gICAqL1xuICByZWFkb25seSBsYXN0OiBudW1iZXI7XG4gIC8qKlxuICAgKiBwb3NpdGlvbiBvZiB0aGUgZmlyc3QgdmlzaWJsZSByb3cgaW4gcGl4ZWxcbiAgICovXG4gIHJlYWRvbmx5IGZpcnN0Um93UG9zOiBudW1iZXI7XG4gIC8qKlxuICAgKiBwb3NpdGlvbiBvZiB0aGUgbGFzdCB2aXNpYmxlIHJvdyBpbmNsdWRpbmdzIGl0cyBzaXplXG4gICAqL1xuICByZWFkb25seSBlbmRQb3M6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBjb21wdXRlcyB0aGUgdmlzaWJsZSByYW5nZVxuICogQHBhcmFtIHtudW1iZXJ9IHNjcm9sbFRvcCB0b3Agc2Nyb2xsaW5nXG4gKiBAcGFyYW0ge251bWJlcn0gY2xpZW50SGVpZ2h0IHZpc2libGUgaGVpZ2h0XG4gKiBAcGFyYW0ge251bWJlcn0gcm93SGVpZ2h0IGhlaWdodCBvZiBhIHJvdyBieSBkZWZhdWx0XG4gKiBAcGFyYW0ge0lSb3dIZWlnaHRFeGNlcHRpb25bXX0gaGVpZ2h0RXhjZXB0aW9ucyBleGNlcHRpb25zIG9mIHRoaXMgZGVmYXVsdCBoZWlnaHRcbiAqIEBwYXJhbSB7bnVtYmVyfSBudW1iZXJPZlJvd3MgdGhlIG51bWJlciBvZiByb3dzXG4gKiBAcmV0dXJuIHtJVmlzaWJsZVJhbmdlfSB0aGUgY29tcHV0ZWQgdmlzaWJsZSByYW5nZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmFuZ2Uoc2Nyb2xsVG9wOiBudW1iZXIsIGNsaWVudEhlaWdodDogbnVtYmVyLCByb3dIZWlnaHQ6IG51bWJlciwgaGVpZ2h0RXhjZXB0aW9uczogSVJvd0hlaWdodEV4Y2VwdGlvbltdLCBudW1iZXJPZlJvd3M6IG51bWJlcik6IElWaXNpYmxlUmFuZ2Uge1xuICBpZiAobnVtYmVyT2ZSb3dzID09PSAwKSB7XG4gICAgcmV0dXJuIHtmaXJzdDogMCwgbGFzdDogLTEsIGZpcnN0Um93UG9zOiAwLCBlbmRQb3M6IDB9O1xuICB9XG4gIGlmIChudW1iZXJPZlJvd3MgPT09IDEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZmlyc3Q6IDAsXG4gICAgICBsYXN0OiAwLFxuICAgICAgZmlyc3RSb3dQb3M6IDAsXG4gICAgICBlbmRQb3M6IGhlaWdodEV4Y2VwdGlvbnMubGVuZ3RoID09PSAwID8gcm93SGVpZ2h0IDogaGVpZ2h0RXhjZXB0aW9uc1swXS55MlxuICAgIH07XG4gIH1cbiAgY29uc3Qgb2Zmc2V0ID0gc2Nyb2xsVG9wO1xuICBjb25zdCBvZmZzZXQyID0gb2Zmc2V0ICsgY2xpZW50SGVpZ2h0O1xuXG4gIGZ1bmN0aW9uIGluZGV4T2YocG9zOiBudW1iZXIsIGluZGV4U2hpZnQ6IG51bWJlcikge1xuICAgIHJldHVybiBNYXRoLm1pbihudW1iZXJPZlJvd3MgLSAxLCBpbmRleFNoaWZ0ICsgTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihwb3MgLyByb3dIZWlnaHQpKSk7XG4gIH1cblxuICBmdW5jdGlvbiBjYWxjKG9mZnNldFNoaWZ0OiBudW1iZXIsIGluZGV4U2hpZnQ6IG51bWJlciwgaXNHdWVzczogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgY29uc3Qgc2hpZnRlZCA9IG9mZnNldCAtIG9mZnNldFNoaWZ0O1xuICAgIGNvbnN0IHNoaWZ0ZWQyID0gb2Zmc2V0MiAtIG9mZnNldFNoaWZ0O1xuXG4gICAgY29uc3QgZmlyc3QgPSBpbmRleE9mKHNoaWZ0ZWQsIGluZGV4U2hpZnQpO1xuICAgIGNvbnN0IGxhc3QgPSBpbmRleE9mKHNoaWZ0ZWQyLCBpbmRleFNoaWZ0KTtcblxuICAgIGNvbnN0IGZpcnN0Um93UG9zID0gb2Zmc2V0U2hpZnQgKyAoZmlyc3QgLSBpbmRleFNoaWZ0KSAqIHJvd0hlaWdodDtcbiAgICBjb25zdCBlbmRQb3MgPSBvZmZzZXRTaGlmdCArIChsYXN0ICsgMSAtIGluZGV4U2hpZnQpICogcm93SGVpZ2h0O1xuXG4gICAgLy9pZiAoIWlzR3Vlc3MpIHtcbiAgICAvLyAgY29uc29sZS5sb2coZmlyc3QsICdAJywgZmlyc3RSb3dQb3MsIGxhc3QsICcjJywgZW5kLCBvZmZzZXQsIG9mZnNldDIsIGZpcnN0Um93UG9zIDw9IG9mZnNldCwgb2Zmc2V0MiA8PSBlbmQpO1xuICAgIC8vfVxuICAgIGNvbnNvbGUuYXNzZXJ0KCFpc0d1ZXNzIHx8ICEoZmlyc3RSb3dQb3MgPiBvZmZzZXQgfHwgKGVuZFBvcyA8IG9mZnNldDIgJiYgbGFzdCA8IG51bWJlck9mUm93cyAtIDEpKSwgJ2Vycm9yJywgaXNHdWVzcywgZmlyc3RSb3dQb3MsIGVuZFBvcywgb2Zmc2V0LCBvZmZzZXQyLCBpbmRleFNoaWZ0LCBvZmZzZXRTaGlmdCk7XG4gICAgcmV0dXJuIHtmaXJzdCwgbGFzdCwgZmlyc3RSb3dQb3MsIGVuZFBvc307XG4gIH1cblxuICBjb25zdCByID0gY2FsYygwLCAwLCB0cnVlKTtcbiAgaWYgKGhlaWdodEV4Y2VwdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgLy91bmlmb3JtXG4gICAgcmV0dXJuIHI7XG4gIH1cbiAgaWYgKHIubGFzdCA8IGhlaWdodEV4Y2VwdGlvbnNbMF0uaW5kZXgpIHtcbiAgICAvL2NvbnNvbGUubG9nKCdiZWZvcmUgdGhlIGZpcnN0IGV4Y2VwdGlvbiA9IHVuaWZvcm0gd2l0aCBubyBzaGlmdCcpO1xuICAgIC8vY29uc29sZS5sb2coci5maXJzdCwgJ0AnLCByLmZpcnN0Um93UG9zLCByLmxhc3QsICcjJywgci5lbmQsIG9mZnNldCwgb2Zmc2V0Miwgci5maXJzdFJvd1BvcyA8PSBvZmZzZXQsIG9mZnNldDIgPD0gci5lbmQpO1xuICAgIHJldHVybiByO1xuICB9XG4gIGlmIChyLmxhc3QgPT09IGhlaWdodEV4Y2VwdGlvbnNbMF0uaW5kZXggJiYgaGVpZ2h0RXhjZXB0aW9uc1swXS5oZWlnaHQgPiByb3dIZWlnaHQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihyLCB7ZW5kUG9zOiBoZWlnaHRFeGNlcHRpb25zWzBdLnkyfSk7XG4gIH1cblxuICAvL3RoZSBwb3NpdGlvbiB3aGVyZSB0aGUgZXhjZXB0aW9ucyBlbmRzXG4gIGNvbnN0IGxhc3RQb3MgPSBoZWlnaHRFeGNlcHRpb25zW2hlaWdodEV4Y2VwdGlvbnMubGVuZ3RoIC0gMV07XG4gIGlmIChvZmZzZXQgPj0gbGFzdFBvcy55KSB7XG4gICAgY29uc3QgcmVzdCA9IGNhbGMobGFzdFBvcy55MiwgbGFzdFBvcy5pbmRleCArIDEpO1xuICAgIGlmIChvZmZzZXQgPCBsYXN0UG9zLnkyKSB7XG4gICAgICAvLyBpbmNsdWRlIG1lXG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihyZXN0LCB7Zmlyc3Q6IGxhc3RQb3MuaW5kZXgsIGZpcnN0Um93UG9zOiBsYXN0UG9zLnl9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3Q7XG4gIH1cbiAgLy93ZSBoYXZlIHNvbWUgZXhjZXB0aW9uc1xuICBjb25zdCB2aXNpYmxlOiBJUm93SGVpZ2h0RXhjZXB0aW9uW10gPSBbXTtcbiAgbGV0IGNsb3Nlc3QgPSBoZWlnaHRFeGNlcHRpb25zWzBdOyAvL2Nsb3Nlc3QgYmVmb3JlIG5vdCBpbiByYW5nZVxuICBmb3IgKGNvbnN0IGl0ZW0gb2YgaGVpZ2h0RXhjZXB0aW9ucykge1xuICAgIGNvbnN0IHt5LCB5Mn0gPSBpdGVtO1xuICAgIGlmICh5ID49IG9mZnNldDIpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAoeTIgPD0gb2Zmc2V0KSB7XG4gICAgICBjbG9zZXN0ID0gaXRlbTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB2aXNpYmxlLnB1c2goaXRlbSk7XG4gIH1cblxuICBpZiAodmlzaWJsZS5sZW5ndGggPT09IDApIHtcbiAgICAvL2NvbnNvbGUubG9nKCd3ZSBhcmUgaW4gdGhlIGJldHdlZW4gc29tZSBleGNlcHRpb25zIGFuZCBub25lIGFyZSB2aXNpYmxlJyk7XG4gICAgcmV0dXJuIGNhbGMoY2xvc2VzdC55MiwgY2xvc2VzdC5pbmRleCArIDEpOyAvL3NraXAgbXlzZWxmXG4gIH1cblxuICB7XG4gICAgLy9jb25zb2xlLmxvZygnd2Ugc2hvdyBhdCBsZWFzdCBvbmUgZXhjZXB0aW9uJyk7XG4gICAgY29uc3QgZmlyc3RFeGNlcHRpb24gPSB2aXNpYmxlWzBdO1xuICAgIGNvbnN0IGxhc3RFeGNlcHRpb24gPSB2aXNpYmxlW3Zpc2libGUubGVuZ3RoIC0gMV07XG5cbiAgICBjb25zdCBmaXJzdCA9IE1hdGgubWF4KDAsIGZpcnN0RXhjZXB0aW9uLmluZGV4IC0gTWF0aC5tYXgoMCwgTWF0aC5jZWlsKChmaXJzdEV4Y2VwdGlvbi55IC0gb2Zmc2V0KSAvIHJvd0hlaWdodCkpKTtcbiAgICBsZXQgbGFzdCA9IGxhc3RFeGNlcHRpb24uaW5kZXg7XG4gICAgaWYgKG9mZnNldDIgPj0gbGFzdEV4Y2VwdGlvbi55Mikge1xuICAgICAgbGFzdCA9IGluZGV4T2Yob2Zmc2V0MiAtIGxhc3RFeGNlcHRpb24ueTIsIGxhc3RFeGNlcHRpb24uaW5kZXggKyAxKTtcbiAgICB9XG4gICAgY29uc3QgZmlyc3RSb3dQb3MgPSBmaXJzdEV4Y2VwdGlvbi55IC0gKGZpcnN0RXhjZXB0aW9uLmluZGV4IC0gZmlyc3QpICogcm93SGVpZ2h0O1xuICAgIGNvbnN0IGVuZFBvcyA9IGxhc3RFeGNlcHRpb24ueTIgKyAobGFzdCAtIGxhc3RFeGNlcHRpb24uaW5kZXgpICogcm93SGVpZ2h0O1xuXG4gICAgLy9jb25zb2xlLmxvZyhmaXJzdCwgJ0AnLCBmaXJzdFJvd1BvcywgbGFzdCwgJyMnLCBlbmQsIG9mZnNldCwgb2Zmc2V0MiwgZmlyc3RSb3dQb3MgPD0gb2Zmc2V0LCBvZmZzZXQyIDw9IGVuZCk7XG5cbiAgICBjb25zb2xlLmFzc2VydChmaXJzdFJvd1BvcyA8PSBvZmZzZXQgJiYgKGVuZFBvcyA+PSBvZmZzZXQyIHx8IGxhc3QgPT09IG51bWJlck9mUm93cyAtIDEpLCAnZXJyb3InLCBmaXJzdFJvd1BvcywgZW5kUG9zLCBvZmZzZXQsIG9mZnNldDIsIGZpcnN0RXhjZXB0aW9uLCBsYXN0RXhjZXB0aW9uKTtcbiAgICByZXR1cm4ge2ZpcnN0LCBsYXN0LCBmaXJzdFJvd1BvcywgZW5kUG9zfTtcbiAgfVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm96ZW5EZWx0YShjdXJyZW50OiBudW1iZXJbXSwgdGFyZ2V0OiBudW1iZXJbXSk6IHsgYWRkZWQ6IG51bWJlcltdLCByZW1vdmVkOiBudW1iZXJbXSwgY29tbW9uOiBudW1iZXIgfSB7XG4gIGNvbnN0IGNsZW5ndGggPSBjdXJyZW50Lmxlbmd0aDtcbiAgY29uc3QgdGxlbmd0aCA9IHRhcmdldC5sZW5ndGg7XG4gIGlmIChjbGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHthZGRlZDogdGFyZ2V0LCByZW1vdmVkOiBbXSwgY29tbW9uOiAwfTtcbiAgfVxuICBpZiAodGxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB7YWRkZWQ6IFtdLCByZW1vdmVkOiBjdXJyZW50LCBjb21tb246IDB9O1xuICB9XG4gIGlmIChjbGVuZ3RoID09PSB0bGVuZ3RoKSB7IC8vc2luY2Ugc29ydGVkIGFuZCBsZWZ0IGluY3JlYXNpbmcgdHJ1ZVxuICAgIHJldHVybiB7YWRkZWQ6IFtdLCByZW1vdmVkOiBbXSwgY29tbW9uOiBjbGVuZ3RofTtcbiAgfVxuICBjb25zdCByZW1vdmVkID0gY3VycmVudC5zbGljZShNYXRoLm1pbih0bGVuZ3RoLCBjbGVuZ3RoKSk7XG4gIGNvbnN0IGFkZGVkID0gdGFyZ2V0LnNsaWNlKE1hdGgubWluKHRsZW5ndGgsIGNsZW5ndGgpKTtcbiAgcmV0dXJuIHthZGRlZCwgcmVtb3ZlZCwgY29tbW9uOiBjbGVuZ3RoIC0gcmVtb3ZlZC5sZW5ndGh9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlRnJvemVuKG9sZDogbnVtYmVyW10sIGNvbHVtbnM6IHsgZnJvemVuOiBib29sZWFuIH1bXSwgZmlyc3Q6IG51bWJlcik6IHsgdGFyZ2V0OiBudW1iZXJbXSwgYWRkZWQ6IG51bWJlcltdLCByZW1vdmVkOiBudW1iZXJbXSB9IHtcbiAgY29uc3Qgb2xkTGFzdCA9IG9sZC5sZW5ndGggPT09IDAgPyAwIDogb2xkW29sZC5sZW5ndGggLSAxXSArIDE7XG4gIGNvbnN0IGFkZGVkOiBudW1iZXJbXSA9IFtdO1xuICBjb25zdCByZW1vdmVkOiBudW1iZXJbXSA9IFtdO1xuXG4gIGZvciAobGV0IGkgPSBvbGQubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICBjb25zdCBpbmRleCA9IG9sZFtpXTtcbiAgICBpZiAoaW5kZXggPj0gZmlyc3QpIHtcbiAgICAgIHJlbW92ZWQucHVzaChvbGQucG9wKCkhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY2FuIHN0b3Agc2luY2Ugc29ydGVkIGFuZCBpdCB3aWxsIG5ldmVyIGhhcHBlbiBhZ2FpblxuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIC8vYWRkZWRcbiAgZm9yIChsZXQgaSA9IG9sZExhc3Q7IGkgPCBmaXJzdDsgKytpKSB7XG4gICAgaWYgKGNvbHVtbnNbaV0uZnJvemVuKSB7XG4gICAgICBhZGRlZC5wdXNoKGkpO1xuICAgICAgb2xkLnB1c2goaSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB7dGFyZ2V0OiBvbGQsIGFkZGVkLCByZW1vdmVkfTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvbG9naWMudHMiXSwibWFwcGluZ3MiOiJBQXNCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQXFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQThCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__IMixin__ = __webpack_require__(6);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_0__IMixin__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__PrefetchMixin__ = __webpack_require__(13);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_1__PrefetchMixin__[\"a\"]; });\n\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvbWl4aW4vaW5kZXgudHM/ODJlNiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQge0lNaXhpbiwgSU1peGluQWRhcHRlciwgSU1peGluQ2xhc3MsIEVTY3JvbGxSZXN1bHR9IGZyb20gJy4vSU1peGluJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBQcmVmZXRjaE1peGlufSBmcm9tICcuL1ByZWZldGNoTWl4aW4nO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9taXhpbi9pbmRleC50cyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__abortAble__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__animation__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__animation_KeyFinder__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__logic__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__mixin__ = __webpack_require__(1);\n\r\n\r\n\r\n\r\n\r\nclass ARowRenderer {\r\n    constructor(body, options = {}) {\r\n        this.body = body;\r\n        this.pool = [];\r\n        this.loadingPool = [];\r\n        this.loading = new Map();\r\n        this.visible = {\r\n            first: 0,\r\n            forcedFirst: 0,\r\n            last: -1,\r\n            forcedLast: -1\r\n        };\r\n        this.visibleFirstRowPos = 0;\r\n        this.abortAnimation = () => undefined;\r\n        this.options = {\r\n            async: Boolean(window.chrome) ? 'animation' : 'immediate',\r\n            minScrollDelta: 3,\r\n            mixins: [],\r\n            scrollingHint: false\r\n        };\r\n        this.adapter = this.createAdapter();\r\n        Object.assign(this.options, options);\r\n        this.mixins = this.options.mixins.map((mixinClass) => new mixinClass(this.adapter));\r\n        this.fragment = body.ownerDocument.createDocumentFragment();\r\n    }\r\n    addMixin(mixinClass, options) {\r\n        this.mixins.push(new mixinClass(this.adapter, options));\r\n    }\r\n    createAdapter() {\r\n        const r = {\r\n            visible: this.visible,\r\n            addAtBeginning: this.addAtBeginning.bind(this),\r\n            addAtBottom: this.addAtBottom.bind(this),\r\n            removeFromBeginning: this.removeFromBeginning.bind(this),\r\n            removeFromBottom: this.removeFromBottom.bind(this),\r\n            updateOffset: this.updateOffset.bind(this),\r\n            scroller: this.bodyScroller\r\n        };\r\n        Object.defineProperties(r, {\r\n            visibleFirstRowPos: {\r\n                get: () => this.visibleFirstRowPos,\r\n                enumerable: true\r\n            },\r\n            context: {\r\n                get: () => this.context,\r\n                enumerable: true\r\n            }\r\n        });\r\n        return r;\r\n    }\r\n    get bodyScroller() {\r\n        return this.body.parentElement;\r\n    }\r\n    init() {\r\n        const scroller = this.bodyScroller;\r\n        let oldTop = scroller.scrollTop;\r\n        const handler = () => {\r\n            const top = scroller.scrollTop;\r\n            if (Math.abs(oldTop - top) < this.options.minScrollDelta) {\r\n                return;\r\n            }\r\n            const isGoingDown = top > oldTop;\r\n            oldTop = top;\r\n            this.onScrolledVertically(top, scroller.clientHeight, isGoingDown);\r\n            if (this.options.scrollingHint) {\r\n                scroller.classList.remove('le-scrolling');\r\n            }\r\n        };\r\n        this.scrollListener = this.createDelayedHandler(handler, () => {\r\n            if (this.options.scrollingHint) {\r\n                scroller.classList.add('le-scrolling');\r\n            }\r\n        });\r\n        scroller.addEventListener('scroll', this.scrollListener);\r\n        this.recreate();\r\n    }\r\n    createDelayedHandler(delayedHandler, immediateCallback) {\r\n        const hasImmediate = typeof (window.setImmediate) === 'function';\r\n        let delayer;\r\n        if (this.options.async === 'immediate' && hasImmediate) {\r\n            delayer = setImmediate;\r\n        }\r\n        else if (this.options.async === 'animation' || this.options.async === 'immediate') {\r\n            delayer = requestAnimationFrame;\r\n        }\r\n        else if (typeof this.options.async === 'number') {\r\n            delayer = (c) => self.setTimeout(c, this.options.async);\r\n        }\r\n        else {\r\n            delayer = (c) => {\r\n                c();\r\n                return -1;\r\n            };\r\n        }\r\n        let timeOut = -1;\r\n        const wrapper = () => {\r\n            timeOut = -1;\r\n            delayedHandler();\r\n        };\r\n        return () => {\r\n            if (immediateCallback) {\r\n                immediateCallback();\r\n            }\r\n            if (timeOut > -1) {\r\n                return;\r\n            }\r\n            timeOut = delayer(wrapper);\r\n        };\r\n    }\r\n    destroy() {\r\n        this.bodyScroller.removeEventListener('scroll', this.scrollListener);\r\n        this.body.remove();\r\n    }\r\n    static cleanUp(item) {\r\n        if (item.style.height) {\r\n            item.style.height = null;\r\n        }\r\n    }\r\n    select(index) {\r\n        let item;\r\n        let result;\r\n        if (this.pool.length > 0) {\r\n            item = this.pool.pop();\r\n            result = this.updateRow(item, index);\r\n        }\r\n        else if (this.loadingPool.length > 0) {\r\n            item = this.loadingPool.pop();\r\n            item.classList.remove('loading');\r\n            result = this.createRow(item, index);\r\n        }\r\n        else {\r\n            item = this.body.ownerDocument.createElement('div');\r\n            result = this.createRow(item, index);\r\n        }\r\n        item.dataset.index = String(index);\r\n        return { item, result };\r\n    }\r\n    selectProxy() {\r\n        let proxy;\r\n        if (this.loadingPool.length > 0) {\r\n            proxy = this.loadingPool.pop();\r\n        }\r\n        else {\r\n            proxy = this.body.ownerDocument.createElement('div');\r\n            proxy.classList.add('loading');\r\n        }\r\n        return proxy;\r\n    }\r\n    recycle(item) {\r\n        ARowRenderer.cleanUp(item);\r\n        if (this.loading.has(item)) {\r\n            const abort = this.loading.get(item);\r\n            abort.abort();\r\n        }\r\n        else {\r\n            this.pool.push(item);\r\n        }\r\n    }\r\n    proxy(item, result) {\r\n        if (!Object(__WEBPACK_IMPORTED_MODULE_0__abortAble__[\"b\" /* isAbortAble */])(result)) {\r\n            return item;\r\n        }\r\n        const abort = result;\r\n        const real = item;\r\n        const proxy = this.selectProxy();\r\n        proxy.dataset.index = real.dataset.index;\r\n        proxy.style.height = real.style.height;\r\n        this.loading.set(proxy, abort);\r\n        abort.then((result) => {\r\n            if (result === __WEBPACK_IMPORTED_MODULE_0__abortAble__[\"a\" /* ABORTED */]) {\r\n                ARowRenderer.cleanUp(real);\r\n                this.pool.push(real);\r\n            }\r\n            else {\r\n                this.body.replaceChild(real, proxy);\r\n            }\r\n            this.loading.delete(proxy);\r\n            ARowRenderer.cleanUp(proxy);\r\n            this.loadingPool.push(proxy);\r\n        });\r\n        return proxy;\r\n    }\r\n    create(index) {\r\n        const { item, result } = this.select(index);\r\n        const { exceptionsLookup: ex, padding } = this.context;\r\n        if (ex.has(index)) {\r\n            item.style.height = `${ex.get(index) - padding(index)}px`;\r\n        }\r\n        return this.proxy(item, result);\r\n    }\r\n    removeAll() {\r\n        const arr = Array.from(this.body.children);\r\n        this.body.innerHTML = '';\r\n        arr.forEach((item) => {\r\n            this.recycle(item);\r\n        });\r\n    }\r\n    update() {\r\n        const first = this.visible.first;\r\n        const fragment = this.fragment;\r\n        const items = Array.from(this.body.children);\r\n        this.body.innerHTML = '';\r\n        items.forEach((item, i) => {\r\n            if (this.loading.has(item)) {\r\n                return;\r\n            }\r\n            const abort = this.updateRow(item, i + first);\r\n            fragment.appendChild(this.proxy(item, abort));\r\n        });\r\n        this.body.appendChild(fragment);\r\n    }\r\n    forEachRow(callback, inplace = false) {\r\n        const rows = Array.from(this.body.children);\r\n        const fragment = this.fragment;\r\n        if (!inplace) {\r\n            this.body.innerHTML = '';\r\n        }\r\n        rows.forEach((row, index) => {\r\n            if (!row.classList.contains('loading') && row.dataset.animation !== 'update_remove' && row.dataset.animation !== 'hide') {\r\n                callback(row, index + this.visible.first);\r\n            }\r\n            if (!inplace) {\r\n                fragment.appendChild(row);\r\n            }\r\n        });\r\n        if (!inplace) {\r\n            this.body.appendChild(fragment);\r\n        }\r\n    }\r\n    removeFromBeginning(from, to) {\r\n        return this.remove(from, to, true);\r\n    }\r\n    removeFromBottom(from, to) {\r\n        return this.remove(from, to, false);\r\n    }\r\n    remove(from, to, fromBeginning) {\r\n        for (let i = from; i <= to; ++i) {\r\n            const item = (fromBeginning ? this.body.firstChild : this.body.lastChild);\r\n            item.remove();\r\n            this.recycle(item);\r\n        }\r\n    }\r\n    addAtBeginning(from, to) {\r\n        if (from === to) {\r\n            this.body.insertBefore(this.create(from), this.body.firstChild);\r\n            return;\r\n        }\r\n        const fragment = this.fragment;\r\n        for (let i = from; i <= to; ++i) {\r\n            fragment.appendChild(this.create(i));\r\n        }\r\n        this.body.insertBefore(fragment, this.body.firstChild);\r\n    }\r\n    addAtBottom(from, to) {\r\n        if (from === to) {\r\n            this.body.appendChild(this.create(from));\r\n            return;\r\n        }\r\n        const fragment = this.fragment;\r\n        for (let i = from; i <= to; ++i) {\r\n            fragment.appendChild(this.create(i));\r\n        }\r\n        this.body.appendChild(fragment);\r\n    }\r\n    updateOffset(firstRowPos) {\r\n        const { totalHeight } = this.context;\r\n        this.visibleFirstRowPos = firstRowPos;\r\n        this.body.classList.toggle('odd', this.visible.first % 2 === 1);\r\n        this.body.style.transform = `translate(0, ${firstRowPos.toFixed(0)}px)`;\r\n        this.body.style.height = `${Math.max(1, totalHeight - firstRowPos).toFixed(0)}px`;\r\n    }\r\n    recreate(ctx) {\r\n        this.abortAnimation();\r\n        if (ctx) {\r\n            return this.recreateAnimated(ctx);\r\n        }\r\n        return this.recreatePure();\r\n    }\r\n    recreatePure() {\r\n        const context = this.context;\r\n        const scroller = this.bodyScroller;\r\n        this.updateOffset(0);\r\n        this.removeAll();\r\n        this.clearPool();\r\n        const { first, last, firstRowPos } = Object(__WEBPACK_IMPORTED_MODULE_3__logic__[\"d\" /* range */])(scroller.scrollTop, scroller.clientHeight, context.defaultRowHeight, context.exceptions, context.numberOfRows);\r\n        this.visible.first = this.visible.forcedFirst = first;\r\n        this.visible.last = this.visible.forcedLast = last;\r\n        if (first < 0) {\r\n            this.updateOffset(0);\r\n            return;\r\n        }\r\n        this.addAtBottom(first, last);\r\n        this.updateOffset(firstRowPos);\r\n    }\r\n    recreateAnimated(ctx) {\r\n        const lookup = new Map();\r\n        const prev = new __WEBPACK_IMPORTED_MODULE_2__animation_KeyFinder__[\"a\" /* default */](ctx.previous, ctx.previousKey);\r\n        const cur = new __WEBPACK_IMPORTED_MODULE_2__animation_KeyFinder__[\"a\" /* default */](this.context, ctx.currentKey);\r\n        const next = Object(__WEBPACK_IMPORTED_MODULE_3__logic__[\"d\" /* range */])(this.bodyScroller.scrollTop, this.bodyScroller.clientHeight, cur.context.defaultRowHeight, cur.context.exceptions, cur.context.numberOfRows);\r\n        {\r\n            const rows = Array.from(this.body.children);\r\n            const old = Object.assign({}, this.visible);\r\n            prev.positions(old.first, Math.min(old.last, old.first + rows.length), this.visibleFirstRowPos, (i, key, pos) => {\r\n                const n = rows[i];\r\n                if (n) {\r\n                    lookup.set(key, { n, pos, i });\r\n                }\r\n            });\r\n            this.body.innerHTML = ``;\r\n        }\r\n        this.visible.first = this.visible.forcedFirst = next.first;\r\n        this.visible.last = this.visible.forcedLast = next.last;\r\n        const fragment = this.fragment;\r\n        const animation = [];\r\n        let nodeY = next.firstRowPos;\r\n        cur.positions(next.first, next.last, next.firstRowPos, (i, key, pos) => {\r\n            let node;\r\n            let mode = __WEBPACK_IMPORTED_MODULE_1__animation__[\"a\" /* EAnimationMode */].UPDATE;\r\n            let previous;\r\n            if (lookup.has(key)) {\r\n                const item = lookup.get(key);\r\n                lookup.delete(key);\r\n                item.n.dataset.index = String(i);\r\n                node = this.proxy(item.n, this.updateRow(item.n, i));\r\n                previous = {\r\n                    index: item.i,\r\n                    y: item.pos,\r\n                    height: prev.exceptionHeightOf(item.i, true)\r\n                };\r\n            }\r\n            else {\r\n                const old = prev.posByKey(key);\r\n                node = this.create(i);\r\n                mode = old.index < 0 ? __WEBPACK_IMPORTED_MODULE_1__animation__[\"a\" /* EAnimationMode */].SHOW : __WEBPACK_IMPORTED_MODULE_1__animation__[\"a\" /* EAnimationMode */].UPDATE_CREATE;\r\n                previous = {\r\n                    index: old.index,\r\n                    y: old.pos >= 0 ? old.pos : pos,\r\n                    height: old.index < 0 ? cur.exceptionHeightOf(i, true) : prev.exceptionHeightOf(old.index, true)\r\n                };\r\n            }\r\n            animation.push({\r\n                node,\r\n                key,\r\n                mode,\r\n                previous,\r\n                nodeY,\r\n                nodeYCurrentHeight: pos,\r\n                current: {\r\n                    index: i,\r\n                    y: pos,\r\n                    height: cur.exceptionHeightOf(i)\r\n                }\r\n            });\r\n            node.style.transform = `translate(0, ${nodeY - pos}px)`;\r\n            nodeY += previous.height + (previous.index < 0 ? cur.padding(i) : prev.padding(previous.index));\r\n            fragment.appendChild(node);\r\n        });\r\n        let nodeYCurrentHeight = next.endPos;\r\n        lookup.forEach((item, key) => {\r\n            const r = cur.posByKey(key);\r\n            const nextPos = r.pos >= 0 ? r.pos : item.pos;\r\n            const node = item.n;\r\n            node.style.transform = `translate(0, ${item.pos - nodeY}px)`;\r\n            fragment.appendChild(node);\r\n            const prevHeight = prev.exceptionHeightOf(item.i, true);\r\n            animation.push({\r\n                node: item.n,\r\n                key,\r\n                mode: r.index < 0 ? __WEBPACK_IMPORTED_MODULE_1__animation__[\"a\" /* EAnimationMode */].HIDE : __WEBPACK_IMPORTED_MODULE_1__animation__[\"a\" /* EAnimationMode */].UPDATE_REMOVE,\r\n                previous: {\r\n                    index: item.i,\r\n                    y: item.pos,\r\n                    height: prevHeight\r\n                },\r\n                nodeY,\r\n                nodeYCurrentHeight,\r\n                current: {\r\n                    index: r.index,\r\n                    y: nextPos,\r\n                    height: r.index < 0 ? null : cur.exceptionHeightOf(r.index)\r\n                }\r\n            });\r\n            nodeYCurrentHeight += r.index < 0 ? cur.context.defaultRowHeight : (cur.exceptionHeightOf(r.index, true) + cur.padding(r.index));\r\n            nodeY += prevHeight + prev.padding(item.i);\r\n        });\r\n        this.updateOffset(next.firstRowPos);\r\n        this.animate(animation, ctx.phases || __WEBPACK_IMPORTED_MODULE_1__animation__[\"b\" /* defaultPhases */], prev, cur, fragment);\r\n    }\r\n    animate(animation, phases, previousFinder, currentFinder, fragment) {\r\n        if (animation.length <= 0) {\r\n            this.body.appendChild(fragment);\r\n            return;\r\n        }\r\n        let currentTimer = -1;\r\n        let actPhase = 0;\r\n        const executePhase = (phase, items = animation) => {\r\n            items.forEach((anim) => phase.apply(anim, previousFinder, currentFinder));\r\n        };\r\n        const run = () => {\r\n            console.assert(animation[0].node.offsetTop >= 0, 'dummy log for forcing dom update');\r\n            executePhase(phases[actPhase++]);\r\n            if (actPhase < phases.length) {\r\n                const next = phases[actPhase];\r\n                currentTimer = setTimeout(run, next.delay);\r\n                return;\r\n            }\r\n            const body = this.body.classList;\r\n            Array.from(body).forEach((v) => {\r\n                if (v.startsWith('le-') && v.endsWith('-animation')) {\r\n                    body.remove(v);\r\n                }\r\n            });\r\n            animation.forEach(({ node, mode }) => {\r\n                if (mode !== __WEBPACK_IMPORTED_MODULE_1__animation__[\"a\" /* EAnimationMode */].UPDATE_REMOVE && mode !== __WEBPACK_IMPORTED_MODULE_1__animation__[\"a\" /* EAnimationMode */].HIDE) {\r\n                    return;\r\n                }\r\n                node.remove();\r\n                node.style.transform = null;\r\n                this.recycle(node);\r\n            });\r\n            this.abortAnimation = () => undefined;\r\n            currentTimer = -1;\r\n        };\r\n        while (phases[actPhase].delay === 0) {\r\n            executePhase(phases[actPhase++]);\r\n        }\r\n        const body = this.body;\r\n        this.body.appendChild(fragment);\r\n        const dummyAnimation = [];\r\n        animation = animation.filter((d) => {\r\n            if (Object(__WEBPACK_IMPORTED_MODULE_1__animation__[\"c\" /* noAnimationChange */])(d, previousFinder.context.defaultRowHeight, currentFinder.context.defaultRowHeight)) {\r\n                dummyAnimation.push(d);\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n        if (dummyAnimation.length > 0) {\r\n            phases.slice(actPhase).forEach((phase) => executePhase(phase, dummyAnimation));\r\n        }\r\n        if (animation.length === 0) {\r\n            return;\r\n        }\r\n        body.classList.add('le-row-animation');\r\n        (new Set(animation.map((d) => d.mode))).forEach((mode) => {\r\n            body.classList.add(`le-${__WEBPACK_IMPORTED_MODULE_1__animation__[\"a\" /* EAnimationMode */][mode].toLowerCase().split('_')[0]}-animation`);\r\n        });\r\n        this.abortAnimation = () => {\r\n            if (currentTimer <= 0) {\r\n                return;\r\n            }\r\n            clearTimeout(currentTimer);\r\n            currentTimer = -1;\r\n            actPhase = phases.length - 1;\r\n            run();\r\n        };\r\n        currentTimer = setTimeout(run, phases[actPhase].delay);\r\n    }\r\n    clearPool() {\r\n        this.pool.splice(0, this.pool.length);\r\n    }\r\n    revalidate() {\r\n        const scroller = this.bodyScroller;\r\n        this.onScrolledVertically(scroller.scrollTop, scroller.clientHeight, true);\r\n        this.updateOffset(this.visibleFirstRowPos);\r\n    }\r\n    onScrolledVertically(scrollTop, clientHeight, isGoingDown) {\r\n        const scrollResult = this.onScrolledImpl(scrollTop, clientHeight);\r\n        this.mixins.forEach((mixin) => mixin.onScrolled(isGoingDown, scrollResult));\r\n        return scrollResult;\r\n    }\r\n    onScrolledImpl(scrollTop, clientHeight) {\r\n        const context = this.context;\r\n        const { first, last, firstRowPos } = Object(__WEBPACK_IMPORTED_MODULE_3__logic__[\"d\" /* range */])(scrollTop, clientHeight, context.defaultRowHeight, context.exceptions, context.numberOfRows);\r\n        const visible = this.visible;\r\n        visible.forcedFirst = first;\r\n        visible.forcedLast = last;\r\n        if ((first - visible.first) >= 0 && (last - visible.last) <= 0) {\r\n            return __WEBPACK_IMPORTED_MODULE_4__mixin__[\"a\" /* EScrollResult */].NONE;\r\n        }\r\n        let r = __WEBPACK_IMPORTED_MODULE_4__mixin__[\"a\" /* EScrollResult */].PARTIAL;\r\n        if (first > visible.last || last < visible.first) {\r\n            this.removeAll();\r\n            this.addAtBottom(first, last);\r\n            r = __WEBPACK_IMPORTED_MODULE_4__mixin__[\"a\" /* EScrollResult */].ALL;\r\n        }\r\n        else if (first < visible.first) {\r\n            this.removeFromBottom(last + 1, visible.last);\r\n            this.addAtBeginning(first, visible.first - 1);\r\n        }\r\n        else {\r\n            this.removeFromBeginning(visible.first, first - 1);\r\n            this.addAtBottom(visible.last + 1, last);\r\n        }\r\n        visible.first = first;\r\n        visible.last = last;\r\n        this.updateOffset(firstRowPos);\r\n        return r;\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ARowRenderer;\n\r\n/* harmony default export */ __webpack_exports__[\"b\"] = (ARowRenderer);\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvQVJvd1JlbmRlcmVyLnRzPzRkNDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtBQk9SVEVELCBJQWJvcnRBYmxlUHJvbWlzZSwgaXNBYm9ydEFibGV9IGZyb20gJy4vYWJvcnRBYmxlJztcbmltcG9ydCB7ZGVmYXVsdFBoYXNlcywgRUFuaW1hdGlvbk1vZGUsIElBbmltYXRpb25Db250ZXh0LCBJQW5pbWF0aW9uSXRlbSwgSVBoYXNlLCBub0FuaW1hdGlvbkNoYW5nZX0gZnJvbSAnLi9hbmltYXRpb24nO1xuaW1wb3J0IEtleUZpbmRlciBmcm9tICcuL2FuaW1hdGlvbi9LZXlGaW5kZXInO1xuaW1wb3J0IHtJRXhjZXB0aW9uQ29udGV4dCwgcmFuZ2V9IGZyb20gJy4vbG9naWMnO1xuaW1wb3J0IHtFU2Nyb2xsUmVzdWx0LCBJTWl4aW4sIElNaXhpbkFkYXB0ZXIsIElNaXhpbkNsYXNzfSBmcm9tICcuL21peGluJztcblxuZXhwb3J0IGRlY2xhcmUgdHlwZSBJUm93UmVuZGVyQ29udGV4dCA9IElFeGNlcHRpb25Db250ZXh0O1xuXG5leHBvcnQgaW50ZXJmYWNlIElSb3dSZW5kZXJlck9wdGlvbnMge1xuICAvKipcbiAgICogYXN5bmMgdXBkYXRlIG9uIHNjcm9sbGluZ1xuICAgKiBhbmltYXRpb24gLT4gdXNlIHJlcXVlc3RBbmltYXRpb25GcmFtZVxuICAgKiBpbW1lZGlhdGUgLT4gdXNlIHNldEltbWVkaWF0ZSBpZiBhdmFpbGFibGVcbiAgICogc3luYyAtPiBleGVjdXRlIHdpdGhpbiBzY3JvbGwgbGlzdGVuZXJcbiAgICoge251bWJlcn0gLT4gZXhlY3V0ZSB3aXRoaW4gdGhpcyBkZWxheSB1c2luZyBzZXRUaW1lb3V0XG4gICAqIEBkZWZhdWx0IGlzIGNocm9tZSA/IGFuaW1hdGlvbiBlbHNlIGltbWVkaWF0ZVxuICAgKi9cbiAgYXN5bmM6IG51bWJlciB8ICdhbmltYXRpb24nIHwgJ3N5bmMnIHwgJ2ltbWVkaWF0ZSc7XG5cbiAgLyoqXG4gICAqIG1pbmltYWwgbnVtYmVyIG9mIHBpeGVsIHRoZSBzY3JvbGxiYXJzIGhhcyB0byBtb3ZlXG4gICAqL1xuICBtaW5TY3JvbGxEZWx0YTogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBjbGFzcyBvZiBtaXhpbnMgdG8gdXNlIGZvciBvcHRpbWl6ZWQgcmVuZGVyaW5nXG4gICAqL1xuICBtaXhpbnM6IElNaXhpbkNsYXNzW107XG5cbiAgLyoqXG4gICAqIGFkZCB0aGUgc2Nyb2xsaW5nIGhpbnQgY2xhc3Mgd2hpbGUgc2Nyb2xsaW5nIHRvIGdpdmUgYSB1c2VyIGZlZWRiYWNrXG4gICAqL1xuICBzY3JvbGxpbmdIaW50OiBib29sZWFuO1xufVxuXG4vKipcbiAqIGJhc2UgY2xhc3MgZm9yIGNyZWF0aW5nIGEgc2NhbGFibGUgdGFibGUgcmVuZGVyZXIgYmFzZWQgb24gcm93c1xuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQVJvd1JlbmRlcmVyIHtcbiAgcHJpdmF0ZSByZWFkb25seSBwb29sOiBIVE1MRWxlbWVudFtdID0gW107XG4gIHByaXZhdGUgcmVhZG9ubHkgbG9hZGluZ1Bvb2w6IEhUTUxFbGVtZW50W10gPSBbXTtcbiAgcHJpdmF0ZSByZWFkb25seSBsb2FkaW5nID0gbmV3IE1hcDxIVE1MRWxlbWVudCwgSUFib3J0QWJsZVByb21pc2U8dm9pZD4+KCk7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBmcmFnbWVudDogRG9jdW1lbnRGcmFnbWVudDtcblxuICAvKipcbiAgICogY3VycmVudGx5IHZpc2libGUgc2xpY2VcbiAgICovXG4gIHByb3RlY3RlZCByZWFkb25seSB2aXNpYmxlID0ge1xuICAgIGZpcnN0OiAwLFxuICAgIGZvcmNlZEZpcnN0OiAwLFxuICAgIGxhc3Q6IC0xLFxuICAgIGZvcmNlZExhc3Q6IC0xXG4gIH07XG4gIC8qKlxuICAgKiBwb3NpdGlvbiBvZiB0aGUgZmlyc3QgdmlzaWJsZSByb3cgaW4gcGl4ZWxcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIHByb3RlY3RlZCB2aXNpYmxlRmlyc3RSb3dQb3MgPSAwO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgYWRhcHRlcjogSU1peGluQWRhcHRlcjtcbiAgcHJpdmF0ZSByZWFkb25seSBtaXhpbnM6IElNaXhpbltdO1xuICBwcml2YXRlIHNjcm9sbExpc3RlbmVyOiAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB2b2lkO1xuXG4gIHByaXZhdGUgYWJvcnRBbmltYXRpb246ICgpID0+IHZvaWQgPSAoKSA9PiB1bmRlZmluZWQ7XG5cbiAgcHJvdGVjdGVkIHJlYWRvbmx5IG9wdGlvbnM6IFJlYWRvbmx5PElSb3dSZW5kZXJlck9wdGlvbnM+ID0ge1xuICAgIGFzeW5jOiBCb29sZWFuKCg8YW55PndpbmRvdykuY2hyb21lKSA/ICdhbmltYXRpb24nIDogJ2ltbWVkaWF0ZScsIC8vIGFuaW1hdGlvbiBmcmFtZSBvbiBjaHJvbWVcbiAgICBtaW5TY3JvbGxEZWx0YTogMyxcbiAgICBtaXhpbnM6IFtdLFxuICAgIHNjcm9sbGluZ0hpbnQ6IGZhbHNlXG4gIH07XG5cbiAgY29uc3RydWN0b3IocHJvdGVjdGVkIHJlYWRvbmx5IGJvZHk6IEhUTUxFbGVtZW50LCBvcHRpb25zOiBQYXJ0aWFsPElSb3dSZW5kZXJlck9wdGlvbnM+ID0ge30pIHtcbiAgICB0aGlzLmFkYXB0ZXIgPSB0aGlzLmNyZWF0ZUFkYXB0ZXIoKTtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgdGhpcy5taXhpbnMgPSB0aGlzLm9wdGlvbnMubWl4aW5zLm1hcCgobWl4aW5DbGFzcykgPT4gbmV3IG1peGluQ2xhc3ModGhpcy5hZGFwdGVyKSk7XG5cbiAgICB0aGlzLmZyYWdtZW50ID0gYm9keS5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiByZWdpc3RlciBhbm90aGVyIG1peGluIHRvIHRoaXMgcmVuZGVyZXJcbiAgICogQHBhcmFtIHtJTWl4aW5DbGFzc30gbWl4aW5DbGFzcyB0aGUgbWl4aW4gY2xhc3MgdG8gaW5zdGFudGl0aWF0ZVxuICAgKiBAcGFyYW0gb3B0aW9ucyBvcHRpb25hbCBjb25zdHJ1Y3RvciBvcHRpb25zXG4gICAqL1xuICBwcm90ZWN0ZWQgYWRkTWl4aW4obWl4aW5DbGFzczogSU1peGluQ2xhc3MsIG9wdGlvbnM/OiBhbnkpIHtcbiAgICB0aGlzLm1peGlucy5wdXNoKG5ldyBtaXhpbkNsYXNzKHRoaXMuYWRhcHRlciwgb3B0aW9ucykpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVBZGFwdGVyKCk6IElNaXhpbkFkYXB0ZXIge1xuICAgIGNvbnN0IHI6IGFueSA9IHtcbiAgICAgIHZpc2libGU6IHRoaXMudmlzaWJsZSxcbiAgICAgIGFkZEF0QmVnaW5uaW5nOiB0aGlzLmFkZEF0QmVnaW5uaW5nLmJpbmQodGhpcyksXG4gICAgICBhZGRBdEJvdHRvbTogdGhpcy5hZGRBdEJvdHRvbS5iaW5kKHRoaXMpLFxuICAgICAgcmVtb3ZlRnJvbUJlZ2lubmluZzogdGhpcy5yZW1vdmVGcm9tQmVnaW5uaW5nLmJpbmQodGhpcyksXG4gICAgICByZW1vdmVGcm9tQm90dG9tOiB0aGlzLnJlbW92ZUZyb21Cb3R0b20uYmluZCh0aGlzKSxcbiAgICAgIHVwZGF0ZU9mZnNldDogdGhpcy51cGRhdGVPZmZzZXQuYmluZCh0aGlzKSxcbiAgICAgIHNjcm9sbGVyOiB0aGlzLmJvZHlTY3JvbGxlclxuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMociwge1xuICAgICAgdmlzaWJsZUZpcnN0Um93UG9zOiB7XG4gICAgICAgIGdldDogKCkgPT4gdGhpcy52aXNpYmxlRmlyc3RSb3dQb3MsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgIH0sXG4gICAgICBjb250ZXh0OiB7XG4gICAgICAgIGdldDogKCkgPT4gdGhpcy5jb250ZXh0LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHI7XG4gIH1cblxuICAvKipcbiAgICogZ2V0IHRoZSBzY3JvbGxpbmcgY29udGFpbmVyIGkuZS4gcGFyZW50IG9mIHRoZSBib2R5IGVsZW1lbnRcbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50fVxuICAgKi9cbiAgcHJvdGVjdGVkIGdldCBib2R5U2Nyb2xsZXIoKSB7XG4gICAgcmV0dXJuIDxIVE1MRWxlbWVudD50aGlzLmJvZHkucGFyZW50RWxlbWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiB0aGUgY3VycmVudCByZW5kZXIgY29udGV4dCwgdXBvbiBjaGFuZ2UgYHJlY3JlYXRlYCB0aGUgd2hvbGUgdGFibGVcbiAgICogQHJldHVybnMge0lSb3dSZW5kZXJDb250ZXh0fVxuICAgKi9cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGdldCBjb250ZXh0KCk6IElSb3dSZW5kZXJDb250ZXh0O1xuXG4gIC8qKlxuICAgKiBjcmVhdGVzIGEgbmV3IHJvd1xuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBub2RlIHRoZSBub2RlIG9mIHRoZSByb3dcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IHRoZSByb3cgaW5kZXhcbiAgICogQHJldHVybnMge0lBYm9ydEFibGVQcm9taXNlPHZvaWQ+IHwgdm9pZH0gZWl0aGVyIGFuIGFib3J0YWJsZSBvciBub3RoaW5nXG4gICAqL1xuICBwcm90ZWN0ZWQgYWJzdHJhY3QgY3JlYXRlUm93KG5vZGU6IEhUTUxFbGVtZW50LCBpbmRleDogbnVtYmVyKTogSUFib3J0QWJsZVByb21pc2U8dm9pZD4gfCB2b2lkO1xuXG4gIC8qKlxuICAgKiB1cGRhdGVzIGEgcm93XG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGUgdGhlIG5vZGUgb2YgdGhlIHJvd1xuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggdGhlIHJvdyBpbmRleFxuICAgKiBAcmV0dXJucyB7SUFib3J0QWJsZVByb21pc2U8dm9pZD4gfCB2b2lkfSBlaXRoZXIgYW4gYWJvcnRhYmxlIG9yIG5vdGhpbmdcbiAgICovXG4gIHByb3RlY3RlZCBhYnN0cmFjdCB1cGRhdGVSb3cobm9kZTogSFRNTEVsZW1lbnQsIGluZGV4OiBudW1iZXIpOiBJQWJvcnRBYmxlUHJvbWlzZTx2b2lkPiB8IHZvaWQ7XG5cbiAgLyoqXG4gICAqIGluaXRpYWxpemVzIHRoZSB0YWJsZSBhbmQgcmVnaXN0ZXIgdGhlIG9uc2Nyb2xsIGxpc3RlbmVyXG4gICAqIEByZXR1cm5zIHt2b2lkfSBub3RoaW5nXG4gICAqL1xuICBwcm90ZWN0ZWQgaW5pdCgpIHtcbiAgICBjb25zdCBzY3JvbGxlciA9IHRoaXMuYm9keVNjcm9sbGVyO1xuXG4gICAgLy9zeW5jIHNjcm9sbGluZyBvZiBoZWFkZXIgYW5kIGJvZHlcbiAgICBsZXQgb2xkVG9wID0gc2Nyb2xsZXIuc2Nyb2xsVG9wO1xuXG4gICAgY29uc3QgaGFuZGxlciA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHRvcCA9IHNjcm9sbGVyLnNjcm9sbFRvcDtcbiAgICAgIGlmIChNYXRoLmFicyhvbGRUb3AgLSB0b3ApIDwgdGhpcy5vcHRpb25zLm1pblNjcm9sbERlbHRhKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlzR29pbmdEb3duID0gdG9wID4gb2xkVG9wO1xuICAgICAgb2xkVG9wID0gdG9wO1xuICAgICAgdGhpcy5vblNjcm9sbGVkVmVydGljYWxseSh0b3AsIHNjcm9sbGVyLmNsaWVudEhlaWdodCwgaXNHb2luZ0Rvd24pO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5zY3JvbGxpbmdIaW50KSB7XG4gICAgICAgIHNjcm9sbGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2xlLXNjcm9sbGluZycpO1xuICAgICAgfVxuICAgIH07XG5cblxuICAgIHRoaXMuc2Nyb2xsTGlzdGVuZXIgPSB0aGlzLmNyZWF0ZURlbGF5ZWRIYW5kbGVyKGhhbmRsZXIsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2Nyb2xsaW5nSGludCkge1xuICAgICAgICBzY3JvbGxlci5jbGFzc0xpc3QuYWRkKCdsZS1zY3JvbGxpbmcnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHNjcm9sbGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsTGlzdGVuZXIpO1xuICAgIHRoaXMucmVjcmVhdGUoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBjcmVhdGVEZWxheWVkSGFuZGxlcihkZWxheWVkSGFuZGxlcjogKCkgPT4gdm9pZCwgaW1tZWRpYXRlQ2FsbGJhY2s/OiAoKSA9PiB2b2lkKSB7XG4gICAgY29uc3QgaGFzSW1tZWRpYXRlID0gdHlwZW9mICh3aW5kb3cuc2V0SW1tZWRpYXRlKSA9PT0gJ2Z1bmN0aW9uJztcblxuICAgIGxldCBkZWxheWVyOiAoY2FsbGJhY2s6ICgpID0+IHZvaWQpID0+IG51bWJlcjtcblxuICAgIGlmICh0aGlzLm9wdGlvbnMuYXN5bmMgPT09ICdpbW1lZGlhdGUnICYmIGhhc0ltbWVkaWF0ZSkge1xuICAgICAgZGVsYXllciA9IHNldEltbWVkaWF0ZTtcbiAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5hc3luYyA9PT0gJ2FuaW1hdGlvbicgfHwgdGhpcy5vcHRpb25zLmFzeW5jID09PSAnaW1tZWRpYXRlJykgeyAvLyBubyBJbW1lZGlhdGUgYXZhaWxhYmxlXG4gICAgICBkZWxheWVyID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5hc3luYyA9PT0gJ251bWJlcicpIHtcbiAgICAgIGRlbGF5ZXIgPSAoYykgPT4gc2VsZi5zZXRUaW1lb3V0KGMsIHRoaXMub3B0aW9ucy5hc3luYyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGF5ZXIgPSAoYykgPT4ge1xuICAgICAgICBjKCk7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH07XG4gICAgfVxuICAgIGxldCB0aW1lT3V0ID0gLTE7XG5cbiAgICBjb25zdCB3cmFwcGVyID0gKCkgPT4ge1xuICAgICAgdGltZU91dCA9IC0xO1xuICAgICAgZGVsYXllZEhhbmRsZXIoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChpbW1lZGlhdGVDYWxsYmFjaykge1xuICAgICAgICBpbW1lZGlhdGVDYWxsYmFjaygpO1xuICAgICAgfVxuICAgICAgaWYgKHRpbWVPdXQgPiAtMSkge1xuICAgICAgICByZXR1cm47IC8vIGFscmVhZHkgc2NoZWR1bGVkXG4gICAgICB9XG4gICAgICB0aW1lT3V0ID0gZGVsYXllcih3cmFwcGVyKTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIGRlc3Ryb3lzIHRoaXMgcmVuZGVyZXIgYW5kIHVucmVnaXN0ZXJzIGFsbCBldmVudCBsaXN0ZW5lcnNcbiAgICovXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5ib2R5U2Nyb2xsZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5zY3JvbGxMaXN0ZW5lcik7XG4gICAgdGhpcy5ib2R5LnJlbW92ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgY2xlYW5VcChpdGVtOiBIVE1MRWxlbWVudCkge1xuICAgIGlmIChpdGVtLnN0eWxlLmhlaWdodCkge1xuICAgICAgaXRlbS5zdHlsZS5oZWlnaHQgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2VsZWN0KGluZGV4OiBudW1iZXIpOiB7IGl0ZW06IEhUTUxFbGVtZW50LCByZXN1bHQ6IElBYm9ydEFibGVQcm9taXNlPHZvaWQ+IHwgdm9pZCB9IHtcbiAgICBsZXQgaXRlbTogSFRNTEVsZW1lbnQ7XG4gICAgbGV0IHJlc3VsdDogSUFib3J0QWJsZVByb21pc2U8dm9pZD4gfCB2b2lkO1xuICAgIGlmICh0aGlzLnBvb2wubGVuZ3RoID4gMCkge1xuICAgICAgaXRlbSA9IHRoaXMucG9vbC5wb3AoKSE7XG4gICAgICByZXN1bHQgPSB0aGlzLnVwZGF0ZVJvdyhpdGVtLCBpbmRleCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmxvYWRpbmdQb29sLmxlbmd0aCA+IDApIHtcbiAgICAgIGl0ZW0gPSB0aGlzLmxvYWRpbmdQb29sLnBvcCgpITtcbiAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnbG9hZGluZycpO1xuICAgICAgcmVzdWx0ID0gdGhpcy5jcmVhdGVSb3coaXRlbSwgaW5kZXgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpdGVtID0gdGhpcy5ib2R5Lm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICByZXN1bHQgPSB0aGlzLmNyZWF0ZVJvdyhpdGVtLCBpbmRleCk7XG4gICAgfVxuICAgIGl0ZW0uZGF0YXNldC5pbmRleCA9IFN0cmluZyhpbmRleCk7XG4gICAgcmV0dXJuIHtpdGVtLCByZXN1bHR9O1xuICB9XG5cbiAgcHJpdmF0ZSBzZWxlY3RQcm94eSgpIHtcbiAgICBsZXQgcHJveHk6IEhUTUxFbGVtZW50O1xuICAgIGlmICh0aGlzLmxvYWRpbmdQb29sLmxlbmd0aCA+IDApIHtcbiAgICAgIHByb3h5ID0gdGhpcy5sb2FkaW5nUG9vbC5wb3AoKSE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb3h5ID0gdGhpcy5ib2R5Lm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBwcm94eS5jbGFzc0xpc3QuYWRkKCdsb2FkaW5nJyk7XG4gICAgfVxuICAgIHJldHVybiBwcm94eTtcbiAgfVxuXG4gIHByaXZhdGUgcmVjeWNsZShpdGVtOiBIVE1MRWxlbWVudCkge1xuICAgIEFSb3dSZW5kZXJlci5jbGVhblVwKGl0ZW0pO1xuICAgIC8vIGNoZWNrIGlmIHRoZSBvcmlnaW5hbCBkb20gZWxlbWVudCBpcyBzdGlsbCBiZWluZyBtYW5pcHVsYXRlZFxuICAgIGlmICh0aGlzLmxvYWRpbmcuaGFzKGl0ZW0pKSB7XG4gICAgICBjb25zdCBhYm9ydCA9IHRoaXMubG9hZGluZy5nZXQoaXRlbSkhO1xuICAgICAgYWJvcnQuYWJvcnQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wb29sLnB1c2goaXRlbSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBwcm94eShpdGVtOiBIVE1MRWxlbWVudCwgcmVzdWx0OiBJQWJvcnRBYmxlUHJvbWlzZTx2b2lkPiB8IHZvaWQpIHtcbiAgICBpZiAoIWlzQWJvcnRBYmxlKHJlc3VsdCkpIHtcbiAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cbiAgICBjb25zdCBhYm9ydCA9IHJlc3VsdDtcbiAgICAvL2xhenkgbG9hZGluZ1xuXG4gICAgY29uc3QgcmVhbCA9IGl0ZW07XG4gICAgY29uc3QgcHJveHkgPSB0aGlzLnNlbGVjdFByb3h5KCk7XG4gICAgLy8gY29weSBhdHRyaWJ1dGVzXG4gICAgcHJveHkuZGF0YXNldC5pbmRleCA9IHJlYWwuZGF0YXNldC5pbmRleDtcbiAgICBwcm94eS5zdHlsZS5oZWlnaHQgPSByZWFsLnN0eWxlLmhlaWdodDtcblxuICAgIHRoaXMubG9hZGluZy5zZXQocHJveHksIGFib3J0KTtcbiAgICBhYm9ydC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIGlmIChyZXN1bHQgPT09IEFCT1JURUQpIHtcbiAgICAgICAgLy9hYm9ydGVkIGNhbiByZWN5Y2xlIHRoZSByZWFsIG9uZVxuICAgICAgICBBUm93UmVuZGVyZXIuY2xlYW5VcChyZWFsKTtcbiAgICAgICAgdGhpcy5wb29sLnB1c2gocmVhbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvL2Z1bGx5IGxvYWRlZFxuICAgICAgICB0aGlzLmJvZHkucmVwbGFjZUNoaWxkKHJlYWwsIHByb3h5KTtcbiAgICAgIH1cbiAgICAgIHRoaXMubG9hZGluZy5kZWxldGUocHJveHkpO1xuICAgICAgQVJvd1JlbmRlcmVyLmNsZWFuVXAocHJveHkpO1xuICAgICAgdGhpcy5sb2FkaW5nUG9vbC5wdXNoKHByb3h5KTtcbiAgICB9KTtcbiAgICByZXR1cm4gcHJveHk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZShpbmRleDogbnVtYmVyKSB7XG4gICAgY29uc3Qge2l0ZW0sIHJlc3VsdH0gPSB0aGlzLnNlbGVjdChpbmRleCk7XG5cbiAgICBjb25zdCB7ZXhjZXB0aW9uc0xvb2t1cDogZXgsIHBhZGRpbmd9ID0gdGhpcy5jb250ZXh0O1xuICAgIGlmIChleC5oYXMoaW5kZXgpKSB7XG4gICAgICBpdGVtLnN0eWxlLmhlaWdodCA9IGAke2V4LmdldChpbmRleCkhIC0gcGFkZGluZyhpbmRleCl9cHhgO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnByb3h5KGl0ZW0sIHJlc3VsdCk7XG4gIH1cblxuICBwcml2YXRlIHJlbW92ZUFsbCgpIHtcbiAgICBjb25zdCBhcnIgPSA8SFRNTEVsZW1lbnRbXT5BcnJheS5mcm9tKHRoaXMuYm9keS5jaGlsZHJlbik7XG4gICAgdGhpcy5ib2R5LmlubmVySFRNTCA9ICcnO1xuICAgIGFyci5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLnJlY3ljbGUoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiB0cmlnZ2VycyBhbmQgdmlzdWFsIHVwZGF0ZSBvZiBhbGwgdmlzaWJsZSByb3dzXG4gICAqL1xuICBwcm90ZWN0ZWQgdXBkYXRlKCkge1xuICAgIGNvbnN0IGZpcnN0ID0gdGhpcy52aXNpYmxlLmZpcnN0O1xuICAgIGNvbnN0IGZyYWdtZW50ID0gdGhpcy5mcmFnbWVudDtcbiAgICBjb25zdCBpdGVtcyA9IEFycmF5LmZyb20odGhpcy5ib2R5LmNoaWxkcmVuKTtcbiAgICB0aGlzLmJvZHkuaW5uZXJIVE1MID0gJyc7XG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbTogSFRNTEVsZW1lbnQsIGkpID0+IHtcbiAgICAgIGlmICh0aGlzLmxvYWRpbmcuaGFzKGl0ZW0pKSB7XG4gICAgICAgIC8vIHN0aWxsIGxvYWRpbmdcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgYWJvcnQgPSB0aGlzLnVwZGF0ZVJvdyhpdGVtLCBpICsgZmlyc3QpO1xuXG4gICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCh0aGlzLnByb3h5KGl0ZW0sIGFib3J0KSk7XG4gICAgfSk7XG4gICAgdGhpcy5ib2R5LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiB1dGlsaXR5IHRvIGV4ZWN1dGUgYSBmdW5jdGlvbiBmb3IgZWFjaCB2aXNpYmxlIHJvd1xuICAgKiBAcGFyYW0geyhyb3c6IEhUTUxFbGVtZW50LCByb3dJbmRleDogbnVtYmVyKSA9PiB2b2lkfSBjYWxsYmFjayBjYWxsYmFjayB0byBleGVjdXRlXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5wbGFjZSB3aGV0aGVyIHRoZSBET00gY2hhbmdlcyBzaG91bGQgYmUgcGVyZm9ybWVkIGlucGxhY2UgaW5zdGVhZCBvZiBpbiBhIGZyYWdtZW50XG4gICAqL1xuICBwcm90ZWN0ZWQgZm9yRWFjaFJvdyhjYWxsYmFjazogKHJvdzogSFRNTEVsZW1lbnQsIHJvd0luZGV4OiBudW1iZXIpID0+IHZvaWQsIGlucGxhY2U6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIGNvbnN0IHJvd3MgPSBBcnJheS5mcm9tKHRoaXMuYm9keS5jaGlsZHJlbik7XG4gICAgY29uc3QgZnJhZ21lbnQgPSB0aGlzLmZyYWdtZW50O1xuICAgIGlmICghaW5wbGFjZSkge1xuICAgICAgdGhpcy5ib2R5LmlubmVySFRNTCA9ICcnO1xuICAgIH1cbiAgICByb3dzLmZvckVhY2goKHJvdzogSFRNTEVsZW1lbnQsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoIXJvdy5jbGFzc0xpc3QuY29udGFpbnMoJ2xvYWRpbmcnKSAmJiByb3cuZGF0YXNldC5hbmltYXRpb24gIT09ICd1cGRhdGVfcmVtb3ZlJyAmJiByb3cuZGF0YXNldC5hbmltYXRpb24gIT09ICdoaWRlJykge1xuICAgICAgICAvL3NraXAgbG9hZGluZyBvbmVzIGFuZCB0ZW1wb3Jhcnkgb25lc1xuICAgICAgICBjYWxsYmFjayhyb3csIGluZGV4ICsgdGhpcy52aXNpYmxlLmZpcnN0KTtcbiAgICAgIH1cbiAgICAgIGlmICghaW5wbGFjZSkge1xuICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmICghaW5wbGFjZSkge1xuICAgICAgdGhpcy5ib2R5LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbW92ZUZyb21CZWdpbm5pbmcoZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyKSB7XG4gICAgcmV0dXJuIHRoaXMucmVtb3ZlKGZyb20sIHRvLCB0cnVlKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlRnJvbUJvdHRvbShmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIpIHtcbiAgICByZXR1cm4gdGhpcy5yZW1vdmUoZnJvbSwgdG8sIGZhbHNlKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlKGZyb206IG51bWJlciwgdG86IG51bWJlciwgZnJvbUJlZ2lubmluZzogYm9vbGVhbikge1xuICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDw9IHRvOyArK2kpIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSA8SFRNTEVsZW1lbnQ+KGZyb21CZWdpbm5pbmcgPyB0aGlzLmJvZHkuZmlyc3RDaGlsZCA6IHRoaXMuYm9keS5sYXN0Q2hpbGQpO1xuICAgICAgaXRlbS5yZW1vdmUoKTtcbiAgICAgIHRoaXMucmVjeWNsZShpdGVtKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFkZEF0QmVnaW5uaW5nKGZyb206IG51bWJlciwgdG86IG51bWJlcikge1xuICAgIGlmIChmcm9tID09PSB0bykge1xuICAgICAgdGhpcy5ib2R5Lmluc2VydEJlZm9yZSh0aGlzLmNyZWF0ZShmcm9tKSwgdGhpcy5ib2R5LmZpcnN0Q2hpbGQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBmcmFnbWVudCA9IHRoaXMuZnJhZ21lbnQ7XG4gICAgZm9yIChsZXQgaSA9IGZyb207IGkgPD0gdG87ICsraSkge1xuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGUoaSkpO1xuICAgIH1cbiAgICB0aGlzLmJvZHkuaW5zZXJ0QmVmb3JlKGZyYWdtZW50LCB0aGlzLmJvZHkuZmlyc3RDaGlsZCk7XG4gIH1cblxuICBwcml2YXRlIGFkZEF0Qm90dG9tKGZyb206IG51bWJlciwgdG86IG51bWJlcikge1xuICAgIGlmIChmcm9tID09PSB0bykge1xuICAgICAgdGhpcy5ib2R5LmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlKGZyb20pKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZnJhZ21lbnQgPSB0aGlzLmZyYWdtZW50O1xuICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDw9IHRvOyArK2kpIHtcbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlKGkpKTtcbiAgICB9XG4gICAgdGhpcy5ib2R5LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlT2Zmc2V0KGZpcnN0Um93UG9zOiBudW1iZXIpIHtcbiAgICBjb25zdCB7dG90YWxIZWlnaHR9ID0gdGhpcy5jb250ZXh0O1xuICAgIHRoaXMudmlzaWJsZUZpcnN0Um93UG9zID0gZmlyc3RSb3dQb3M7XG5cbiAgICAvL29kZCBzdGFydCBwYXRjaCBmb3IgY29ycmVjdCBiYWNrZ3JvdW5kXG4gICAgdGhpcy5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ29kZCcsIHRoaXMudmlzaWJsZS5maXJzdCAlIDIgPT09IDEpO1xuXG4gICAgdGhpcy5ib2R5LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMCwgJHtmaXJzdFJvd1Bvcy50b0ZpeGVkKDApfXB4KWA7XG4gICAgdGhpcy5ib2R5LnN0eWxlLmhlaWdodCA9IGAke01hdGgubWF4KDEsIHRvdGFsSGVpZ2h0IC0gZmlyc3RSb3dQb3MpLnRvRml4ZWQoMCl9cHhgO1xuICB9XG5cbiAgLyoqXG4gICAqIHJlbW92ZXMgYWxsIHJvd3MgYW5kIHJlY3JlYXRlcyB0aGUgdGFibGVcbiAgICogQHBhcmFtIHtJQW5pbWF0aW9uQ29udGV4dH0gY3R4IG9wdGlvbmFsIGFuaW1hdGlvbiBjb250ZXh0IHRvIGNyZWF0ZSBhIHRyYW5zaXRpb24gYmV0d2VlbiB0aGUgcHJldmlvdXMgYW5kIHRoZSBjdXJyZW50IHRhYmxlc1xuICAgKiBAcmV0dXJucyB7dm9pZH0gbm90aGluZ1xuICAgKi9cbiAgcHJvdGVjdGVkIHJlY3JlYXRlKGN0eD86IElBbmltYXRpb25Db250ZXh0KSB7XG4gICAgdGhpcy5hYm9ydEFuaW1hdGlvbigpO1xuICAgIGlmIChjdHgpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlY3JlYXRlQW5pbWF0ZWQoY3R4KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVjcmVhdGVQdXJlKCk7XG4gIH1cblxuICBwcml2YXRlIHJlY3JlYXRlUHVyZSgpIHtcbiAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuXG4gICAgY29uc3Qgc2Nyb2xsZXIgPSB0aGlzLmJvZHlTY3JvbGxlcjtcblxuICAgIC8vdXBkYXRlIGZpcnN0IHRvIGF2b2lkIHJlc2V0dGluZyBzY3JvbGxUb3BcbiAgICB0aGlzLnVwZGF0ZU9mZnNldCgwKTtcblxuICAgIHRoaXMucmVtb3ZlQWxsKCk7XG4gICAgdGhpcy5jbGVhclBvb2woKTtcblxuICAgIGNvbnN0IHtmaXJzdCwgbGFzdCwgZmlyc3RSb3dQb3N9ID0gcmFuZ2Uoc2Nyb2xsZXIuc2Nyb2xsVG9wLCBzY3JvbGxlci5jbGllbnRIZWlnaHQsIGNvbnRleHQuZGVmYXVsdFJvd0hlaWdodCwgY29udGV4dC5leGNlcHRpb25zLCBjb250ZXh0Lm51bWJlck9mUm93cyk7XG5cbiAgICB0aGlzLnZpc2libGUuZmlyc3QgPSB0aGlzLnZpc2libGUuZm9yY2VkRmlyc3QgPSBmaXJzdDtcbiAgICB0aGlzLnZpc2libGUubGFzdCA9IHRoaXMudmlzaWJsZS5mb3JjZWRMYXN0ID0gbGFzdDtcblxuICAgIGlmIChmaXJzdCA8IDApIHtcbiAgICAgIC8vIGVtcHR5XG4gICAgICB0aGlzLnVwZGF0ZU9mZnNldCgwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5hZGRBdEJvdHRvbShmaXJzdCwgbGFzdCk7XG4gICAgdGhpcy51cGRhdGVPZmZzZXQoZmlyc3RSb3dQb3MpO1xuICB9XG5cblxuICBwcml2YXRlIHJlY3JlYXRlQW5pbWF0ZWQoY3R4OiBJQW5pbWF0aW9uQ29udGV4dCkge1xuICAgIGNvbnN0IGxvb2t1cCA9IG5ldyBNYXA8c3RyaW5nLCB7IG46IEhUTUxFbGVtZW50LCBwb3M6IG51bWJlciwgaTogbnVtYmVyIH0+KCk7XG4gICAgY29uc3QgcHJldiA9IG5ldyBLZXlGaW5kZXIoY3R4LnByZXZpb3VzLCBjdHgucHJldmlvdXNLZXkpO1xuICAgIGNvbnN0IGN1ciA9IG5ldyBLZXlGaW5kZXIodGhpcy5jb250ZXh0LCBjdHguY3VycmVudEtleSk7XG4gICAgY29uc3QgbmV4dCA9IHJhbmdlKHRoaXMuYm9keVNjcm9sbGVyLnNjcm9sbFRvcCwgdGhpcy5ib2R5U2Nyb2xsZXIuY2xpZW50SGVpZ2h0LCBjdXIuY29udGV4dC5kZWZhdWx0Um93SGVpZ2h0LCBjdXIuY29udGV4dC5leGNlcHRpb25zLCBjdXIuY29udGV4dC5udW1iZXJPZlJvd3MpO1xuXG4gICAge1xuICAgICAgY29uc3Qgcm93cyA9IDxIVE1MRWxlbWVudFtdPkFycmF5LmZyb20odGhpcy5ib2R5LmNoaWxkcmVuKTtcbiAgICAgIGNvbnN0IG9sZCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMudmlzaWJsZSk7XG4gICAgICAvL3N0b3JlIHRoZSBjdXJyZW50IHJvd3MgaW4gYSBsb29rdXAgYW5kIGNsZWFyXG5cbiAgICAgIHByZXYucG9zaXRpb25zKG9sZC5maXJzdCwgTWF0aC5taW4ob2xkLmxhc3QsIG9sZC5maXJzdCArIHJvd3MubGVuZ3RoKSwgdGhpcy52aXNpYmxlRmlyc3RSb3dQb3MsIChpLCBrZXksIHBvcykgPT4ge1xuICAgICAgICBjb25zdCBuID0gcm93c1tpXTtcbiAgICAgICAgaWYgKG4pIHsgLy8gc2hvdWxkbid0IGhhcHBlbiB0aGF0IGl0IGlzIG5vdCB0aGVyZVxuICAgICAgICAgIGxvb2t1cC5zZXQoa2V5LCB7biwgcG9zLCBpfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZWxzZSB7XG4gICAgICAgIC8vICBjb25zb2xlLmVycm9yKGksIGtleSwgcG9zLCByb3dzKTtcbiAgICAgICAgLy99XG4gICAgICB9KTtcbiAgICAgIHRoaXMuYm9keS5pbm5lckhUTUwgPSBgYDtcbiAgICB9XG5cbiAgICB0aGlzLnZpc2libGUuZmlyc3QgPSB0aGlzLnZpc2libGUuZm9yY2VkRmlyc3QgPSBuZXh0LmZpcnN0O1xuICAgIHRoaXMudmlzaWJsZS5sYXN0ID0gdGhpcy52aXNpYmxlLmZvcmNlZExhc3QgPSBuZXh0Lmxhc3Q7XG5cbiAgICBjb25zdCBmcmFnbWVudCA9IHRoaXMuZnJhZ21lbnQ7XG4gICAgY29uc3QgYW5pbWF0aW9uOiBJQW5pbWF0aW9uSXRlbVtdID0gW107XG5cbiAgICBsZXQgbm9kZVkgPSBuZXh0LmZpcnN0Um93UG9zO1xuICAgIGN1ci5wb3NpdGlvbnMobmV4dC5maXJzdCwgbmV4dC5sYXN0LCBuZXh0LmZpcnN0Um93UG9zLCAoaSwga2V5LCBwb3MpID0+IHtcbiAgICAgIGxldCBub2RlOiBIVE1MRWxlbWVudDtcbiAgICAgIGxldCBtb2RlOiBFQW5pbWF0aW9uTW9kZSA9IEVBbmltYXRpb25Nb2RlLlVQREFURTtcbiAgICAgIGxldCBwcmV2aW91czoge1xuICAgICAgICBpbmRleDogbnVtYmVyIHwgLTE7XG4gICAgICAgIHk6IG51bWJlcjtcbiAgICAgICAgaGVpZ2h0OiBudW1iZXIgfCBudWxsO1xuICAgICAgfTtcbiAgICAgIGlmIChsb29rdXAuaGFzKGtleSkpIHtcbiAgICAgICAgLy8gc3RpbGwgdmlzaWJsZVxuICAgICAgICBjb25zdCBpdGVtID0gbG9va3VwLmdldChrZXkpITtcbiAgICAgICAgbG9va3VwLmRlbGV0ZShrZXkpO1xuXG4gICAgICAgIC8vIHVwZGF0ZSBoZWlnaHRcblxuICAgICAgICBpdGVtLm4uZGF0YXNldC5pbmRleCA9IFN0cmluZyhpKTtcbiAgICAgICAgbm9kZSA9IHRoaXMucHJveHkoaXRlbS5uLCB0aGlzLnVwZGF0ZVJvdyhpdGVtLm4sIGkpKTtcbiAgICAgICAgcHJldmlvdXMgPSB7XG4gICAgICAgICAgaW5kZXg6IGl0ZW0uaSxcbiAgICAgICAgICB5OiBpdGVtLnBvcyxcbiAgICAgICAgICBoZWlnaHQ6IHByZXYuZXhjZXB0aW9uSGVpZ2h0T2YoaXRlbS5pLCB0cnVlKVxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbmVlZCBhIG5ldyByb3dcbiAgICAgICAgY29uc3Qgb2xkID0gcHJldi5wb3NCeUtleShrZXkpO1xuICAgICAgICAvLyBtYXliZSBub3QgdmlzaWJsZSAgYmVmb3JlIHNvIGtlZXAgaW4gcGxhY2VcbiAgICAgICAgbm9kZSA9IHRoaXMuY3JlYXRlKGkpO1xuXG4gICAgICAgIG1vZGUgPSBvbGQuaW5kZXggPCAwID8gRUFuaW1hdGlvbk1vZGUuU0hPVyA6IEVBbmltYXRpb25Nb2RlLlVQREFURV9DUkVBVEU7XG4gICAgICAgIHByZXZpb3VzID0ge1xuICAgICAgICAgIGluZGV4OiBvbGQuaW5kZXgsXG4gICAgICAgICAgeTogb2xkLnBvcyA+PSAwID8gb2xkLnBvcyA6IHBvcyxcbiAgICAgICAgICBoZWlnaHQ6IG9sZC5pbmRleCA8IDAgPyBjdXIuZXhjZXB0aW9uSGVpZ2h0T2YoaSwgdHJ1ZSkgOiBwcmV2LmV4Y2VwdGlvbkhlaWdodE9mKG9sZC5pbmRleCwgdHJ1ZSlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGFuaW1hdGlvbi5wdXNoKHtcbiAgICAgICAgbm9kZSxcbiAgICAgICAga2V5LFxuICAgICAgICBtb2RlLFxuICAgICAgICBwcmV2aW91cyxcbiAgICAgICAgbm9kZVksXG4gICAgICAgIG5vZGVZQ3VycmVudEhlaWdodDogcG9zLFxuICAgICAgICBjdXJyZW50OiB7XG4gICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgeTogcG9zLFxuICAgICAgICAgIGhlaWdodDogY3VyLmV4Y2VwdGlvbkhlaWdodE9mKGkpXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbm9kZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKDAsICR7bm9kZVkgLSBwb3N9cHgpYDtcbiAgICAgIG5vZGVZICs9IHByZXZpb3VzLmhlaWdodCEgKyAocHJldmlvdXMuaW5kZXggPCAwID8gY3VyLnBhZGRpbmcoaSkgOiBwcmV2LnBhZGRpbmcocHJldmlvdXMuaW5kZXgpKTtcblxuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgfSk7XG5cbiAgICBsZXQgbm9kZVlDdXJyZW50SGVpZ2h0ID0gbmV4dC5lbmRQb3M7XG4gICAgLy8gaXRlbXMgdGhhdCBhcmUgZ29pbmcgdG8gYmUgcmVtb3ZlZFxuICAgIGxvb2t1cC5mb3JFYWNoKChpdGVtLCBrZXkpID0+IHtcbiAgICAgIC8vIGNhbGN1bGF0ZSB0aGVpciBuZXh0IHBvc2l0aW9uXG4gICAgICBjb25zdCByID0gY3VyLnBvc0J5S2V5KGtleSk7XG5cbiAgICAgIC8vIG1heWJlIG5vdCB2aXNpYmxlIGFueW1vcmUsIGtlZXAgaW4gcGxhY2VcbiAgICAgIGNvbnN0IG5leHRQb3MgPSByLnBvcyA+PSAwID8gci5wb3MgOiBpdGVtLnBvcztcbiAgICAgIGNvbnN0IG5vZGUgPSBpdGVtLm47XG4gICAgICAvLyBsb2NhdGVkIGF0IGFkZGVkUG9zXG4gICAgICAvLyBzaG91bGQgZW5kIHVwIGF0IG5leHRQb3NcbiAgICAgIC8vIHdhcyBwcmV2aW91c2x5IGF0IGl0ZW0ucG9zXG4gICAgICBub2RlLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMCwgJHtpdGVtLnBvcyAtIG5vZGVZfXB4KWA7XG4gICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChub2RlKTtcblxuICAgICAgY29uc3QgcHJldkhlaWdodCA9IHByZXYuZXhjZXB0aW9uSGVpZ2h0T2YoaXRlbS5pLCB0cnVlKTtcblxuICAgICAgYW5pbWF0aW9uLnB1c2goe1xuICAgICAgICBub2RlOiBpdGVtLm4sXG4gICAgICAgIGtleSxcbiAgICAgICAgbW9kZTogci5pbmRleCA8IDAgPyBFQW5pbWF0aW9uTW9kZS5ISURFIDogRUFuaW1hdGlvbk1vZGUuVVBEQVRFX1JFTU9WRSxcbiAgICAgICAgcHJldmlvdXM6IHtcbiAgICAgICAgICBpbmRleDogaXRlbS5pLFxuICAgICAgICAgIHk6IGl0ZW0ucG9zLFxuICAgICAgICAgIGhlaWdodDogcHJldkhlaWdodFxuICAgICAgICB9LFxuICAgICAgICBub2RlWSxcbiAgICAgICAgbm9kZVlDdXJyZW50SGVpZ2h0LFxuICAgICAgICBjdXJyZW50OiB7XG4gICAgICAgICAgaW5kZXg6IHIuaW5kZXgsXG4gICAgICAgICAgeTogbmV4dFBvcyxcbiAgICAgICAgICBoZWlnaHQ6IHIuaW5kZXggPCAwID8gbnVsbCA6IGN1ci5leGNlcHRpb25IZWlnaHRPZihyLmluZGV4KVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIG5vZGVZQ3VycmVudEhlaWdodCArPSByLmluZGV4IDwgMCA/IGN1ci5jb250ZXh0LmRlZmF1bHRSb3dIZWlnaHQgOiAoY3VyLmV4Y2VwdGlvbkhlaWdodE9mKHIuaW5kZXgsIHRydWUpISArIGN1ci5wYWRkaW5nKHIuaW5kZXgpKTtcbiAgICAgIG5vZGVZICs9IHByZXZIZWlnaHQhICsgcHJldi5wYWRkaW5nKGl0ZW0uaSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnVwZGF0ZU9mZnNldChuZXh0LmZpcnN0Um93UG9zKTtcblxuICAgIHRoaXMuYW5pbWF0ZShhbmltYXRpb24sIGN0eC5waGFzZXMgfHwgZGVmYXVsdFBoYXNlcywgcHJldiwgY3VyLCBmcmFnbWVudCk7XG4gIH1cblxuICBwcml2YXRlIGFuaW1hdGUoYW5pbWF0aW9uOiBJQW5pbWF0aW9uSXRlbVtdLCBwaGFzZXM6IElQaGFzZVtdLCBwcmV2aW91c0ZpbmRlcjogS2V5RmluZGVyLCBjdXJyZW50RmluZGVyOiBLZXlGaW5kZXIsIGZyYWdtZW50OiBEb2N1bWVudEZyYWdtZW50KSB7XG4gICAgaWYgKGFuaW1hdGlvbi5sZW5ndGggPD0gMCkge1xuICAgICAgdGhpcy5ib2R5LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgY3VycmVudFRpbWVyOiBhbnkgPSAtMTtcbiAgICBsZXQgYWN0UGhhc2UgPSAwO1xuXG4gICAgY29uc3QgZXhlY3V0ZVBoYXNlID0gKHBoYXNlOiBJUGhhc2UsIGl0ZW1zID0gYW5pbWF0aW9uKSA9PiB7XG4gICAgICBpdGVtcy5mb3JFYWNoKChhbmltKSA9PiBwaGFzZS5hcHBseShhbmltLCBwcmV2aW91c0ZpbmRlciwgY3VycmVudEZpbmRlcikpO1xuICAgIH07XG5cbiAgICBjb25zdCBydW4gPSAoKSA9PiB7XG4gICAgICAvL2R1bW15IGxvZyBmb3IgZm9yY2luZyBkb20gdXBkYXRlXG4gICAgICBjb25zb2xlLmFzc2VydChhbmltYXRpb25bMF0hLm5vZGUub2Zmc2V0VG9wID49IDAsICdkdW1teSBsb2cgZm9yIGZvcmNpbmcgZG9tIHVwZGF0ZScpO1xuICAgICAgZXhlY3V0ZVBoYXNlKHBoYXNlc1thY3RQaGFzZSsrXSk7XG5cbiAgICAgIC8vIHNoaWZ0ZWQgYnkgb25lIHNpbmNlIGFscmVhZHkgYWRkZWQgdGhyb3VnaCArK1xuICAgICAgaWYgKGFjdFBoYXNlIDwgcGhhc2VzLmxlbmd0aCkge1xuICAgICAgICAvLyBzY2hlZHVsZSB0aGUgbmV4dCBvbmVcbiAgICAgICAgY29uc3QgbmV4dCA9IHBoYXNlc1thY3RQaGFzZV0hO1xuICAgICAgICBjdXJyZW50VGltZXIgPSBzZXRUaW1lb3V0KHJ1biwgbmV4dC5kZWxheSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gbGFzdCBvbmVcbiAgICAgIGNvbnN0IGJvZHkgPSB0aGlzLmJvZHkuY2xhc3NMaXN0O1xuICAgICAgQXJyYXkuZnJvbShib2R5KS5mb3JFYWNoKCh2KSA9PiB7XG4gICAgICAgIGlmICh2LnN0YXJ0c1dpdGgoJ2xlLScpICYmIHYuZW5kc1dpdGgoJy1hbmltYXRpb24nKSkge1xuICAgICAgICAgIGJvZHkucmVtb3ZlKHYpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vIGNsZWFuIHVwXG4gICAgICBhbmltYXRpb24uZm9yRWFjaCgoe25vZGUsIG1vZGV9KSA9PiB7XG4gICAgICAgIGlmIChtb2RlICE9PSBFQW5pbWF0aW9uTW9kZS5VUERBVEVfUkVNT1ZFICYmIG1vZGUgIT09IEVBbmltYXRpb25Nb2RlLkhJREUpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbm9kZS5yZW1vdmUoKTtcbiAgICAgICAgbm9kZS5zdHlsZS50cmFuc2Zvcm0gPSBudWxsO1xuICAgICAgICB0aGlzLnJlY3ljbGUobm9kZSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuYWJvcnRBbmltYXRpb24gPSAoKSA9PiB1bmRlZmluZWQ7XG4gICAgICBjdXJyZW50VGltZXIgPSAtMTtcbiAgICB9O1xuXG4gICAgLy8gZXhlY3V0ZSBhbGwgcGhhc2VzIGhhdmluZyBhIGRlbGF5IG9mIHplcm9cbiAgICB3aGlsZSAocGhhc2VzW2FjdFBoYXNlXS5kZWxheSA9PT0gMCkge1xuICAgICAgZXhlY3V0ZVBoYXNlKHBoYXNlc1thY3RQaGFzZSsrXSk7XG4gICAgfVxuICAgIC8vIGFmdGVyIHRoZSBpbml0aWFsIG9uZVxuICAgIGNvbnN0IGJvZHkgPSB0aGlzLmJvZHk7XG4gICAgdGhpcy5ib2R5LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgIGNvbnN0IGR1bW15QW5pbWF0aW9uOiBJQW5pbWF0aW9uSXRlbVtdID0gW107XG4gICAgYW5pbWF0aW9uID0gYW5pbWF0aW9uLmZpbHRlcigoZCkgPT4ge1xuICAgICAgaWYgKG5vQW5pbWF0aW9uQ2hhbmdlKGQsIHByZXZpb3VzRmluZGVyLmNvbnRleHQuZGVmYXVsdFJvd0hlaWdodCwgY3VycmVudEZpbmRlci5jb250ZXh0LmRlZmF1bHRSb3dIZWlnaHQpKSB7XG4gICAgICAgIGR1bW15QW5pbWF0aW9uLnB1c2goZCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuXG4gICAgaWYgKGR1bW15QW5pbWF0aW9uLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIGV4ZWN1dGUgYWxsIHBoYXNlcyBmb3IgdGhlbVxuICAgICAgcGhhc2VzLnNsaWNlKGFjdFBoYXNlKS5mb3JFYWNoKChwaGFzZSkgPT4gZXhlY3V0ZVBoYXNlKHBoYXNlLCBkdW1teUFuaW1hdGlvbikpO1xuICAgIH1cblxuICAgIGlmIChhbmltYXRpb24ubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKCdsZS1yb3ctYW5pbWF0aW9uJyk7XG4gICAgKG5ldyBTZXQoYW5pbWF0aW9uLm1hcCgoZCkgPT4gZC5tb2RlKSkpLmZvckVhY2goKG1vZGUpID0+IHtcbiAgICAgIC8vIGFkZCBjbGFzcyBidXQgbWFwIHRvIFVQREFURSBvbmx5XG4gICAgICBib2R5LmNsYXNzTGlzdC5hZGQoYGxlLSR7RUFuaW1hdGlvbk1vZGVbbW9kZV0udG9Mb3dlckNhc2UoKS5zcGxpdCgnXycpWzBdfS1hbmltYXRpb25gKTtcbiAgICB9KTtcblxuICAgIHRoaXMuYWJvcnRBbmltYXRpb24gPSAoKSA9PiB7XG4gICAgICBpZiAoY3VycmVudFRpbWVyIDw9IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gYWJvcnQgYnkgcmVtb3ZpbmdcbiAgICAgIGNsZWFyVGltZW91dChjdXJyZW50VGltZXIpO1xuICAgICAgY3VycmVudFRpbWVyID0gLTE7XG4gICAgICAvLyBydW4gdGhlIGxhc3QgcGhhc2VcbiAgICAgIGFjdFBoYXNlID0gcGhhc2VzLmxlbmd0aCAtIDE7XG4gICAgICBydW4oKTtcbiAgICB9O1xuXG4gICAgLy8gbmV4dCB0aWNrIHN1Y2ggdGhhdCBET00gd2lsbCBiZSB1cGRhdGVkXG4gICAgY3VycmVudFRpbWVyID0gc2V0VGltZW91dChydW4sIHBoYXNlc1thY3RQaGFzZV0uZGVsYXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIGNsZWFycyB0aGUgcm93IHBvb2wgdXNlZCBmb3IgZmFzdGVyIGNyZWF0aW9uXG4gICAqL1xuICBwcm90ZWN0ZWQgY2xlYXJQb29sKCkge1xuICAgIC8vIGNsZWFyIHBvb2xcbiAgICB0aGlzLnBvb2wuc3BsaWNlKDAsIHRoaXMucG9vbC5sZW5ndGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIHRyaWdnZXJzIGEgcmV2YWxpZGF0aW9uIG9mIHRoZSBjdXJyZW50IHNjcm9sbGluZyBvZmZlc3RcbiAgICovXG4gIHByb3RlY3RlZCByZXZhbGlkYXRlKCkge1xuICAgIGNvbnN0IHNjcm9sbGVyID0gdGhpcy5ib2R5U2Nyb2xsZXI7XG4gICAgdGhpcy5vblNjcm9sbGVkVmVydGljYWxseShzY3JvbGxlci5zY3JvbGxUb3AsIHNjcm9sbGVyLmNsaWVudEhlaWdodCwgdHJ1ZSk7XG4gICAgdGhpcy51cGRhdGVPZmZzZXQodGhpcy52aXNpYmxlRmlyc3RSb3dQb3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIHNjcm9sbGluZyB2ZXJ0aWNhbGx5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzY3JvbGxUb3AgdG9wIHNjcm9sbGluZ1xuICAgKiBAcGFyYW0ge251bWJlcn0gY2xpZW50SGVpZ2h0IHZpc2libGUgaGVpZ2h0XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNHb2luZ0Rvd24gaGludCB3aGV0aGVyIHRoZSBzY3JvbGxUb3AgaW5jcmVhc2VzXG4gICAqIEByZXR1cm4ge0VTY3JvbGxSZXN1bHR9IGZ1bGwgaW4gY2FzZSBvZiBhIGZ1bGwgcmVidWlsZCBvciBwYXJ0aWFsIHVwZGF0ZVxuICAgKi9cbiAgcHJvdGVjdGVkIG9uU2Nyb2xsZWRWZXJ0aWNhbGx5KHNjcm9sbFRvcDogbnVtYmVyLCBjbGllbnRIZWlnaHQ6IG51bWJlciwgaXNHb2luZ0Rvd246IGJvb2xlYW4pOiBFU2Nyb2xsUmVzdWx0IHtcbiAgICBjb25zdCBzY3JvbGxSZXN1bHQgPSB0aGlzLm9uU2Nyb2xsZWRJbXBsKHNjcm9sbFRvcCwgY2xpZW50SGVpZ2h0KTtcbiAgICB0aGlzLm1peGlucy5mb3JFYWNoKChtaXhpbikgPT4gbWl4aW4ub25TY3JvbGxlZChpc0dvaW5nRG93biwgc2Nyb2xsUmVzdWx0KSk7XG4gICAgcmV0dXJuIHNjcm9sbFJlc3VsdDtcbiAgfVxuXG4gIHByaXZhdGUgb25TY3JvbGxlZEltcGwoc2Nyb2xsVG9wOiBudW1iZXIsIGNsaWVudEhlaWdodDogbnVtYmVyKTogRVNjcm9sbFJlc3VsdCB7XG4gICAgY29uc3QgY29udGV4dCA9IHRoaXMuY29udGV4dDtcbiAgICBjb25zdCB7Zmlyc3QsIGxhc3QsIGZpcnN0Um93UG9zfSA9IHJhbmdlKHNjcm9sbFRvcCwgY2xpZW50SGVpZ2h0LCBjb250ZXh0LmRlZmF1bHRSb3dIZWlnaHQsIGNvbnRleHQuZXhjZXB0aW9ucywgY29udGV4dC5udW1iZXJPZlJvd3MpO1xuXG4gICAgY29uc3QgdmlzaWJsZSA9IHRoaXMudmlzaWJsZTtcbiAgICB2aXNpYmxlLmZvcmNlZEZpcnN0ID0gZmlyc3Q7XG4gICAgdmlzaWJsZS5mb3JjZWRMYXN0ID0gbGFzdDtcblxuICAgIGlmICgoZmlyc3QgLSB2aXNpYmxlLmZpcnN0KSA+PSAwICYmIChsYXN0IC0gdmlzaWJsZS5sYXN0KSA8PSAwKSB7XG4gICAgICAvL25vdGhpbmcgdG8gZG9cbiAgICAgIHJldHVybiBFU2Nyb2xsUmVzdWx0Lk5PTkU7XG4gICAgfVxuXG4gICAgbGV0IHI6IEVTY3JvbGxSZXN1bHQgPSBFU2Nyb2xsUmVzdWx0LlBBUlRJQUw7XG5cbiAgICBpZiAoZmlyc3QgPiB2aXNpYmxlLmxhc3QgfHwgbGFzdCA8IHZpc2libGUuZmlyc3QpIHtcbiAgICAgIC8vbm8gb3ZlcmxhcCwgY2xlYW4gYW5kIGRyYXcgZXZlcnl0aGluZ1xuICAgICAgLy9jb25zb2xlLmxvZyhgZmYgYWRkZWQ6ICR7bGFzdCAtIGZpcnN0ICsgMX0gcmVtb3ZlZDogJHt2aXNpYmxlTGFzdCAtIHZpc2libGVGaXJzdCArIDF9ICR7Zmlyc3R9OiR7bGFzdH0gJHtvZmZzZXR9YCk7XG4gICAgICAvL3JlbW92ZVJvd3ModmlzaWJsZUZpcnN0LCB2aXNpYmxlTGFzdCk7XG4gICAgICB0aGlzLnJlbW92ZUFsbCgpO1xuICAgICAgdGhpcy5hZGRBdEJvdHRvbShmaXJzdCwgbGFzdCk7XG4gICAgICByID0gRVNjcm9sbFJlc3VsdC5BTEw7XG4gICAgfSBlbHNlIGlmIChmaXJzdCA8IHZpc2libGUuZmlyc3QpIHtcbiAgICAgIC8vc29tZSBmaXJzdCByb3dzIG1pc3NpbmcgYW5kIHNvbWUgbGFzdCByb3dzIHRvIG11Y2hcbiAgICAgIC8vY29uc29sZS5sb2coYHVwIGFkZGVkOiAke3Zpc2libGVGaXJzdCAtIGZpcnN0ICsgMX0gcmVtb3ZlZDogJHt2aXNpYmxlTGFzdCAtIGxhc3QgKyAxfSAke2ZpcnN0fToke2xhc3R9ICR7b2Zmc2V0fWApO1xuICAgICAgdGhpcy5yZW1vdmVGcm9tQm90dG9tKGxhc3QgKyAxLCB2aXNpYmxlLmxhc3QpO1xuICAgICAgdGhpcy5hZGRBdEJlZ2lubmluZyhmaXJzdCwgdmlzaWJsZS5maXJzdCAtIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvL2NvbnNvbGUubG9nKGBkbyBhZGRlZDogJHtsYXN0IC0gdmlzaWJsZUxhc3QgKyAxfSByZW1vdmVkOiAke2ZpcnN0IC0gdmlzaWJsZUZpcnN0ICsgMX0gJHtmaXJzdH06JHtsYXN0fSAke29mZnNldH1gKTtcbiAgICAgIC8vc29tZSBsYXN0IHJvd3MgbWlzc2luZyBhbmQgc29tZSBmaXJzdCByb3dzIHRvIG11Y2hcbiAgICAgIHRoaXMucmVtb3ZlRnJvbUJlZ2lubmluZyh2aXNpYmxlLmZpcnN0LCBmaXJzdCAtIDEpO1xuICAgICAgdGhpcy5hZGRBdEJvdHRvbSh2aXNpYmxlLmxhc3QgKyAxLCBsYXN0KTtcbiAgICB9XG5cbiAgICB2aXNpYmxlLmZpcnN0ID0gZmlyc3Q7XG4gICAgdmlzaWJsZS5sYXN0ID0gbGFzdDtcblxuICAgIHRoaXMudXBkYXRlT2Zmc2V0KGZpcnN0Um93UG9zKTtcbiAgICByZXR1cm4gcjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBUm93UmVuZGVyZXI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL0FSb3dSZW5kZXJlci50cyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFrQ0E7QUFtQ0E7QUFBQTtBQWxDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQU1BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBNEJBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBR0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__GridStyleManager__ = __webpack_require__(7);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_0__GridStyleManager__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return __WEBPACK_IMPORTED_MODULE_0__GridStyleManager__[\"c\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return __WEBPACK_IMPORTED_MODULE_0__GridStyleManager__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return __WEBPACK_IMPORTED_MODULE_0__GridStyleManager__[\"d\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__StyleManager__ = __webpack_require__(8);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_1__StyleManager__[\"a\"]; });\n\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvc3R5bGUvaW5kZXgudHM/MDY4NiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQge0lDb2x1bW59IGZyb20gJy4vSUNvbHVtbic7XG5leHBvcnQge2RlZmF1bHQgYXMgR3JpZFN0eWxlTWFuYWdlciwgc2V0Q29sdW1uLCBURU1QTEFURSwgc2V0VGVtcGxhdGV9IGZyb20gJy4vR3JpZFN0eWxlTWFuYWdlcic7XG5leHBvcnQge2RlZmF1bHQgYXMgU3R5bGVNYW5hZ2VyfSBmcm9tICcuL1N0eWxlTWFuYWdlcic7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL3N0eWxlL2luZGV4LnRzIl0sIm1hcHBpbmdzIjoiQUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export default */\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = isAbortAble;\nconst ABORTED = Symbol('aborted');\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ABORTED;\n\r\nfunction abortAble(loader) {\r\n    return {\r\n        then(onfulfilled) {\r\n            let aborted = null;\r\n            const isAborted = () => aborted === null;\r\n            const aborter = new Promise((resolve) => aborted = resolve);\r\n            const fullfiller = loader.then((r) => {\r\n                if (isAborted()) {\r\n                    return ABORTED;\r\n                }\r\n                return Promise.resolve(onfulfilled(r)).then((r) => isAborted() ? ABORTED : r);\r\n            });\r\n            const p = Promise.race([aborter, fullfiller]);\r\n            return {\r\n                abort: () => {\r\n                    if (aborted !== null) {\r\n                        aborted(ABORTED);\r\n                        aborted = null;\r\n                    }\r\n                },\r\n                then: p.then.bind(p),\r\n                catch: p.catch.bind(p),\r\n                [Symbol.toStringTag]: p[Symbol.toStringTag]\r\n            };\r\n        }\r\n    };\r\n}\r\nfunction isAbortAble(abortAble) {\r\n    return abortAble !== undefined && abortAble !== null && abortAble && typeof abortAble.then === 'function' && typeof abortAble.abort === 'function';\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvYWJvcnRBYmxlLnRzP2IyYmEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGludGVyZmFjZSBJQWJvcnRBYmxlUHJvbWlzZTxUPiBleHRlbmRzIFByb21pc2U8VCB8IHN5bWJvbD4ge1xuICBhYm9ydCgpOiB2b2lkO1xufVxuXG5leHBvcnQgY29uc3QgQUJPUlRFRCA9IFN5bWJvbCgnYWJvcnRlZCcpO1xuXG4vKipcbiAqIGFib3J0IGFibGUgUHJvbWlzZSB3cmFwcGVyLCByZXR1cm5zIGEgcHJvbWlzZSB3aGljaCBjYW4gYmUgYWJvcnRlZCwgYW5kIHRyeWluZyB0byBhdm9pZCBleGVjdXRpbmcgdGhlcmVmb3JlIHRoZSB3cmFwcGVkIHByb21pc2VcbiAqIEBwYXJhbSB7UHJvbWlzZTxUPn0gbG9hZGVyXG4gKiBAcmV0dXJucyB7YW55fVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBhYm9ydEFibGU8VD4obG9hZGVyOiBQcm9taXNlPFQ+KSB7XG4gIHJldHVybiB7XG4gICAgdGhlbjxUUmVzdWx0MT4ob25mdWxmaWxsZWQ6ICgodmFsdWU6IFQpID0+IFRSZXN1bHQxIHwgUHJvbWlzZUxpa2U8VFJlc3VsdDE+KSk6IElBYm9ydEFibGVQcm9taXNlPFRSZXN1bHQxPiB7XG4gICAgICBsZXQgYWJvcnRlZDogKCh2OiBzeW1ib2wpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG4gICAgICBjb25zdCBpc0Fib3J0ZWQgPSAoKSA9PiBhYm9ydGVkID09PSBudWxsO1xuICAgICAgY29uc3QgYWJvcnRlciA9IG5ldyBQcm9taXNlPHN5bWJvbD4oKHJlc29sdmUpID0+IGFib3J0ZWQgPSByZXNvbHZlKTtcbiAgICAgIGNvbnN0IGZ1bGxmaWxsZXIgPSBsb2FkZXIudGhlbigocikgPT4ge1xuICAgICAgICBpZiAoaXNBYm9ydGVkKCkpIHtcbiAgICAgICAgICByZXR1cm4gQUJPUlRFRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG9uZnVsZmlsbGVkKHIpKS50aGVuKChyKSA9PiBpc0Fib3J0ZWQoKSA/IEFCT1JURUQgOiByKTtcbiAgICAgIH0pO1xuICAgICAgY29uc3QgcCA9IFByb21pc2UucmFjZTxUUmVzdWx0MSB8IHN5bWJvbD4oW2Fib3J0ZXIsIGZ1bGxmaWxsZXJdKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFib3J0OiAoKTogdm9pZCA9PiB7XG4gICAgICAgICAgaWYgKGFib3J0ZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGFib3J0ZWQoQUJPUlRFRCk7XG4gICAgICAgICAgICBhYm9ydGVkID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHRoZW46IHAudGhlbi5iaW5kKHApLFxuICAgICAgICBjYXRjaDogcC5jYXRjaC5iaW5kKHApLFxuICAgICAgICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogcFtTeW1ib2wudG9TdHJpbmdUYWddXG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBjaGVja2VkIHdoZXRoZXIgdGhlIGdpdmVuIGFyZ3VtZW50IGlzIGFuIGFib3J0YWJsZSBQcm9taXNlXG4gKiBAcGFyYW0ge0lBYm9ydEFibGVQcm9taXNlPGFueT4gfCB2b2lkIHwgbnVsbCB8IHVuZGVmaW5lZH0gYWJvcnRBYmxlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQWJvcnRBYmxlKGFib3J0QWJsZTogSUFib3J0QWJsZVByb21pc2U8YW55PiB8IHZvaWQgfCB1bmRlZmluZWQgfCBudWxsKTogYWJvcnRBYmxlIGlzIElBYm9ydEFibGVQcm9taXNlPGFueT4ge1xuICByZXR1cm4gYWJvcnRBYmxlICE9PSB1bmRlZmluZWQgJiYgYWJvcnRBYmxlICE9PSBudWxsICYmIGFib3J0QWJsZSAmJiB0eXBlb2YgYWJvcnRBYmxlLnRoZW4gPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGFib3J0QWJsZS5hYm9ydCA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvYWJvcnRBYmxlLnRzIl0sIm1hcHBpbmdzIjoiQUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4\n");

/***/ }),
/* 5 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("class KeyFinder {\r\n    constructor(context, key) {\r\n        this.context = context;\r\n        this.key = key;\r\n        this.cache = [];\r\n        this.lastFilled = 0;\r\n        this.key2index = new Map();\r\n        this.context.exceptions.forEach((e) => {\r\n            this.cache[e.index] = e.y;\r\n            this.key2index.set(key(e.index), e.index);\r\n        });\r\n    }\r\n    findValidStart(before) {\r\n        for (let i = before - 1; i >= 0; --i) {\r\n            if (this.cache[i] !== undefined) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    posByKey(key) {\r\n        if (this.key2index.has(key)) {\r\n            const index = this.key2index.get(key);\r\n            return { index, pos: this.pos(index) };\r\n        }\r\n        return this.fillCacheTillKey(key);\r\n    }\r\n    pos(index) {\r\n        if (this.context.exceptions.length === 0) {\r\n            return index * this.context.defaultRowHeight;\r\n        }\r\n        const cached = this.cache[index];\r\n        if (cached !== undefined) {\r\n            return cached;\r\n        }\r\n        const start = this.findValidStart(index);\r\n        if (start < 0) {\r\n            this.fillCache(0, index, 0);\r\n        }\r\n        else {\r\n            this.fillCache(start + 1, index, this.cache[start] + this.heightOf(start));\r\n        }\r\n        return this.cache[index];\r\n    }\r\n    fillCache(first, last, offset, callback) {\r\n        if (last <= this.lastFilled) {\r\n            if (!callback) {\r\n                return;\r\n            }\r\n            for (let i = first; i <= last; ++i) {\r\n                callback(i, this.key(i), this.cache[i]);\r\n            }\r\n            return;\r\n        }\r\n        let pos = offset;\r\n        for (let i = first; i <= last; ++i) {\r\n            this.cache[i] = pos;\r\n            const key = this.key(i);\r\n            this.key2index.set(key, i);\r\n            if (callback) {\r\n                callback(i, key, pos);\r\n            }\r\n            pos += this.heightOf(i);\r\n        }\r\n    }\r\n    heightOf(index) {\r\n        const lookup = this.context.exceptionsLookup;\r\n        return lookup.has(index) ? lookup.get(index) : this.context.defaultRowHeight;\r\n    }\r\n    exceptionHeightOf(index, returnDefault = false) {\r\n        const padding = this.context.padding(index);\r\n        const lookup = this.context.exceptionsLookup;\r\n        if (lookup.has(index)) {\r\n            return lookup.get(index) - padding;\r\n        }\r\n        return returnDefault ? this.context.defaultRowHeight - padding : null;\r\n    }\r\n    padding(index) {\r\n        return this.context.padding(index);\r\n    }\r\n    fillCacheTillKey(target) {\r\n        let pos = 0;\r\n        for (let i = this.lastFilled; i < this.context.numberOfRows; ++i, ++this.lastFilled) {\r\n            const c = this.cache[i];\r\n            if (c !== undefined) {\r\n                pos = c + this.heightOf(i);\r\n                continue;\r\n            }\r\n            const key = this.key(i);\r\n            this.cache[i] = pos;\r\n            this.key2index.set(key, i);\r\n            if (key === target) {\r\n                return { index: i, pos };\r\n            }\r\n            pos += this.heightOf(i);\r\n        }\r\n        return { index: -1, pos: -1 };\r\n    }\r\n    positions(first, last, offset, callback) {\r\n        this.fillCache(first, last, offset, callback);\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = KeyFinder;\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvYW5pbWF0aW9uL0tleUZpbmRlci50cz82YmUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SUV4Y2VwdGlvbkNvbnRleHR9IGZyb20gJy4uL2xvZ2ljJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgS2V5RmluZGVyIHtcbiAgcHJpdmF0ZSByZWFkb25seSBjYWNoZTogbnVtYmVyW10gPSBbXTtcbiAgcHJpdmF0ZSBsYXN0RmlsbGVkID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSBrZXkyaW5kZXggPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSBjb250ZXh0OiBJRXhjZXB0aW9uQ29udGV4dCwgcHVibGljIHJlYWRvbmx5IGtleTogKHJvd0luZGV4OiBudW1iZXIpID0+IHN0cmluZykge1xuICAgIHRoaXMuY29udGV4dC5leGNlcHRpb25zLmZvckVhY2goKGUpID0+IHtcbiAgICAgIHRoaXMuY2FjaGVbZS5pbmRleF0gPSBlLnk7XG4gICAgICB0aGlzLmtleTJpbmRleC5zZXQoa2V5KGUuaW5kZXgpLCBlLmluZGV4KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZmluZFZhbGlkU3RhcnQoYmVmb3JlOiBudW1iZXIpIHtcbiAgICBmb3IgKGxldCBpID0gYmVmb3JlIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIGlmICh0aGlzLmNhY2hlW2ldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gICAqIEByZXR1cm4ge251bWJlcn0gLTEgaWYgbm90IGZvdW5kXG4gICAqL1xuICBwb3NCeUtleShrZXk6IHN0cmluZykge1xuICAgIGlmICh0aGlzLmtleTJpbmRleC5oYXMoa2V5KSkge1xuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmtleTJpbmRleC5nZXQoa2V5KSE7XG4gICAgICByZXR1cm4ge2luZGV4LCBwb3M6IHRoaXMucG9zKGluZGV4KX07XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZpbGxDYWNoZVRpbGxLZXkoa2V5KTtcbiAgfVxuXG4gIHBvcyhpbmRleDogbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMuY29udGV4dC5leGNlcHRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gZmFzdCBwYXNzXG4gICAgICByZXR1cm4gaW5kZXggKiB0aGlzLmNvbnRleHQuZGVmYXVsdFJvd0hlaWdodDtcbiAgICB9XG4gICAgY29uc3QgY2FjaGVkID0gdGhpcy5jYWNoZVtpbmRleF07XG4gICAgaWYgKGNhY2hlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gY2FjaGVkO1xuICAgIH1cbiAgICAvL25lZWQgdG8gY29tcHV0ZSBpdFxuICAgIC8vIGZpbmQgdGhlIHN0YXJ0aW5nIHBvaW50IHdoZXJlIHRvIHN0YXJ0IGNvdW50aW5nXG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLmZpbmRWYWxpZFN0YXJ0KGluZGV4KTtcbiAgICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgICB0aGlzLmZpbGxDYWNoZSgwLCBpbmRleCwgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZmlsbENhY2hlKHN0YXJ0ICsgMSwgaW5kZXgsIHRoaXMuY2FjaGVbc3RhcnRdICsgdGhpcy5oZWlnaHRPZihzdGFydCkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jYWNoZVtpbmRleF0hO1xuICB9XG5cbiAgcHJpdmF0ZSBmaWxsQ2FjaGUoZmlyc3Q6IG51bWJlciwgbGFzdDogbnVtYmVyLCBvZmZzZXQ6IG51bWJlciwgY2FsbGJhY2s/OiAoaW5kZXg6IG51bWJlciwga2V5OiBzdHJpbmcsIHBvczogbnVtYmVyKSA9PiB2b2lkKSB7XG4gICAgaWYgKGxhc3QgPD0gdGhpcy5sYXN0RmlsbGVkKSB7XG4gICAgICAvL2V2ZXJ5dGhpbmcgYWxyZWFkeSB0aGVyZVxuICAgICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpID0gZmlyc3Q7IGkgPD0gbGFzdDsgKytpKSB7XG4gICAgICAgIGNhbGxiYWNrKGksIHRoaXMua2V5KGkpLCB0aGlzLmNhY2hlW2ldKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHBvcyA9IG9mZnNldDtcbiAgICBmb3IgKGxldCBpID0gZmlyc3Q7IGkgPD0gbGFzdDsgKytpKSB7XG4gICAgICB0aGlzLmNhY2hlW2ldID0gcG9zO1xuICAgICAgY29uc3Qga2V5ID0gdGhpcy5rZXkoaSk7XG4gICAgICB0aGlzLmtleTJpbmRleC5zZXQoa2V5LCBpKTtcbiAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjayhpLCBrZXksIHBvcyk7XG4gICAgICB9XG4gICAgICBwb3MgKz0gdGhpcy5oZWlnaHRPZihpKTtcbiAgICB9XG4gIH1cblxuICBoZWlnaHRPZihpbmRleDogbnVtYmVyKSB7XG4gICAgY29uc3QgbG9va3VwID0gdGhpcy5jb250ZXh0LmV4Y2VwdGlvbnNMb29rdXA7XG4gICAgcmV0dXJuIGxvb2t1cC5oYXMoaW5kZXgpID8gbG9va3VwLmdldChpbmRleCkhIDogdGhpcy5jb250ZXh0LmRlZmF1bHRSb3dIZWlnaHQ7XG4gIH1cblxuICBleGNlcHRpb25IZWlnaHRPZihpbmRleDogbnVtYmVyLCByZXR1cm5EZWZhdWx0OiBib29sZWFuID0gZmFsc2UpIHtcbiAgICBjb25zdCBwYWRkaW5nID0gdGhpcy5jb250ZXh0LnBhZGRpbmcoaW5kZXgpO1xuICAgIGNvbnN0IGxvb2t1cCA9IHRoaXMuY29udGV4dC5leGNlcHRpb25zTG9va3VwO1xuICAgIGlmIChsb29rdXAuaGFzKGluZGV4KSkge1xuICAgICAgcmV0dXJuIGxvb2t1cC5nZXQoaW5kZXgpISAtIHBhZGRpbmc7XG4gICAgfVxuICAgIHJldHVybiByZXR1cm5EZWZhdWx0ID8gdGhpcy5jb250ZXh0LmRlZmF1bHRSb3dIZWlnaHQgLSBwYWRkaW5nIDogbnVsbDtcbiAgfVxuXG4gIHBhZGRpbmcoaW5kZXg6IG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHQucGFkZGluZyhpbmRleCk7XG4gIH1cblxuICBwcml2YXRlIGZpbGxDYWNoZVRpbGxLZXkodGFyZ2V0OiBzdHJpbmcpIHtcbiAgICBsZXQgcG9zID0gMDtcbiAgICBmb3IgKGxldCBpID0gdGhpcy5sYXN0RmlsbGVkOyBpIDwgdGhpcy5jb250ZXh0Lm51bWJlck9mUm93czsgKytpLCArK3RoaXMubGFzdEZpbGxlZCkge1xuICAgICAgY29uc3QgYyA9IHRoaXMuY2FjaGVbaV07XG4gICAgICBpZiAoYyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHBvcyA9IGMgKyB0aGlzLmhlaWdodE9mKGkpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIC8vIG5ldyBvbmUgZmlsbCB1cFxuICAgICAgY29uc3Qga2V5ID0gdGhpcy5rZXkoaSk7XG4gICAgICB0aGlzLmNhY2hlW2ldID0gcG9zO1xuICAgICAgdGhpcy5rZXkyaW5kZXguc2V0KGtleSwgaSk7XG4gICAgICBpZiAoa2V5ID09PSB0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIHtpbmRleDogaSwgcG9zfTtcbiAgICAgIH1cbiAgICAgIHBvcyArPSB0aGlzLmhlaWdodE9mKGkpO1xuICAgIH1cbiAgICByZXR1cm4ge2luZGV4OiAtMSwgcG9zOiAtMX07XG4gIH1cblxuICBwb3NpdGlvbnMoZmlyc3Q6IG51bWJlciwgbGFzdDogbnVtYmVyLCBvZmZzZXQ6IG51bWJlciwgY2FsbGJhY2s/OiAoaW5kZXg6IG51bWJlciwga2V5OiBzdHJpbmcsIHBvczogbnVtYmVyKSA9PiB2b2lkKSB7XG4gICAgdGhpcy5maWxsQ2FjaGUoZmlyc3QsIGxhc3QsIG9mZnNldCwgY2FsbGJhY2spO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2FuaW1hdGlvbi9LZXlGaW5kZXIudHMiXSwibWFwcGluZ3MiOiJBQUVBO0FBS0E7QUFBQTtBQUFBO0FBSkE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return EScrollResult; });\nvar EScrollResult;\r\n(function (EScrollResult) {\r\n    EScrollResult[EScrollResult[\"NONE\"] = 0] = \"NONE\";\r\n    EScrollResult[EScrollResult[\"ALL\"] = 1] = \"ALL\";\r\n    EScrollResult[EScrollResult[\"PARTIAL\"] = 2] = \"PARTIAL\";\r\n})(EScrollResult || (EScrollResult = {}));\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvbWl4aW4vSU1peGluLnRzP2Y5YzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtJRXhjZXB0aW9uQ29udGV4dH0gZnJvbSAnLi4vbG9naWMnO1xuXG4vKipcbiAqIHNjcm9sbGluZyByZXN1bHRcbiAqL1xuZXhwb3J0IGVudW0gRVNjcm9sbFJlc3VsdCB7XG4gIC8qKlxuICAgKiBub3RoaW5nIGhhcyBjaGFuZ2VkXG4gICAqL1xuICBOT05FLFxuICAvKipcbiAgICogYWxsIHJvd3MgbmVlZGVkIHRvIGJlIHJlY3JlYXRlZFxuICAgKi9cbiAgQUxMLFxuICAvKipcbiAgICogcGFydGlhbCByb3dzIG5lZWQgdG8gYmUgY3JlYXRlZFxuICAgKi9cbiAgUEFSVElBTFxufVxuXG4vKipcbiAqIGFkYXB0ZXIgY29udGV4dCBmb3IgbWl4aW5zIHRvIGF2b2lkIHB1YmxpYyBmaWVsZHNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJTWl4aW5BZGFwdGVyIHtcbiAgcmVhZG9ubHkgdmlzaWJsZToge1xuICAgIC8vd3JpdGFibGVcbiAgICBmaXJzdDogbnVtYmVyO1xuICAgIGxhc3Q6IG51bWJlcjtcbiAgICBmb3JjZWRGaXJzdDogbnVtYmVyO1xuICAgIGZvcmNlZExhc3Q6IG51bWJlcjtcbiAgfTtcbiAgcmVhZG9ubHkgdmlzaWJsZUZpcnN0Um93UG9zOiBudW1iZXI7XG5cbiAgcmVhZG9ubHkgY29udGV4dDogSUV4Y2VwdGlvbkNvbnRleHQ7XG4gIHJlYWRvbmx5IHNjcm9sbGVyOiBIVE1MRWxlbWVudDtcblxuICBhZGRBdEJlZ2lubmluZyhmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIsIGZyb3plblNoaWZ0OiBudW1iZXIpOiB2b2lkO1xuXG4gIGFkZEF0Qm90dG9tKGZyb206IG51bWJlciwgdG86IG51bWJlcik6IHZvaWQ7XG5cbiAgcmVtb3ZlRnJvbUJlZ2lubmluZyhmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIsIGZyb3plblNoaWZ0OiBudW1iZXIpOiB2b2lkO1xuXG4gIHJlbW92ZUZyb21Cb3R0b20oZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyKTogdm9pZDtcblxuICB1cGRhdGVPZmZzZXQoZmlyc3RSb3dQb3M6IG51bWJlcik6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIHRyaWdnZXJzIHRvIHN5bmMgZnJvemVuIGl0ZW1zXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBmaXJzdFxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IGZyb3plblNoaWZ0XG4gICAqL1xuICBzeW5jRnJvemVuPyhmaXJzdDogbnVtYmVyKTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElNaXhpbiB7XG4gIG9uU2Nyb2xsZWQoaXNHb2luZ0Rvd246IGJvb2xlYW4sIHNjcm9sbFJlc3VsdDogRVNjcm9sbFJlc3VsdCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSU1peGluQ2xhc3Mge1xuICBuZXcoYWRhcHRlcjogSU1peGluQWRhcHRlciwgb3B0aW9ucz86IGFueSk6IElNaXhpbjtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvbWl4aW4vSU1peGluLnRzIl0sIm1hcHBpbmdzIjoiQUFLQTtBQUFBO0FBQUE7QUFJQTtBQUlBO0FBSUE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///6\n");

/***/ }),
/* 7 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"d\"] = setTemplate;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = setColumn;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__StyleManager__ = __webpack_require__(8);\n\r\nconst TEMPLATE = `\n  <header>\n    <article></article>\n  </header>\n  <main>\n    <article></article>\n  </main>`;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = TEMPLATE;\n\r\nfunction setTemplate(root) {\r\n    root.innerHTML = TEMPLATE;\r\n    return root;\r\n}\r\nfunction setColumn(node, column) {\r\n    node.style.gridColumnStart = column.id;\r\n    node.dataset.id = column.id;\r\n}\r\nclass GridStyleManager extends __WEBPACK_IMPORTED_MODULE_0__StyleManager__[\"a\" /* default */] {\r\n    constructor(root, id) {\r\n        super(root);\r\n        this.id = id;\r\n        const headerScroller = root.querySelector('header');\r\n        const bodyScroller = root.querySelector('main');\r\n        bodyScroller.addEventListener('scroll', () => {\r\n            headerScroller.scrollLeft = bodyScroller.scrollLeft;\r\n        });\r\n    }\r\n    static columnWidths(columns, unit = 'px') {\r\n        function repeatStandard(count, width) {\r\n            return `repeat(${count}, ${width})`;\r\n        }\r\n        const repeat = repeatStandard;\r\n        let lastWidth = 0;\r\n        let count = 0;\r\n        let r = '';\r\n        columns.forEach(({ width }) => {\r\n            if (lastWidth === width) {\r\n                count++;\r\n                return;\r\n            }\r\n            if (count > 0) {\r\n                r += count === 1 ? `${lastWidth}${unit} ` : `${repeat(count, `${lastWidth}${unit}`)} `;\r\n            }\r\n            count = 1;\r\n            lastWidth = width;\r\n        });\r\n        if (count > 0) {\r\n            r += count === 1 ? `${lastWidth}${unit}` : `${repeat(count, `${lastWidth}${unit}`)}`;\r\n        }\r\n        return r;\r\n    }\r\n    static gridColumn(columns, unit = 'px') {\r\n        const widths = GridStyleManager.columnWidths(columns, unit);\r\n        return `grid-template-columns: ${widths};\n      grid-template-areas: \"${columns.map((c) => c.id).join(' ')}\";`;\r\n    }\r\n    update(defaultRowHeight, columns, padding, tableId, unit = 'px') {\r\n        const selectors = tableId !== undefined ? this.tableIds(tableId, true) : {\r\n            header: `${this.id} > header > article`,\r\n            body: `${this.id} > main > article`\r\n        };\r\n        this.updateRule(`__heightsRule${selectors.body}`, `${selectors.body} > div {\n      height: ${defaultRowHeight}px;\n    }`);\r\n        if (columns.length === 0) {\r\n            this.deleteRule(`__widthRule${selectors.body}`);\r\n            return;\r\n        }\r\n        const content = GridStyleManager.gridColumn(columns, unit);\r\n        this.updateRule(`__widthRule${selectors.body}`, `${selectors.body} > div, ${selectors.header} { ${content} }`);\r\n        this.updateFrozen(columns, selectors, padding, unit);\r\n    }\r\n    remove(tableId) {\r\n        const selectors = this.tableIds(tableId, true);\r\n        this.deleteRule(`__heightsRule${selectors.body}`);\r\n        this.deleteRule(`__widthRule${selectors.body}`);\r\n        const prefix = `__frozen${selectors.body}_`;\r\n        const rules = this.ruleNames.reduce((a, b) => a + (b.startsWith(prefix) ? 1 : 0), 0);\r\n        for (let i = 0; i < rules; ++i) {\r\n            this.deleteRule(`${prefix}${i}`);\r\n        }\r\n    }\r\n    tableIds(tableId, asSelector = false) {\r\n        const cleanId = this.id.startsWith('#') ? this.id.slice(1) : this.id;\r\n        return {\r\n            header: `${asSelector ? '#' : ''}${cleanId}_H${tableId}`,\r\n            body: `${asSelector ? '#' : ''}${cleanId}_B${tableId}`\r\n        };\r\n    }\r\n    updateFrozen(columns, selectors, _padding, unit) {\r\n        const prefix = `__frozen${selectors.body}_`;\r\n        const rules = this.ruleNames.reduce((a, b) => a + (b.startsWith(prefix) ? 1 : 0), 0);\r\n        const frozen = columns.filter((c) => c.frozen);\r\n        if (frozen.length <= 0) {\r\n            for (let i = 0; i < rules; ++i) {\r\n                this.deleteRule(`${prefix}${i}`);\r\n            }\r\n            return;\r\n        }\r\n        let offset = frozen[0].width;\r\n        frozen.slice(1).forEach((c, i) => {\r\n            const rule = `${selectors.body} > div > .frozen[data-id=\"${c.id}\"], ${selectors.header} .frozen[data-id=\"${c.id}\"] {\n        left: ${offset}${unit};\n      }`;\r\n            offset += c.width;\r\n            this.updateRule(`${prefix}${i}`, rule);\r\n        });\r\n        for (let i = frozen.length - 1; i < rules; ++i) {\r\n            this.deleteRule(`${prefix}${i}`);\r\n        }\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = GridStyleManager;\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvc3R5bGUvR3JpZFN0eWxlTWFuYWdlci50cz80NmJmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SUNvbHVtbn0gZnJvbSAnLi9JQ29sdW1uJztcbmltcG9ydCBTdHlsZU1hbmFnZXIgZnJvbSAnLi9TdHlsZU1hbmFnZXInO1xuXG5leHBvcnQgY29uc3QgVEVNUExBVEUgPSBgXG4gIDxoZWFkZXI+XG4gICAgPGFydGljbGU+PC9hcnRpY2xlPlxuICA8L2hlYWRlcj5cbiAgPG1haW4+XG4gICAgPGFydGljbGU+PC9hcnRpY2xlPlxuICA8L21haW4+YDtcblxuXG5leHBvcnQgZnVuY3Rpb24gc2V0VGVtcGxhdGUocm9vdDogSFRNTEVsZW1lbnQpIHtcbiAgcm9vdC5pbm5lckhUTUwgPSBURU1QTEFURTtcbiAgcmV0dXJuIHJvb3Q7XG59XG5cbi8qKlxuICogc2V0cyB0aGUgbmVlZGVkIGdyaWQgY29sdW1ucyBzZXR0aW5ncyBzdWNoIHRoYXQgdGhlIGdpdmVuIG5vZGUgaXMgYWxpZ25lZCB3aXRoIHRoZSBnaXZlbiBjb2x1bW5cbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGUgdGhlIGNvbHVtbiBub2RlXG4gKiBAcGFyYW0ge3tpbmRleDogbnVtYmVyOyBpZDogc3RyaW5nfX0gY29sdW1uIHRoZSBjb2x1bW4gbWV0YSBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRDb2x1bW4obm9kZTogSFRNTEVsZW1lbnQsIGNvbHVtbjogeyBpbmRleDogbnVtYmVyLCBpZDogc3RyaW5nIH0pIHtcbiAgKDxhbnk+bm9kZS5zdHlsZSkuZ3JpZENvbHVtblN0YXJ0ID0gY29sdW1uLmlkO1xuICBub2RlLmRhdGFzZXQuaWQgPSBjb2x1bW4uaWQ7XG59XG5cbmludGVyZmFjZSBJU2VsZWN0b3JzIHtcbiAgaGVhZGVyOiBzdHJpbmc7XG4gIGJvZHk6IHN0cmluZztcbn1cblxuLyoqXG4gKiB1dGlsaXR5IGZvciBjdXN0b20gZ2VuZXJhdGVkIENTUyBydWxlcyB3aXRoIGEgZm9jdXMgb24gZHluYW1pY2FsbHkgZ2VuZXJhdGVkIGdyaWQgbGF5b3V0c1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHcmlkU3R5bGVNYW5hZ2VyIGV4dGVuZHMgU3R5bGVNYW5hZ2VyIHtcblxuICBjb25zdHJ1Y3Rvcihyb290OiBIVE1MRWxlbWVudCwgcHVibGljIHJlYWRvbmx5IGlkOiBzdHJpbmcpIHtcbiAgICBzdXBlcihyb290KTtcblxuICAgIGNvbnN0IGhlYWRlclNjcm9sbGVyID0gPEhUTUxFbGVtZW50PnJvb3QucXVlcnlTZWxlY3RvcignaGVhZGVyJyk7XG4gICAgY29uc3QgYm9keVNjcm9sbGVyID0gPEhUTUxFbGVtZW50PnJvb3QucXVlcnlTZWxlY3RvcignbWFpbicpO1xuXG4gICAgLy8gdXBkYXRlIGZyb3plbiBhbmQgc3luYyBoZWFkZXIgd2l0aCBib2R5XG4gICAgYm9keVNjcm9sbGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHtcbiAgICAgIGhlYWRlclNjcm9sbGVyLnNjcm9sbExlZnQgPSBib2R5U2Nyb2xsZXIuc2Nyb2xsTGVmdDtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBjb21wdXRlcyBhIGNvbXBhdGlibGUgZ3JpZCBsYXlvdXQgcGF0dGVybiBiYXNlZCBvbiB0aGUgZ2l2ZW4gY29sdW1uc1xuICAgKiBAcGFyYW0ge3t3aWR0aDogbnVtYmVyfVtdfSBjb2x1bW5zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0XG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBjb2x1bW5XaWR0aHMoY29sdW1uczogeyB3aWR0aDogbnVtYmVyIH1bXSwgdW5pdDogc3RyaW5nID0gJ3B4Jykge1xuICAgIGZ1bmN0aW9uIHJlcGVhdFN0YW5kYXJkKGNvdW50OiBudW1iZXIsIHdpZHRoOiBzdHJpbmcpIHtcbiAgICAgIHJldHVybiBgcmVwZWF0KCR7Y291bnR9LCAke3dpZHRofSlgO1xuICAgIH1cblxuICAgIGNvbnN0IHJlcGVhdCA9IHJlcGVhdFN0YW5kYXJkO1xuXG4gICAgbGV0IGxhc3RXaWR0aCA9IDA7XG4gICAgbGV0IGNvdW50ID0gMDtcblxuICAgIGxldCByID0gJyc7XG4gICAgY29sdW1ucy5mb3JFYWNoKCh7d2lkdGh9KSA9PiB7XG4gICAgICBpZiAobGFzdFdpZHRoID09PSB3aWR0aCkge1xuICAgICAgICBjb3VudCsrO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoY291bnQgPiAwKSB7XG4gICAgICAgIHIgKz0gY291bnQgPT09IDEgPyBgJHtsYXN0V2lkdGh9JHt1bml0fSBgIDogYCR7cmVwZWF0KGNvdW50LCBgJHtsYXN0V2lkdGh9JHt1bml0fWApfSBgO1xuICAgICAgfVxuICAgICAgY291bnQgPSAxO1xuICAgICAgbGFzdFdpZHRoID0gd2lkdGg7XG4gICAgfSk7XG5cbiAgICBpZiAoY291bnQgPiAwKSB7XG4gICAgICByICs9IGNvdW50ID09PSAxID8gYCR7bGFzdFdpZHRofSR7dW5pdH1gIDogYCR7cmVwZWF0KGNvdW50LCBgJHtsYXN0V2lkdGh9JHt1bml0fWApfWA7XG4gICAgfVxuICAgIHJldHVybiByO1xuICB9XG5cbiAgc3RhdGljIGdyaWRDb2x1bW4oY29sdW1uczogeyBpZDogc3RyaW5nLCB3aWR0aDogbnVtYmVyIH1bXSwgdW5pdDogc3RyaW5nID0gJ3B4Jykge1xuICAgIGNvbnN0IHdpZHRocyA9IEdyaWRTdHlsZU1hbmFnZXIuY29sdW1uV2lkdGhzKGNvbHVtbnMsIHVuaXQpO1xuXG4gICAgcmV0dXJuIGBncmlkLXRlbXBsYXRlLWNvbHVtbnM6ICR7d2lkdGhzfTtcbiAgICAgIGdyaWQtdGVtcGxhdGUtYXJlYXM6IFwiJHtjb2x1bW5zLm1hcCgoYykgPT4gYy5pZCkuam9pbignICcpfVwiO2A7XG4gIH1cblxuICAvKipcbiAgICogdXBkYXRlcyB0aGUgY29sdW1uIHdpZHRocyBhbmQgZGVmYXVsdCByb3cgaGVpZ2h0IGZvciBhIHRhYmxlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkZWZhdWx0Um93SGVpZ2h0XG4gICAqIEBwYXJhbSB7SUNvbHVtbltdfSBjb2x1bW5zXG4gICAqIEBwYXJhbSB7KGluZGV4OiBudW1iZXIpID0+IG51bWJlcn0gcGFkZGluZyBwYWRkaW5nIGJldHdlZW4gY29sdW1uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFibGVJZCBvcHRpb25hbCB0YWJsZUlkIGluIGNhc2Ugb2YgbXVsdGlwbGUgdGFibGVzIHdpdGhpbiB0aGUgc2FtZSBlbmdpbmVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXRcbiAgICovXG4gIHVwZGF0ZShkZWZhdWx0Um93SGVpZ2h0OiBudW1iZXIsIGNvbHVtbnM6IElDb2x1bW5bXSwgcGFkZGluZzogKGluZGV4OiBudW1iZXIpID0+IG51bWJlciwgdGFibGVJZD86IHN0cmluZywgdW5pdDogc3RyaW5nID0gJ3B4Jykge1xuICAgIGNvbnN0IHNlbGVjdG9ycyA9IHRhYmxlSWQgIT09IHVuZGVmaW5lZCA/IHRoaXMudGFibGVJZHModGFibGVJZCwgdHJ1ZSkgOiB7XG4gICAgICBoZWFkZXI6IGAke3RoaXMuaWR9ID4gaGVhZGVyID4gYXJ0aWNsZWAsXG4gICAgICBib2R5OiBgJHt0aGlzLmlkfSA+IG1haW4gPiBhcnRpY2xlYFxuICAgIH07XG5cbiAgICB0aGlzLnVwZGF0ZVJ1bGUoYF9faGVpZ2h0c1J1bGUke3NlbGVjdG9ycy5ib2R5fWAsIGAke3NlbGVjdG9ycy5ib2R5fSA+IGRpdiB7XG4gICAgICBoZWlnaHQ6ICR7ZGVmYXVsdFJvd0hlaWdodH1weDtcbiAgICB9YCk7XG5cbiAgICBpZiAoY29sdW1ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vcmVzdG9yZSBkdW1teSBydWxlXG4gICAgICB0aGlzLmRlbGV0ZVJ1bGUoYF9fd2lkdGhSdWxlJHtzZWxlY3RvcnMuYm9keX1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50ID0gR3JpZFN0eWxlTWFuYWdlci5ncmlkQ29sdW1uKGNvbHVtbnMsIHVuaXQpO1xuICAgIHRoaXMudXBkYXRlUnVsZShgX193aWR0aFJ1bGUke3NlbGVjdG9ycy5ib2R5fWAsIGAke3NlbGVjdG9ycy5ib2R5fSA+IGRpdiwgJHtzZWxlY3RvcnMuaGVhZGVyfSB7ICR7Y29udGVudH0gfWApO1xuXG4gICAgdGhpcy51cGRhdGVGcm96ZW4oY29sdW1ucywgc2VsZWN0b3JzLCBwYWRkaW5nLCB1bml0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiByZW1vdmVzIGEgZ2l2ZW4gdGFibGVJZCBpZiBub3QgbmVlZGVkIGFueW1vcmVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhYmxlSWQgdGFibGVJZCB0byByZW1vdmVcbiAgICovXG4gIHJlbW92ZSh0YWJsZUlkOiBzdHJpbmcpIHtcbiAgICBjb25zdCBzZWxlY3RvcnMgPSB0aGlzLnRhYmxlSWRzKHRhYmxlSWQsIHRydWUpO1xuICAgIHRoaXMuZGVsZXRlUnVsZShgX19oZWlnaHRzUnVsZSR7c2VsZWN0b3JzLmJvZHl9YCk7XG4gICAgdGhpcy5kZWxldGVSdWxlKGBfX3dpZHRoUnVsZSR7c2VsZWN0b3JzLmJvZHl9YCk7XG5cbiAgICBjb25zdCBwcmVmaXggPSBgX19mcm96ZW4ke3NlbGVjdG9ycy5ib2R5fV9gO1xuICAgIGNvbnN0IHJ1bGVzID0gdGhpcy5ydWxlTmFtZXMucmVkdWNlKChhLCBiKSA9PiBhICsgKGIuc3RhcnRzV2l0aChwcmVmaXgpID8gMSA6IDApLCAwKTtcbiAgICAvLyByZXNldFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcnVsZXM7ICsraSkge1xuICAgICAgdGhpcy5kZWxldGVSdWxlKGAke3ByZWZpeH0ke2l9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGdlbmVyYXRlcyB0aGUgSFRNTCBJZHMgdXNlZCBmb3IgdGhlIGhlYWRlciBhbmQgYm9keSBhcnRpY2xlIG9mIGEgdGFibGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhYmxlSWQgYmFzZSB0YWJsZSBpZFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFzU2VsZWN0b3IgZmxhZyB3aGV0aGVyIHRvIHByZXBlbmQgd2l0aCAjIGZvciBDU1Mgc2VsZWN0b3JcbiAgICogQHJldHVybiB7e2hlYWRlcjogc3RyaW5nOyBib2R5OiBzdHJpbmd9fSB0aGUgdGFibGUgaWRzIHVzZWQgZm9yIGhlYWRlciBhbmQgYm9keVxuICAgKi9cbiAgdGFibGVJZHModGFibGVJZDogc3RyaW5nLCBhc1NlbGVjdG9yOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICBjb25zdCBjbGVhbklkID0gdGhpcy5pZC5zdGFydHNXaXRoKCcjJykgPyB0aGlzLmlkLnNsaWNlKDEpIDogdGhpcy5pZDtcbiAgICByZXR1cm4ge1xuICAgICAgaGVhZGVyOiBgJHthc1NlbGVjdG9yID8gJyMnIDogJyd9JHtjbGVhbklkfV9IJHt0YWJsZUlkfWAsXG4gICAgICBib2R5OiBgJHthc1NlbGVjdG9yID8gJyMnIDogJyd9JHtjbGVhbklkfV9CJHt0YWJsZUlkfWBcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVGcm96ZW4oY29sdW1uczogSUNvbHVtbltdLCBzZWxlY3RvcnM6IElTZWxlY3RvcnMsIF9wYWRkaW5nOiAoaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyLCB1bml0OiBzdHJpbmcpIHtcbiAgICBjb25zdCBwcmVmaXggPSBgX19mcm96ZW4ke3NlbGVjdG9ycy5ib2R5fV9gO1xuICAgIGNvbnN0IHJ1bGVzID0gdGhpcy5ydWxlTmFtZXMucmVkdWNlKChhLCBiKSA9PiBhICsgKGIuc3RhcnRzV2l0aChwcmVmaXgpID8gMSA6IDApLCAwKTtcbiAgICBjb25zdCBmcm96ZW4gPSBjb2x1bW5zLmZpbHRlcigoYykgPT4gYy5mcm96ZW4pO1xuICAgIGlmIChmcm96ZW4ubGVuZ3RoIDw9IDApIHtcbiAgICAgIC8vIHJlc2V0XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJ1bGVzOyArK2kpIHtcbiAgICAgICAgdGhpcy5kZWxldGVSdWxlKGAke3ByZWZpeH0ke2l9YCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vY3JlYXRlIHRoZSBjb3JyZWN0IGxlZnQgb2Zmc2V0XG4gICAgbGV0IG9mZnNldCA9IGZyb3plblswXS53aWR0aDtcbiAgICBmcm96ZW4uc2xpY2UoMSkuZm9yRWFjaCgoYywgaSkgPT4ge1xuICAgICAgY29uc3QgcnVsZSA9IGAke3NlbGVjdG9ycy5ib2R5fSA+IGRpdiA+IC5mcm96ZW5bZGF0YS1pZD1cIiR7Yy5pZH1cIl0sICR7c2VsZWN0b3JzLmhlYWRlcn0gLmZyb3plbltkYXRhLWlkPVwiJHtjLmlkfVwiXSB7XG4gICAgICAgIGxlZnQ6ICR7b2Zmc2V0fSR7dW5pdH07XG4gICAgICB9YDtcbiAgICAgIG9mZnNldCArPSBjLndpZHRoOyAvLyBpZ25vcmUgcGFkZGluZyBzaW5jZSBpdCBjYXVzZXMgcHJvYmxlbXMgcmVnYXJkaW5nIHdoaXRlIGJhY2tncm91bmQgKyBwYWRkaW5nKGkpO1xuICAgICAgdGhpcy51cGRhdGVSdWxlKGAke3ByZWZpeH0ke2l9YCwgcnVsZSk7XG4gICAgfSk7XG4gICAgZm9yIChsZXQgaSA9IGZyb3plbi5sZW5ndGggLSAxOyBpIDwgcnVsZXM7ICsraSkge1xuICAgICAgdGhpcy5kZWxldGVSdWxlKGAke3ByZWZpeH0ke2l9YCk7XG4gICAgfVxuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL3N0eWxlL0dyaWRTdHlsZU1hbmFnZXIudHMiXSwibWFwcGluZ3MiOiJBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7Ozs7OztBQU1BO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFVQTtBQUVBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///7\n");

/***/ }),
/* 8 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("class StyleManager {\r\n    constructor(root) {\r\n        this.rules = new Map();\r\n        this.node = root.ownerDocument.createElement('style');\r\n        root.appendChild(this.node);\r\n    }\r\n    destroy() {\r\n        this.node.remove();\r\n    }\r\n    recreate() {\r\n        this.node.innerHTML = Array.from(this.rules.values()).join('\\n');\r\n    }\r\n    addRule(id, rule) {\r\n        this.rules.set(id, rule);\r\n        this.recreate();\r\n        return id;\r\n    }\r\n    updateRule(id, rule) {\r\n        this.rules.set(id, rule);\r\n        this.recreate();\r\n        return id;\r\n    }\r\n    deleteRule(id) {\r\n        const r = this.rules.get(id);\r\n        if (!r) {\r\n            return;\r\n        }\r\n        this.rules.delete(id);\r\n        this.recreate();\r\n    }\r\n    get ruleNames() {\r\n        return Array.from(this.rules.keys());\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = StyleManager;\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvc3R5bGUvU3R5bGVNYW5hZ2VyLnRzPzIzNTQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IG1hbnVhbGx5IGltcG9ydCAnLi9zdHlsZS5zY3NzJztcblxuLyoqXG4gKiB1dGlsaXR5IGZvciBjdXN0b20gZ2VuZXJhdGVkIENTUyBydWxlc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdHlsZU1hbmFnZXIge1xuICBwcml2YXRlIHJlYWRvbmx5IHJ1bGVzID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcbiAgcHJpdmF0ZSByZWFkb25seSBub2RlOiBIVE1MU3R5bGVFbGVtZW50O1xuXG4gIC8qKlxuICAgKiB0aGUgcGFyZW50IGVsZW1lbnQgdG8gYXBwZW5kIHRoaXMgbWFuYWdlZCBzdHlsZVxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSByb290XG4gICAqL1xuICBjb25zdHJ1Y3Rvcihyb290OiBIVE1MRWxlbWVudCkge1xuICAgIHRoaXMubm9kZSA9IHJvb3Qub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHJvb3QuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5ub2RlLnJlbW92ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWNyZWF0ZSgpIHtcbiAgICB0aGlzLm5vZGUuaW5uZXJIVE1MID0gQXJyYXkuZnJvbSh0aGlzLnJ1bGVzLnZhbHVlcygpKS5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBhZGQgYSBjdXN0b20gY3NzIHJ1bGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIHVuaXF1ZSBpZCBvZiB0aGUgcnVsZSBmb3IgbGF0ZXIgaWRlbnRpZmljYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJ1bGUgdGhlIGNzcyBydWxlIGl0c2VsZlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgaWQgYWdhaW5cbiAgICovXG4gIGFkZFJ1bGUoaWQ6IHN0cmluZywgcnVsZTogc3RyaW5nKSB7XG4gICAgLy8gYXBwZW5kXG4gICAgdGhpcy5ydWxlcy5zZXQoaWQsIHJ1bGUpO1xuICAgIHRoaXMucmVjcmVhdGUoKTtcbiAgICByZXR1cm4gaWQ7XG4gIH1cblxuICAvKipcbiAgICogdXBkYXRlcyBvciBhZGQgYSBydWxlLCBzZWUgQGFkZFJ1bGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIHVuaXF1ZSBpZCBvZiB0aGUgcnVsZSBmb3IgbGF0ZXIgaWRlbnRpZmljYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJ1bGUgdGhlIGNzcyBydWxlIGl0c2VsZlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgaWQgYWdhaW5cbiAgICovXG4gIHVwZGF0ZVJ1bGUoaWQ6IHN0cmluZywgcnVsZTogc3RyaW5nKSB7XG4gICAgdGhpcy5ydWxlcy5zZXQoaWQsIHJ1bGUpO1xuICAgIHRoaXMucmVjcmVhdGUoKTtcbiAgICByZXR1cm4gaWQ7XG4gIH1cblxuICAvKipcbiAgICogZGVsZXRlcyB0aGUgZ2l2ZW4gcnVsZSBieSBpZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgdGhlIHJ1bGUgdG8gZGVsZXRlXG4gICAqL1xuICBkZWxldGVSdWxlKGlkOiBzdHJpbmcpIHtcbiAgICBjb25zdCByID0gdGhpcy5ydWxlcy5nZXQoaWQpO1xuICAgIGlmICghcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnJ1bGVzLmRlbGV0ZShpZCk7XG4gICAgdGhpcy5yZWNyZWF0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIGdldCBhIGxpc3Qgb2YgYWxsIHJlZ2lzdGVyZWQgcnVsZSBpZHNcbiAgICogQHJldHVybnMge3N0cmluZ1tdfVxuICAgKi9cbiAgcHJvdGVjdGVkIGdldCBydWxlTmFtZXMoKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5ydWxlcy5rZXlzKCkpO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL3N0eWxlL1N0eWxlTWFuYWdlci50cyJdLCJtYXBwaW5ncyI6IkFBS0E7QUFRQTtBQVBBO0FBUUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBUUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8\n");

/***/ }),
/* 9 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__logic__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mixin__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__style_GridStyleManager__ = __webpack_require__(7);\n\r\n\r\n\r\nconst debug = false;\r\nclass ACellAdapter {\r\n    constructor(header, style, tableId, ...mixinClasses) {\r\n        this.header = header;\r\n        this.style = style;\r\n        this.tableId = tableId;\r\n        this.cellPool = [];\r\n        this.visibleColumns = {\r\n            frozen: [],\r\n            first: 0,\r\n            forcedFirst: 0,\r\n            last: -1,\r\n            forcedLast: -1\r\n        };\r\n        this.visibleFirstColumnPos = 0;\r\n        this.columnAdapter = this.createColumnAdapter();\r\n        this.columnMixins = mixinClasses.map((mixinClass) => new mixinClass(this.columnAdapter));\r\n        this.columnFragment = header.ownerDocument.createDocumentFragment();\r\n    }\r\n    get headerScroller() {\r\n        return this.header.parentElement;\r\n    }\r\n    addColumnMixin(mixinClass, options) {\r\n        this.columnMixins.push(new mixinClass(this.columnAdapter, options));\r\n    }\r\n    createColumnAdapter() {\r\n        const r = {\r\n            visible: this.visibleColumns,\r\n            addAtBeginning: this.addColumnAtStart.bind(this),\r\n            addAtBottom: this.addColumnAtEnd.bind(this),\r\n            removeFromBeginning: this.removeColumnFromStart.bind(this),\r\n            removeFromBottom: this.removeColumnFromEnd.bind(this),\r\n            updateOffset: this.updateColumnOffset.bind(this),\r\n            scroller: this.headerScroller,\r\n            syncFrozen: this.syncFrozen.bind(this)\r\n        };\r\n        Object.defineProperties(r, {\r\n            visibleFirstRowPos: {\r\n                get: () => this.visibleFirstColumnPos,\r\n                enumerable: true\r\n            },\r\n            context: {\r\n                get: () => this.context.column,\r\n                enumerable: true\r\n            },\r\n        });\r\n        return r;\r\n    }\r\n    init() {\r\n        const context = this.context;\r\n        this.style.update(context.defaultRowHeight - context.padding(-1), context.columns, context.column.padding, this.tableId);\r\n        context.columns.forEach(() => {\r\n            this.cellPool.push([]);\r\n        });\r\n    }\r\n    onScrolledHorizontally(scrollLeft, clientWidth, isGoingRight) {\r\n        const scrollResult = this.onScrolledHorizontallyImpl(scrollLeft, clientWidth);\r\n        this.columnMixins.forEach((mixin) => mixin.onScrolled(isGoingRight, scrollResult));\r\n        return scrollResult;\r\n    }\r\n    removeColumnFromStart(from, to, frozenShift = this.visibleColumns.frozen.length) {\r\n        this.forEachRow((row) => {\r\n            this.removeCellFromStart(row, from, to, frozenShift);\r\n        });\r\n        if (debug) {\r\n            this.verifyRows();\r\n        }\r\n    }\r\n    removeCellFromStart(row, from, to, frozenShift) {\r\n        for (let i = from; i <= to; ++i) {\r\n            const node = (frozenShift === 0 ? row.firstElementChild : row.children[frozenShift]);\r\n            node.remove();\r\n            this.recycleCell(node, i);\r\n        }\r\n        if (debug) {\r\n            verifyRow(row, -1, this.context.columns);\r\n        }\r\n    }\r\n    removeColumnFromEnd(from, to) {\r\n        this.forEachRow((row) => {\r\n            this.removeCellFromEnd(row, from, to);\r\n        });\r\n        if (debug) {\r\n            this.verifyRows();\r\n        }\r\n    }\r\n    removeCellFromEnd(row, from, to) {\r\n        for (let i = to; i >= from; --i) {\r\n            const node = row.lastElementChild;\r\n            node.remove();\r\n            this.recycleCell(node, i);\r\n        }\r\n        if (debug) {\r\n            verifyRow(row, -1, this.context.columns);\r\n        }\r\n    }\r\n    removeFrozenCells(row, columnIndices, shift) {\r\n        for (const columnIndex of columnIndices) {\r\n            const node = row.children[shift];\r\n            node.remove();\r\n            this.recycleCell(node, columnIndex);\r\n        }\r\n        if (debug) {\r\n            verifyRow(row, -1, this.context.columns);\r\n        }\r\n    }\r\n    removeFrozenColumns(columnIndices, shift) {\r\n        this.forEachRow((row) => {\r\n            this.removeFrozenCells(row, columnIndices, shift);\r\n        });\r\n        if (debug) {\r\n            this.verifyRows();\r\n        }\r\n    }\r\n    removeAllColumns(includingFrozen) {\r\n        this.forEachRow((row) => {\r\n            this.removeAllCells(row, includingFrozen);\r\n        });\r\n        if (debug) {\r\n            this.verifyRows();\r\n        }\r\n    }\r\n    removeAllCells(row, includingFrozen, shift = this.visibleColumns.first) {\r\n        const arr = Array.from(row.children);\r\n        const frozen = this.visibleColumns.frozen;\r\n        row.innerHTML = '';\r\n        if (includingFrozen || frozen.length === 0) {\r\n            for (const i of frozen) {\r\n                this.recycleCell(arr.shift(), i);\r\n            }\r\n        }\r\n        else {\r\n            for (const _ of frozen) {\r\n                row.appendChild(arr.shift());\r\n            }\r\n        }\r\n        arr.forEach((item, i) => {\r\n            this.recycleCell(item, i + shift);\r\n        });\r\n        if (debug) {\r\n            verifyRow(row, -1, this.context.columns);\r\n        }\r\n    }\r\n    selectCell(row, column, columns) {\r\n        const pool = this.cellPool[column];\r\n        const columnObj = columns[column];\r\n        if (pool.length > 0) {\r\n            const item = pool.pop();\r\n            const r = this.updateCell(item, row, columnObj);\r\n            if (r && r !== item) {\r\n                Object(__WEBPACK_IMPORTED_MODULE_2__style_GridStyleManager__[\"c\" /* setColumn */])(r, columnObj);\r\n            }\r\n            return r ? r : item;\r\n        }\r\n        const r = this.createCell(this.header.ownerDocument, row, columnObj);\r\n        Object(__WEBPACK_IMPORTED_MODULE_2__style_GridStyleManager__[\"c\" /* setColumn */])(r, columnObj);\r\n        return r;\r\n    }\r\n    recycleCell(item, column) {\r\n        this.cellPool[column].push(item);\r\n    }\r\n    addColumnAtStart(from, to, frozenShift = this.visibleColumns.frozen.length) {\r\n        const { columns } = this.context;\r\n        this.forEachRow((row, rowIndex) => {\r\n            this.addCellAtStart(row, rowIndex, from, to, frozenShift, columns);\r\n        });\r\n        if (debug) {\r\n            this.verifyRows();\r\n        }\r\n    }\r\n    addCellAtStart(row, rowIndex, from, to, frozenShift, columns) {\r\n        if (debug) {\r\n            verifyRow(row, rowIndex, this.context.columns);\r\n        }\r\n        for (let i = to; i >= from; --i) {\r\n            const cell = this.selectCell(rowIndex, i, columns);\r\n            row.insertBefore(cell, frozenShift > 0 ? row.children[frozenShift] : row.firstChild);\r\n        }\r\n        if (debug) {\r\n            verifyRow(row, rowIndex, this.context.columns);\r\n        }\r\n    }\r\n    insertFrozenCells(row, rowIndex, columnIndices, shift, columns) {\r\n        const before = row.children[shift];\r\n        for (const i of columnIndices) {\r\n            const cell = this.selectCell(rowIndex, i, columns);\r\n            if (before) {\r\n                row.insertBefore(cell, before);\r\n            }\r\n            else {\r\n                row.appendChild(cell);\r\n            }\r\n        }\r\n    }\r\n    insertFrozenColumns(columnIndices, shift) {\r\n        const { columns } = this.context;\r\n        this.forEachRow((row, rowIndex) => {\r\n            this.insertFrozenCells(row, rowIndex, columnIndices, shift, columns);\r\n        });\r\n    }\r\n    addColumnAtEnd(from, to) {\r\n        const { columns } = this.context;\r\n        this.forEachRow((row, rowIndex) => {\r\n            this.addCellAtEnd(row, rowIndex, from, to, columns);\r\n        });\r\n        if (debug) {\r\n            this.verifyRows();\r\n        }\r\n    }\r\n    verifyRows() {\r\n        const { columns } = this.context;\r\n        this.forEachRow((row, rowIndex) => verifyRow(row, rowIndex, columns));\r\n    }\r\n    addCellAtEnd(row, rowIndex, from, to, columns) {\r\n        for (let i = from; i <= to; ++i) {\r\n            const cell = this.selectCell(rowIndex, i, columns);\r\n            row.appendChild(cell);\r\n        }\r\n        if (debug) {\r\n            verifyRow(row, rowIndex, this.context.columns);\r\n        }\r\n    }\r\n    updateHeaders() {\r\n        const { columns } = this.context;\r\n        Array.from(this.header.children).forEach((node, i) => {\r\n            this.updateHeader(node, columns[i]);\r\n        });\r\n    }\r\n    recreate(left, width) {\r\n        const context = this.context;\r\n        if (context.hasFrozenColumns === undefined) {\r\n            context.hasFrozenColumns = context.columns.some((c) => c.frozen);\r\n        }\r\n        this.style.update(context.defaultRowHeight - context.padding(-1), context.columns, context.column.padding, this.tableId);\r\n        this.clearPool();\r\n        for (let i = this.cellPool.length; i < context.columns.length; ++i) {\r\n            this.cellPool.push([]);\r\n        }\r\n        {\r\n            const fragment = this.columnFragment;\r\n            const document = fragment.ownerDocument;\r\n            this.header.innerHTML = '';\r\n            context.columns.forEach((col) => {\r\n                const n = this.createHeader(document, col);\r\n                Object(__WEBPACK_IMPORTED_MODULE_2__style_GridStyleManager__[\"c\" /* setColumn */])(n, col);\r\n                fragment.appendChild(n);\r\n            });\r\n            this.header.appendChild(fragment);\r\n        }\r\n        const { first, last, firstRowPos } = Object(__WEBPACK_IMPORTED_MODULE_0__logic__[\"d\" /* range */])(left, width, context.column.defaultRowHeight, context.column.exceptions, context.column.numberOfRows);\r\n        this.visibleColumns.first = this.visibleColumns.forcedFirst = first;\r\n        this.visibleColumns.last = this.visibleColumns.forcedLast = last;\r\n        if (context.hasFrozenColumns) {\r\n            const { target } = Object(__WEBPACK_IMPORTED_MODULE_0__logic__[\"f\" /* updateFrozen */])([], context.columns, first);\r\n            this.visibleColumns.frozen = target;\r\n        }\r\n        this.updateColumnOffset(firstRowPos);\r\n    }\r\n    clearPool() {\r\n        this.cellPool.forEach((p) => p.splice(0, p.length));\r\n    }\r\n    updateColumnOffset(firstColumnPos) {\r\n        this.visibleFirstColumnPos = firstColumnPos;\r\n    }\r\n    createRow(node, rowIndex) {\r\n        const { columns, hasFrozenColumns } = this.context;\r\n        const visible = this.visibleColumns;\r\n        if (hasFrozenColumns) {\r\n            for (const i of visible.frozen) {\r\n                const cell = this.selectCell(rowIndex, i, columns);\r\n                node.appendChild(cell);\r\n            }\r\n        }\r\n        for (let i = visible.first; i <= visible.last; ++i) {\r\n            const cell = this.selectCell(rowIndex, i, columns);\r\n            node.appendChild(cell);\r\n        }\r\n    }\r\n    updateRow(node, rowIndex) {\r\n        const { columns, hasFrozenColumns } = this.context;\r\n        const visible = this.visibleColumns;\r\n        const existing = Array.from(node.children);\r\n        switch (existing.length) {\r\n            case 0:\r\n                if (hasFrozenColumns) {\r\n                    this.insertFrozenCells(node, rowIndex, visible.frozen, 0, columns);\r\n                }\r\n                this.addCellAtEnd(node, rowIndex, visible.first, visible.last, columns);\r\n                break;\r\n            case 1:\r\n                const old = existing[0];\r\n                const id = old.dataset.id;\r\n                const columnIndex = columns.findIndex((c) => c.id === id);\r\n                node.removeChild(old);\r\n                this.recycleCell(old, columnIndex);\r\n                if (hasFrozenColumns) {\r\n                    this.insertFrozenCells(node, rowIndex, visible.frozen, 0, columns);\r\n                }\r\n                this.addCellAtEnd(node, rowIndex, visible.first, visible.last, columns);\r\n                break;\r\n            default:\r\n                if (hasFrozenColumns) {\r\n                    const currentFrozen = [];\r\n                    for (const node of existing) {\r\n                        const id = node.dataset.id;\r\n                        const col = columns.findIndex((c) => c.id === id);\r\n                        if (columns[col].frozen) {\r\n                            currentFrozen.push(col);\r\n                        }\r\n                        else {\r\n                            break;\r\n                        }\r\n                    }\r\n                    const { common, removed, added } = Object(__WEBPACK_IMPORTED_MODULE_0__logic__[\"a\" /* frozenDelta */])(currentFrozen, visible.frozen);\r\n                    existing.slice(0, common).forEach((child, i) => {\r\n                        const col = columns[currentFrozen[i]];\r\n                        const cell = this.updateCell(child, rowIndex, col);\r\n                        if (cell && cell !== child) {\r\n                            Object(__WEBPACK_IMPORTED_MODULE_2__style_GridStyleManager__[\"c\" /* setColumn */])(cell, col);\r\n                            node.replaceChild(cell, child);\r\n                        }\r\n                    });\r\n                    this.removeFrozenCells(node, removed, common);\r\n                    this.insertFrozenCells(node, rowIndex, added, common, columns);\r\n                    existing.splice(0, currentFrozen.length);\r\n                }\r\n                if (existing.length === 0) {\r\n                    break;\r\n                }\r\n                const firstId = existing[0].dataset.id;\r\n                const lastId = existing[existing.length - 1].dataset.id;\r\n                const firstIndex = columns.findIndex((c) => c.id === firstId);\r\n                const lastIndex = columns.findIndex((c) => c.id === lastId);\r\n                const frozenShift = visible.frozen.length;\r\n                if (firstIndex === visible.first && lastIndex === visible.last) {\r\n                    existing.forEach((child, i) => {\r\n                        const col = columns[i + visible.first];\r\n                        const cell = this.updateCell(child, rowIndex, col);\r\n                        if (cell && cell !== child) {\r\n                            Object(__WEBPACK_IMPORTED_MODULE_2__style_GridStyleManager__[\"c\" /* setColumn */])(cell, col);\r\n                            node.replaceChild(cell, child);\r\n                        }\r\n                    });\r\n                }\r\n                else if (visible.last > firstIndex || visible.first < lastIndex) {\r\n                    this.removeAllCells(node, false, firstIndex);\r\n                    this.addCellAtStart(node, rowIndex, visible.first, visible.last, frozenShift, columns);\r\n                }\r\n                else if (visible.first < firstIndex) {\r\n                    this.removeCellFromEnd(node, visible.last + 1, firstIndex);\r\n                    this.addCellAtStart(node, rowIndex, visible.first, firstIndex - 1, frozenShift, columns);\r\n                }\r\n                else {\r\n                    this.removeCellFromStart(node, firstIndex, visible.first - 1, frozenShift);\r\n                    this.addCellAtEnd(node, rowIndex, lastIndex + 1, visible.last, columns);\r\n                }\r\n        }\r\n    }\r\n    syncFrozen(first) {\r\n        const { columns, hasFrozenColumns } = this.context;\r\n        const visible = this.visibleColumns;\r\n        if (!hasFrozenColumns) {\r\n            return 0;\r\n        }\r\n        if (first === 0) {\r\n            if (visible.frozen.length > 0) {\r\n                this.removeFrozenColumns(visible.frozen, 0);\r\n                visible.frozen = [];\r\n            }\r\n            return 0;\r\n        }\r\n        const old = visible.frozen.length;\r\n        const { target, added, removed } = Object(__WEBPACK_IMPORTED_MODULE_0__logic__[\"f\" /* updateFrozen */])(visible.frozen, columns, first);\r\n        if (removed.length > 0) {\r\n            this.removeFrozenColumns(removed, old - removed.length);\r\n        }\r\n        if (added.length > 0) {\r\n            this.insertFrozenColumns(added, old - removed.length);\r\n        }\r\n        visible.frozen = target;\r\n        return target.length;\r\n    }\r\n    onScrolledHorizontallyImpl(scrollLeft, clientWidth) {\r\n        const { column } = this.context;\r\n        const { first, last, firstRowPos } = Object(__WEBPACK_IMPORTED_MODULE_0__logic__[\"d\" /* range */])(scrollLeft, clientWidth, column.defaultRowHeight, column.exceptions, column.numberOfRows);\r\n        const visible = this.visibleColumns;\r\n        visible.forcedFirst = first;\r\n        visible.forcedLast = last;\r\n        if ((first - visible.first) >= 0 && (last - visible.last) <= 0) {\r\n            return __WEBPACK_IMPORTED_MODULE_1__mixin__[\"a\" /* EScrollResult */].NONE;\r\n        }\r\n        let r = __WEBPACK_IMPORTED_MODULE_1__mixin__[\"a\" /* EScrollResult */].PARTIAL;\r\n        const frozenShift = this.syncFrozen(first);\r\n        if (first > visible.last || last < visible.first) {\r\n            this.removeAllColumns(false);\r\n            this.addColumnAtEnd(first, last);\r\n            r = __WEBPACK_IMPORTED_MODULE_1__mixin__[\"a\" /* EScrollResult */].ALL;\r\n        }\r\n        else if (first < visible.first) {\r\n            this.removeColumnFromEnd(last + 1, visible.last);\r\n            this.addColumnAtStart(first, visible.first - 1, frozenShift);\r\n        }\r\n        else {\r\n            this.removeColumnFromStart(visible.first, first - 1, frozenShift);\r\n            this.addColumnAtEnd(visible.last + 1, last);\r\n        }\r\n        visible.first = first;\r\n        visible.last = last;\r\n        this.updateColumnOffset(firstRowPos);\r\n        return r;\r\n    }\r\n}\n/* unused harmony export ACellAdapter */\n\r\n/* harmony default export */ __webpack_exports__[\"a\"] = (ACellAdapter);\r\nfunction verifyRow(row, index, columns) {\r\n    const cols = Array.from(row.children);\r\n    if (cols.length <= 1) {\r\n        return;\r\n    }\r\n    const colObjs = cols.map((c) => columns.find((d) => d.id === c.dataset.id));\r\n    console.assert(colObjs.every((d) => Boolean(d)), 'all columns must exist', index);\r\n    console.assert(colObjs.every((d, i) => i === 0 || d.index >= colObjs[i - 1].index), 'all columns in ascending order', index);\r\n    console.assert((new Set(colObjs)).size === colObjs.length, 'unique columns', colObjs);\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvdGFibGUvaW50ZXJuYWwvQUNlbGxBZGFwdGVyLnRzPzNlZjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtmcm96ZW5EZWx0YSwgSUV4Y2VwdGlvbkNvbnRleHQsIHJhbmdlLCB1cGRhdGVGcm96ZW59IGZyb20gJy4uLy4uL2xvZ2ljJztcbmltcG9ydCB7RVNjcm9sbFJlc3VsdCwgSU1peGluLCBJTWl4aW5BZGFwdGVyLCBJTWl4aW5DbGFzc30gZnJvbSAnLi4vLi4vbWl4aW4nO1xuaW1wb3J0IEdyaWRTdHlsZU1hbmFnZXIsIHtzZXRDb2x1bW59IGZyb20gJy4uLy4uL3N0eWxlL0dyaWRTdHlsZU1hbmFnZXInO1xuaW1wb3J0IHtJQ29sdW1ufSBmcm9tICcuLi8uLi9zdHlsZSc7XG5cbmNvbnN0IGRlYnVnID0gZmFsc2U7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNlbGxBZGFwdGVyUmVuZGVyQ29udGV4dDxUIGV4dGVuZHMgSUNvbHVtbj4gZXh0ZW5kcyBJRXhjZXB0aW9uQ29udGV4dCB7XG4gIHJlYWRvbmx5IGNvbHVtbjogSUV4Y2VwdGlvbkNvbnRleHQ7XG4gIHJlYWRvbmx5IGNvbHVtbnM6IFRbXTtcbiAgaGFzRnJvemVuQ29sdW1ucz86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBQ2VsbEFkYXB0ZXI8VCBleHRlbmRzIElDb2x1bW4+IHtcbiAgLyoqXG4gICAqIHBvb2wgb2YgY2VsbHMgcGVyIGNvbHVtblxuICAgKiBAdHlwZSB7QXJyYXl9XG4gICAqL1xuICBwcml2YXRlIHJlYWRvbmx5IGNlbGxQb29sOiBIVE1MRWxlbWVudFtdW10gPSBbXTtcblxuICBwcm90ZWN0ZWQgcmVhZG9ubHkgdmlzaWJsZUNvbHVtbnMgPSB7XG4gICAgZnJvemVuOiA8bnVtYmVyW10+W10sXG4gICAgZmlyc3Q6IDAsXG4gICAgZm9yY2VkRmlyc3Q6IDAsXG4gICAgbGFzdDogLTEsXG4gICAgZm9yY2VkTGFzdDogLTFcbiAgfTtcbiAgcHJvdGVjdGVkIHZpc2libGVGaXJzdENvbHVtblBvcyA9IDA7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBjb2x1bW5BZGFwdGVyOiBJTWl4aW5BZGFwdGVyO1xuICBwcml2YXRlIHJlYWRvbmx5IGNvbHVtbk1peGluczogSU1peGluW107XG5cbiAgcHJpdmF0ZSByZWFkb25seSBjb2x1bW5GcmFnbWVudDogRG9jdW1lbnRGcmFnbWVudDtcblxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgcmVhZG9ubHkgaGVhZGVyOiBIVE1MRWxlbWVudCwgcHJvdGVjdGVkIHJlYWRvbmx5IHN0eWxlOiBHcmlkU3R5bGVNYW5hZ2VyLCBwcml2YXRlIHJlYWRvbmx5IHRhYmxlSWQ/OiBzdHJpbmcsIC4uLm1peGluQ2xhc3NlczogSU1peGluQ2xhc3NbXSkge1xuXG4gICAgdGhpcy5jb2x1bW5BZGFwdGVyID0gdGhpcy5jcmVhdGVDb2x1bW5BZGFwdGVyKCk7XG4gICAgdGhpcy5jb2x1bW5NaXhpbnMgPSBtaXhpbkNsYXNzZXMubWFwKChtaXhpbkNsYXNzKSA9PiBuZXcgbWl4aW5DbGFzcyh0aGlzLmNvbHVtbkFkYXB0ZXIpKTtcblxuICAgIHRoaXMuY29sdW1uRnJhZ21lbnQgPSBoZWFkZXIub3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0IGhlYWRlclNjcm9sbGVyKCkge1xuICAgIHJldHVybiA8SFRNTEVsZW1lbnQ+dGhpcy5oZWFkZXIucGFyZW50RWxlbWVudCE7XG4gIH1cblxuICBhZGRDb2x1bW5NaXhpbihtaXhpbkNsYXNzOiBJTWl4aW5DbGFzcywgb3B0aW9ucz86IGFueSkge1xuICAgIHRoaXMuY29sdW1uTWl4aW5zLnB1c2gobmV3IG1peGluQ2xhc3ModGhpcy5jb2x1bW5BZGFwdGVyLCBvcHRpb25zKSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUNvbHVtbkFkYXB0ZXIoKTogSU1peGluQWRhcHRlciB7XG4gICAgY29uc3QgcjogYW55ID0ge1xuICAgICAgdmlzaWJsZTogdGhpcy52aXNpYmxlQ29sdW1ucyxcbiAgICAgIGFkZEF0QmVnaW5uaW5nOiB0aGlzLmFkZENvbHVtbkF0U3RhcnQuYmluZCh0aGlzKSxcbiAgICAgIGFkZEF0Qm90dG9tOiB0aGlzLmFkZENvbHVtbkF0RW5kLmJpbmQodGhpcyksXG4gICAgICByZW1vdmVGcm9tQmVnaW5uaW5nOiB0aGlzLnJlbW92ZUNvbHVtbkZyb21TdGFydC5iaW5kKHRoaXMpLFxuICAgICAgcmVtb3ZlRnJvbUJvdHRvbTogdGhpcy5yZW1vdmVDb2x1bW5Gcm9tRW5kLmJpbmQodGhpcyksXG4gICAgICB1cGRhdGVPZmZzZXQ6IHRoaXMudXBkYXRlQ29sdW1uT2Zmc2V0LmJpbmQodGhpcyksXG4gICAgICBzY3JvbGxlcjogdGhpcy5oZWFkZXJTY3JvbGxlcixcbiAgICAgIHN5bmNGcm96ZW46IHRoaXMuc3luY0Zyb3plbi5iaW5kKHRoaXMpXG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhyLCB7XG4gICAgICB2aXNpYmxlRmlyc3RSb3dQb3M6IHtcbiAgICAgICAgZ2V0OiAoKSA9PiB0aGlzLnZpc2libGVGaXJzdENvbHVtblBvcyxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgfSxcbiAgICAgIGNvbnRleHQ6IHtcbiAgICAgICAgZ2V0OiAoKSA9PiB0aGlzLmNvbnRleHQuY29sdW1uLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiByO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgIHRoaXMuc3R5bGUudXBkYXRlKGNvbnRleHQuZGVmYXVsdFJvd0hlaWdodCAtIGNvbnRleHQucGFkZGluZygtMSksIGNvbnRleHQuY29sdW1ucywgY29udGV4dC5jb2x1bW4ucGFkZGluZywgdGhpcy50YWJsZUlkKTtcblxuICAgIGNvbnRleHQuY29sdW1ucy5mb3JFYWNoKCgpID0+IHtcbiAgICAgIC8vaW5pdCBwb29sXG4gICAgICB0aGlzLmNlbGxQb29sLnB1c2goW10pO1xuICAgIH0pO1xuICB9XG5cbiAgb25TY3JvbGxlZEhvcml6b250YWxseShzY3JvbGxMZWZ0OiBudW1iZXIsIGNsaWVudFdpZHRoOiBudW1iZXIsIGlzR29pbmdSaWdodDogYm9vbGVhbikge1xuICAgIGNvbnN0IHNjcm9sbFJlc3VsdCA9IHRoaXMub25TY3JvbGxlZEhvcml6b250YWxseUltcGwoc2Nyb2xsTGVmdCwgY2xpZW50V2lkdGgpO1xuICAgIHRoaXMuY29sdW1uTWl4aW5zLmZvckVhY2goKG1peGluKSA9PiBtaXhpbi5vblNjcm9sbGVkKGlzR29pbmdSaWdodCwgc2Nyb2xsUmVzdWx0KSk7XG4gICAgcmV0dXJuIHNjcm9sbFJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiB0aGUgY3VycmVudCByZW5kZXIgY29udGV4dCwgdXBvbiBjaGFuZ2UgYHJlY3JlYXRlYCB0aGUgd2hvbGUgdGFibGVcbiAgICogQHJldHVybnMge0lDZWxsUmVuZGVyQ29udGV4dH1cbiAgICovXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBnZXQgY29udGV4dCgpOiBJQ2VsbEFkYXB0ZXJSZW5kZXJDb250ZXh0PFQ+O1xuXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBjcmVhdGVIZWFkZXIoZG9jdW1lbnQ6IERvY3VtZW50LCBjb2x1bW46IFQpOiBIVE1MRWxlbWVudDtcblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgdXBkYXRlSGVhZGVyKG5vZGU6IEhUTUxFbGVtZW50LCBjb2x1bW46IFQpOiBIVE1MRWxlbWVudCB8IHZvaWQ7XG5cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGNyZWF0ZUNlbGwoZG9jdW1lbnQ6IERvY3VtZW50LCBpbmRleDogbnVtYmVyLCBjb2x1bW46IFQpOiBIVE1MRWxlbWVudDtcblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgdXBkYXRlQ2VsbChub2RlOiBIVE1MRWxlbWVudCwgaW5kZXg6IG51bWJlciwgY29sdW1uOiBUKTogSFRNTEVsZW1lbnQgfCB2b2lkO1xuXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBmb3JFYWNoUm93KGNhbGxiYWNrOiAocm93OiBIVE1MRWxlbWVudCwgcm93SW5kZXg6IG51bWJlcikgPT4gdm9pZCk6IHZvaWQ7XG5cbiAgcHJpdmF0ZSByZW1vdmVDb2x1bW5Gcm9tU3RhcnQoZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyLCBmcm96ZW5TaGlmdDogbnVtYmVyID0gdGhpcy52aXNpYmxlQ29sdW1ucy5mcm96ZW4ubGVuZ3RoKSB7XG4gICAgdGhpcy5mb3JFYWNoUm93KChyb3c6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLnJlbW92ZUNlbGxGcm9tU3RhcnQocm93LCBmcm9tLCB0bywgZnJvemVuU2hpZnQpO1xuICAgIH0pO1xuICAgIGlmIChkZWJ1Zykge1xuICAgICAgdGhpcy52ZXJpZnlSb3dzKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW1vdmVDZWxsRnJvbVN0YXJ0KHJvdzogSFRNTEVsZW1lbnQsIGZyb206IG51bWJlciwgdG86IG51bWJlciwgZnJvemVuU2hpZnQ6IG51bWJlcikge1xuICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDw9IHRvOyArK2kpIHtcbiAgICAgIGNvbnN0IG5vZGUgPSA8SFRNTEVsZW1lbnQ+KGZyb3plblNoaWZ0ID09PSAwID8gcm93LmZpcnN0RWxlbWVudENoaWxkIDogcm93LmNoaWxkcmVuW2Zyb3plblNoaWZ0XSk7XG4gICAgICBub2RlLnJlbW92ZSgpO1xuICAgICAgdGhpcy5yZWN5Y2xlQ2VsbChub2RlLCBpKTtcbiAgICB9XG4gICAgaWYgKGRlYnVnKSB7XG4gICAgICB2ZXJpZnlSb3cocm93LCAtMSwgdGhpcy5jb250ZXh0LmNvbHVtbnMpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlQ29sdW1uRnJvbUVuZChmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIpIHtcbiAgICB0aGlzLmZvckVhY2hSb3coKHJvdzogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMucmVtb3ZlQ2VsbEZyb21FbmQocm93LCBmcm9tLCB0byk7XG4gICAgfSk7XG4gICAgaWYgKGRlYnVnKSB7XG4gICAgICB0aGlzLnZlcmlmeVJvd3MoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbW92ZUNlbGxGcm9tRW5kKHJvdzogSFRNTEVsZW1lbnQsIGZyb206IG51bWJlciwgdG86IG51bWJlcikge1xuICAgIGZvciAobGV0IGkgPSB0bzsgaSA+PSBmcm9tOyAtLWkpIHtcbiAgICAgIGNvbnN0IG5vZGUgPSA8SFRNTEVsZW1lbnQ+cm93Lmxhc3RFbGVtZW50Q2hpbGQ7XG4gICAgICBub2RlLnJlbW92ZSgpO1xuICAgICAgdGhpcy5yZWN5Y2xlQ2VsbChub2RlLCBpKTtcbiAgICB9XG4gICAgaWYgKGRlYnVnKSB7XG4gICAgICB2ZXJpZnlSb3cocm93LCAtMSwgdGhpcy5jb250ZXh0LmNvbHVtbnMpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlRnJvemVuQ2VsbHMocm93OiBIVE1MRWxlbWVudCwgY29sdW1uSW5kaWNlczogbnVtYmVyW10sIHNoaWZ0OiBudW1iZXIpIHtcbiAgICBmb3IgKGNvbnN0IGNvbHVtbkluZGV4IG9mIGNvbHVtbkluZGljZXMpIHtcbiAgICAgIGNvbnN0IG5vZGUgPSA8SFRNTEVsZW1lbnQ+cm93LmNoaWxkcmVuW3NoaWZ0XSE7XG4gICAgICBub2RlLnJlbW92ZSgpO1xuICAgICAgdGhpcy5yZWN5Y2xlQ2VsbChub2RlLCBjb2x1bW5JbmRleCk7XG4gICAgfVxuICAgIGlmIChkZWJ1Zykge1xuICAgICAgdmVyaWZ5Um93KHJvdywgLTEsIHRoaXMuY29udGV4dC5jb2x1bW5zKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbW92ZUZyb3plbkNvbHVtbnMoY29sdW1uSW5kaWNlczogbnVtYmVyW10sIHNoaWZ0OiBudW1iZXIpIHtcbiAgICB0aGlzLmZvckVhY2hSb3coKHJvdzogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMucmVtb3ZlRnJvemVuQ2VsbHMocm93LCBjb2x1bW5JbmRpY2VzLCBzaGlmdCk7XG4gICAgfSk7XG4gICAgaWYgKGRlYnVnKSB7XG4gICAgICB0aGlzLnZlcmlmeVJvd3MoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbW92ZUFsbENvbHVtbnMoaW5jbHVkaW5nRnJvemVuOiBib29sZWFuKSB7XG4gICAgdGhpcy5mb3JFYWNoUm93KChyb3c6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLnJlbW92ZUFsbENlbGxzKHJvdywgaW5jbHVkaW5nRnJvemVuKTtcbiAgICB9KTtcbiAgICBpZiAoZGVidWcpIHtcbiAgICAgIHRoaXMudmVyaWZ5Um93cygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlQWxsQ2VsbHMocm93OiBIVE1MRWxlbWVudCwgaW5jbHVkaW5nRnJvemVuOiBib29sZWFuLCBzaGlmdCA9IHRoaXMudmlzaWJsZUNvbHVtbnMuZmlyc3QpIHtcbiAgICBjb25zdCBhcnIgPSA8SFRNTEVsZW1lbnRbXT5BcnJheS5mcm9tKHJvdy5jaGlsZHJlbik7XG4gICAgY29uc3QgZnJvemVuID0gdGhpcy52aXNpYmxlQ29sdW1ucy5mcm96ZW47XG4gICAgcm93LmlubmVySFRNTCA9ICcnO1xuXG4gICAgaWYgKGluY2x1ZGluZ0Zyb3plbiB8fCBmcm96ZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICBmb3IgKGNvbnN0IGkgb2YgZnJvemVuKSB7XG4gICAgICAgIHRoaXMucmVjeWNsZUNlbGwoYXJyLnNoaWZ0KCkhLCBpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaGF2ZSBmcm96ZW4gYW5kIGtlZXAgdGhlbSwgc28gcmVhZGQgdGhlbVxuICAgICAgZm9yIChjb25zdCBfIG9mIGZyb3plbikge1xuICAgICAgICByb3cuYXBwZW5kQ2hpbGQoYXJyLnNoaWZ0KCkhKTtcbiAgICAgIH1cbiAgICB9XG4gICAgYXJyLmZvckVhY2goKGl0ZW0sIGkpID0+IHtcbiAgICAgIHRoaXMucmVjeWNsZUNlbGwoaXRlbSwgaSArIHNoaWZ0KTtcbiAgICB9KTtcblxuICAgIGlmIChkZWJ1Zykge1xuICAgICAgdmVyaWZ5Um93KHJvdywgLTEsIHRoaXMuY29udGV4dC5jb2x1bW5zKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNlbGVjdENlbGwocm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyLCBjb2x1bW5zOiBUW10pOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgcG9vbCA9IHRoaXMuY2VsbFBvb2xbY29sdW1uXTtcbiAgICBjb25zdCBjb2x1bW5PYmogPSBjb2x1bW5zW2NvbHVtbl07XG4gICAgaWYgKHBvb2wubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgaXRlbSA9IHBvb2wucG9wKCkhO1xuICAgICAgY29uc3QgciA9IHRoaXMudXBkYXRlQ2VsbChpdGVtLCByb3csIGNvbHVtbk9iaik7XG4gICAgICBpZiAociAmJiByICE9PSBpdGVtKSB7XG4gICAgICAgIHNldENvbHVtbihyLCBjb2x1bW5PYmopO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHIgPyByIDogaXRlbTtcbiAgICB9XG4gICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ2VsbCh0aGlzLmhlYWRlci5vd25lckRvY3VtZW50LCByb3csIGNvbHVtbk9iaik7XG4gICAgc2V0Q29sdW1uKHIsIGNvbHVtbk9iaik7XG4gICAgcmV0dXJuIHI7XG4gIH1cblxuICBwcml2YXRlIHJlY3ljbGVDZWxsKGl0ZW06IEhUTUxFbGVtZW50LCBjb2x1bW46IG51bWJlcikge1xuICAgIHRoaXMuY2VsbFBvb2xbY29sdW1uXS5wdXNoKGl0ZW0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRDb2x1bW5BdFN0YXJ0KGZyb206IG51bWJlciwgdG86IG51bWJlciwgZnJvemVuU2hpZnQ6IG51bWJlciA9IHRoaXMudmlzaWJsZUNvbHVtbnMuZnJvemVuLmxlbmd0aCkge1xuICAgIGNvbnN0IHtjb2x1bW5zfSA9IHRoaXMuY29udGV4dDtcbiAgICB0aGlzLmZvckVhY2hSb3coKHJvdzogSFRNTEVsZW1lbnQsIHJvd0luZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIHRoaXMuYWRkQ2VsbEF0U3RhcnQocm93LCByb3dJbmRleCwgZnJvbSwgdG8sIGZyb3plblNoaWZ0LCBjb2x1bW5zKTtcbiAgICB9KTtcbiAgICBpZiAoZGVidWcpIHtcbiAgICAgIHRoaXMudmVyaWZ5Um93cygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkQ2VsbEF0U3RhcnQocm93OiBIVE1MRWxlbWVudCwgcm93SW5kZXg6IG51bWJlciwgZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyLCBmcm96ZW5TaGlmdDogbnVtYmVyLCBjb2x1bW5zOiBUW10pIHtcbiAgICBpZiAoZGVidWcpIHtcbiAgICAgIHZlcmlmeVJvdyhyb3csIHJvd0luZGV4LCB0aGlzLmNvbnRleHQuY29sdW1ucyk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSB0bzsgaSA+PSBmcm9tOyAtLWkpIHtcbiAgICAgIGNvbnN0IGNlbGwgPSB0aGlzLnNlbGVjdENlbGwocm93SW5kZXgsIGksIGNvbHVtbnMpO1xuICAgICAgcm93Lmluc2VydEJlZm9yZShjZWxsLCBmcm96ZW5TaGlmdCA+IDAgPyByb3cuY2hpbGRyZW5bZnJvemVuU2hpZnRdIDogcm93LmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgICBpZiAoZGVidWcpIHtcbiAgICAgIHZlcmlmeVJvdyhyb3csIHJvd0luZGV4LCB0aGlzLmNvbnRleHQuY29sdW1ucyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBpbnNlcnRGcm96ZW5DZWxscyhyb3c6IEhUTUxFbGVtZW50LCByb3dJbmRleDogbnVtYmVyLCBjb2x1bW5JbmRpY2VzOiBudW1iZXJbXSwgc2hpZnQ6IG51bWJlciwgY29sdW1uczogVFtdKSB7XG4gICAgY29uc3QgYmVmb3JlID0gcm93LmNoaWxkcmVuW3NoaWZ0XTtcbiAgICBmb3IgKGNvbnN0IGkgb2YgY29sdW1uSW5kaWNlcykge1xuICAgICAgY29uc3QgY2VsbCA9IHRoaXMuc2VsZWN0Q2VsbChyb3dJbmRleCwgaSwgY29sdW1ucyk7XG4gICAgICBpZiAoYmVmb3JlKSB7XG4gICAgICAgIHJvdy5pbnNlcnRCZWZvcmUoY2VsbCwgYmVmb3JlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGluc2VydEZyb3plbkNvbHVtbnMoY29sdW1uSW5kaWNlczogbnVtYmVyW10sIHNoaWZ0OiBudW1iZXIpIHtcbiAgICBjb25zdCB7Y29sdW1uc30gPSB0aGlzLmNvbnRleHQ7XG4gICAgdGhpcy5mb3JFYWNoUm93KChyb3c6IEhUTUxFbGVtZW50LCByb3dJbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICB0aGlzLmluc2VydEZyb3plbkNlbGxzKHJvdywgcm93SW5kZXgsIGNvbHVtbkluZGljZXMsIHNoaWZ0LCBjb2x1bW5zKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkQ29sdW1uQXRFbmQoZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyKSB7XG4gICAgY29uc3Qge2NvbHVtbnN9ID0gdGhpcy5jb250ZXh0O1xuICAgIHRoaXMuZm9yRWFjaFJvdygocm93OiBIVE1MRWxlbWVudCwgcm93SW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgdGhpcy5hZGRDZWxsQXRFbmQocm93LCByb3dJbmRleCwgZnJvbSwgdG8sIGNvbHVtbnMpO1xuICAgIH0pO1xuICAgIGlmIChkZWJ1Zykge1xuICAgICAgdGhpcy52ZXJpZnlSb3dzKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB2ZXJpZnlSb3dzKCkge1xuICAgIGNvbnN0IHtjb2x1bW5zfSA9IHRoaXMuY29udGV4dDtcbiAgICB0aGlzLmZvckVhY2hSb3coKHJvdywgcm93SW5kZXgpID0+IHZlcmlmeVJvdyhyb3csIHJvd0luZGV4LCBjb2x1bW5zKSk7XG4gIH1cblxuICBwcml2YXRlIGFkZENlbGxBdEVuZChyb3c6IEhUTUxFbGVtZW50LCByb3dJbmRleDogbnVtYmVyLCBmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIsIGNvbHVtbnM6IFRbXSkge1xuICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDw9IHRvOyArK2kpIHtcbiAgICAgIGNvbnN0IGNlbGwgPSB0aGlzLnNlbGVjdENlbGwocm93SW5kZXgsIGksIGNvbHVtbnMpO1xuICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGwpO1xuICAgIH1cbiAgICBpZiAoZGVidWcpIHtcbiAgICAgIHZlcmlmeVJvdyhyb3csIHJvd0luZGV4LCB0aGlzLmNvbnRleHQuY29sdW1ucyk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlSGVhZGVycygpIHtcbiAgICBjb25zdCB7Y29sdW1uc30gPSB0aGlzLmNvbnRleHQ7XG4gICAgQXJyYXkuZnJvbSh0aGlzLmhlYWRlci5jaGlsZHJlbikuZm9yRWFjaCgobm9kZTogSFRNTEVsZW1lbnQsIGkpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlSGVhZGVyKG5vZGUsIGNvbHVtbnNbaV0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmVjcmVhdGUobGVmdDogbnVtYmVyLCB3aWR0aDogbnVtYmVyKSB7XG4gICAgY29uc3QgY29udGV4dCA9IHRoaXMuY29udGV4dDtcbiAgICBpZiAoY29udGV4dC5oYXNGcm96ZW5Db2x1bW5zID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnRleHQuaGFzRnJvemVuQ29sdW1ucyA9IGNvbnRleHQuY29sdW1ucy5zb21lKChjKSA9PiBjLmZyb3plbik7XG4gICAgfVxuXG4gICAgdGhpcy5zdHlsZS51cGRhdGUoY29udGV4dC5kZWZhdWx0Um93SGVpZ2h0IC0gY29udGV4dC5wYWRkaW5nKC0xKSwgY29udGV4dC5jb2x1bW5zLCBjb250ZXh0LmNvbHVtbi5wYWRkaW5nLCB0aGlzLnRhYmxlSWQpO1xuXG5cbiAgICB0aGlzLmNsZWFyUG9vbCgpO1xuICAgIC8vIGluaXQgcG9vbFxuICAgIGZvciAobGV0IGkgPSB0aGlzLmNlbGxQb29sLmxlbmd0aDsgaSA8IGNvbnRleHQuY29sdW1ucy5sZW5ndGg7ICsraSkge1xuICAgICAgdGhpcy5jZWxsUG9vbC5wdXNoKFtdKTtcbiAgICB9XG5cbiAgICAvL2NyZWF0ZSBhbGwgaGVhZGVyIGNvbHVtbnNcbiAgICB7XG4gICAgICBjb25zdCBmcmFnbWVudCA9IHRoaXMuY29sdW1uRnJhZ21lbnQ7XG4gICAgICBjb25zdCBkb2N1bWVudCA9IGZyYWdtZW50Lm93bmVyRG9jdW1lbnQ7XG4gICAgICB0aGlzLmhlYWRlci5pbm5lckhUTUwgPSAnJztcbiAgICAgIGNvbnRleHQuY29sdW1ucy5mb3JFYWNoKChjb2wpID0+IHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuY3JlYXRlSGVhZGVyKGRvY3VtZW50LCBjb2wpO1xuICAgICAgICBzZXRDb2x1bW4obiwgY29sKTtcbiAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQobik7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuaGVhZGVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgICB9XG5cbiAgICBjb25zdCB7Zmlyc3QsIGxhc3QsIGZpcnN0Um93UG9zfSA9IHJhbmdlKGxlZnQsIHdpZHRoLCBjb250ZXh0LmNvbHVtbi5kZWZhdWx0Um93SGVpZ2h0LCBjb250ZXh0LmNvbHVtbi5leGNlcHRpb25zLCBjb250ZXh0LmNvbHVtbi5udW1iZXJPZlJvd3MpO1xuXG4gICAgdGhpcy52aXNpYmxlQ29sdW1ucy5maXJzdCA9IHRoaXMudmlzaWJsZUNvbHVtbnMuZm9yY2VkRmlyc3QgPSBmaXJzdDtcbiAgICB0aGlzLnZpc2libGVDb2x1bW5zLmxhc3QgPSB0aGlzLnZpc2libGVDb2x1bW5zLmZvcmNlZExhc3QgPSBsYXN0O1xuICAgIGlmIChjb250ZXh0Lmhhc0Zyb3plbkNvbHVtbnMpIHtcbiAgICAgIGNvbnN0IHt0YXJnZXR9ID0gdXBkYXRlRnJvemVuKFtdLCBjb250ZXh0LmNvbHVtbnMsIGZpcnN0KTtcbiAgICAgIHRoaXMudmlzaWJsZUNvbHVtbnMuZnJvemVuID0gdGFyZ2V0O1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZUNvbHVtbk9mZnNldChmaXJzdFJvd1Bvcyk7XG4gIH1cblxuICBjbGVhclBvb2woKSB7XG4gICAgdGhpcy5jZWxsUG9vbC5mb3JFYWNoKChwKSA9PiBwLnNwbGljZSgwLCBwLmxlbmd0aCkpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVDb2x1bW5PZmZzZXQoZmlyc3RDb2x1bW5Qb3M6IG51bWJlcikge1xuICAgIHRoaXMudmlzaWJsZUZpcnN0Q29sdW1uUG9zID0gZmlyc3RDb2x1bW5Qb3M7XG4gICAgLy8gVE9ET1xuICB9XG5cbiAgY3JlYXRlUm93KG5vZGU6IEhUTUxFbGVtZW50LCByb3dJbmRleDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3Qge2NvbHVtbnMsIGhhc0Zyb3plbkNvbHVtbnN9ID0gdGhpcy5jb250ZXh0O1xuICAgIGNvbnN0IHZpc2libGUgPSB0aGlzLnZpc2libGVDb2x1bW5zO1xuXG4gICAgaWYgKGhhc0Zyb3plbkNvbHVtbnMpIHtcbiAgICAgIGZvciAoY29uc3QgaSBvZiB2aXNpYmxlLmZyb3plbikge1xuICAgICAgICBjb25zdCBjZWxsID0gdGhpcy5zZWxlY3RDZWxsKHJvd0luZGV4LCBpLCBjb2x1bW5zKTtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IHZpc2libGUuZmlyc3Q7IGkgPD0gdmlzaWJsZS5sYXN0OyArK2kpIHtcbiAgICAgIGNvbnN0IGNlbGwgPSB0aGlzLnNlbGVjdENlbGwocm93SW5kZXgsIGksIGNvbHVtbnMpO1xuICAgICAgbm9kZS5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVSb3cobm9kZTogSFRNTEVsZW1lbnQsIHJvd0luZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB7Y29sdW1ucywgaGFzRnJvemVuQ29sdW1uc30gPSB0aGlzLmNvbnRleHQ7XG4gICAgY29uc3QgdmlzaWJsZSA9IHRoaXMudmlzaWJsZUNvbHVtbnM7XG5cbiAgICAvL2NvbHVtbnMgbWF5IG5vdCBtYXRjaCBhbnltb3JlIGlmIGl0IGlzIGEgcG9vbGVkIGl0ZW0gYSBsb25nIHRpbWUgYWdvXG4gICAgY29uc3QgZXhpc3RpbmcgPSA8SFRNTEVsZW1lbnRbXT5BcnJheS5mcm9tKG5vZGUuY2hpbGRyZW4pO1xuXG4gICAgc3dpdGNoIChleGlzdGluZy5sZW5ndGgpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgaWYgKGhhc0Zyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICB0aGlzLmluc2VydEZyb3plbkNlbGxzKG5vZGUsIHJvd0luZGV4LCB2aXNpYmxlLmZyb3plbiwgMCwgY29sdW1ucyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRDZWxsQXRFbmQobm9kZSwgcm93SW5kZXgsIHZpc2libGUuZmlyc3QsIHZpc2libGUubGFzdCwgY29sdW1ucyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxOlxuICAgICAgICBjb25zdCBvbGQgPSBleGlzdGluZ1swXTtcbiAgICAgICAgY29uc3QgaWQgPSBvbGQuZGF0YXNldC5pZCE7XG4gICAgICAgIGNvbnN0IGNvbHVtbkluZGV4ID0gY29sdW1ucy5maW5kSW5kZXgoKGMpID0+IGMuaWQgPT09IGlkKTtcbiAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChvbGQpO1xuICAgICAgICB0aGlzLnJlY3ljbGVDZWxsKG9sZCwgY29sdW1uSW5kZXgpO1xuXG4gICAgICAgIGlmIChoYXNGcm96ZW5Db2x1bW5zKSB7XG4gICAgICAgICAgdGhpcy5pbnNlcnRGcm96ZW5DZWxscyhub2RlLCByb3dJbmRleCwgdmlzaWJsZS5mcm96ZW4sIDAsIGNvbHVtbnMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRkQ2VsbEF0RW5kKG5vZGUsIHJvd0luZGV4LCB2aXNpYmxlLmZpcnN0LCB2aXNpYmxlLmxhc3QsIGNvbHVtbnMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6IC8vPj0yXG4gICAgICAgIGlmIChoYXNGcm96ZW5Db2x1bW5zKSB7XG4gICAgICAgICAgLy9zeW5jIHRoZSBmcm96ZW4gY29sdW1uc1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnRGcm96ZW4gPSA8bnVtYmVyW10+W107XG4gICAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIGV4aXN0aW5nKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IG5vZGUuZGF0YXNldC5pZCE7XG4gICAgICAgICAgICBjb25zdCBjb2wgPSBjb2x1bW5zLmZpbmRJbmRleCgoYykgPT4gYy5pZCA9PT0gaWQpO1xuICAgICAgICAgICAgaWYgKGNvbHVtbnNbY29sXS5mcm96ZW4pIHtcbiAgICAgICAgICAgICAgY3VycmVudEZyb3plbi5wdXNoKGNvbCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvL2p1c3QgaW50ZXJlc3RlZCBpbiB0aGUgZmlyc3QgZnJvemVuXG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCB7Y29tbW9uLCByZW1vdmVkLCBhZGRlZH0gPSBmcm96ZW5EZWx0YShjdXJyZW50RnJvemVuLCB2aXNpYmxlLmZyb3plbik7XG4gICAgICAgICAgLy91cGRhdGUgdGhlIGNvbW1vbiBvbmVzXG4gICAgICAgICAgZXhpc3Rpbmcuc2xpY2UoMCwgY29tbW9uKS5mb3JFYWNoKChjaGlsZCwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29sID0gY29sdW1uc1tjdXJyZW50RnJvemVuW2ldXTtcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSB0aGlzLnVwZGF0ZUNlbGwoY2hpbGQsIHJvd0luZGV4LCBjb2wpO1xuICAgICAgICAgICAgaWYgKGNlbGwgJiYgY2VsbCAhPT0gY2hpbGQpIHtcbiAgICAgICAgICAgICAgc2V0Q29sdW1uKGNlbGwsIGNvbCk7XG4gICAgICAgICAgICAgIG5vZGUucmVwbGFjZUNoaWxkKGNlbGwsIGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLnJlbW92ZUZyb3plbkNlbGxzKG5vZGUsIHJlbW92ZWQsIGNvbW1vbik7XG4gICAgICAgICAgdGhpcy5pbnNlcnRGcm96ZW5DZWxscyhub2RlLCByb3dJbmRleCwgYWRkZWQsIGNvbW1vbiwgY29sdW1ucyk7XG4gICAgICAgICAgLy9yZW1vdmUgdGhlIG9uZXMgYWxyZWFkeSBoYW5kbGVkXG4gICAgICAgICAgZXhpc3Rpbmcuc3BsaWNlKDAsIGN1cnJlbnRGcm96ZW4ubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhpc3RpbmcubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgLy8gYWxsIGFyZSBmcm96ZW5cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaXJzdElkID0gZXhpc3RpbmdbMF0uZGF0YXNldC5pZCE7XG4gICAgICAgIGNvbnN0IGxhc3RJZCA9IGV4aXN0aW5nW2V4aXN0aW5nLmxlbmd0aCAtIDFdLmRhdGFzZXQuaWQhO1xuICAgICAgICBjb25zdCBmaXJzdEluZGV4ID0gY29sdW1ucy5maW5kSW5kZXgoKGMpID0+IGMuaWQgPT09IGZpcnN0SWQpO1xuICAgICAgICBjb25zdCBsYXN0SW5kZXggPSBjb2x1bW5zLmZpbmRJbmRleCgoYykgPT4gYy5pZCA9PT0gbGFzdElkKTtcbiAgICAgICAgY29uc3QgZnJvemVuU2hpZnQgPSB2aXNpYmxlLmZyb3plbi5sZW5ndGg7XG5cbiAgICAgICAgaWYgKGZpcnN0SW5kZXggPT09IHZpc2libGUuZmlyc3QgJiYgbGFzdEluZGV4ID09PSB2aXNpYmxlLmxhc3QpIHtcbiAgICAgICAgICAvL21hdGNoIHVwZGF0ZVxuICAgICAgICAgIGV4aXN0aW5nLmZvckVhY2goKGNoaWxkLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb2wgPSBjb2x1bW5zW2kgKyB2aXNpYmxlLmZpcnN0XTtcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSB0aGlzLnVwZGF0ZUNlbGwoY2hpbGQsIHJvd0luZGV4LCBjb2wpO1xuICAgICAgICAgICAgaWYgKGNlbGwgJiYgY2VsbCAhPT0gY2hpbGQpIHtcbiAgICAgICAgICAgICAgc2V0Q29sdW1uKGNlbGwsIGNvbCk7XG4gICAgICAgICAgICAgIG5vZGUucmVwbGFjZUNoaWxkKGNlbGwsIGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmICh2aXNpYmxlLmxhc3QgPiBmaXJzdEluZGV4IHx8IHZpc2libGUuZmlyc3QgPCBsYXN0SW5kZXgpIHtcbiAgICAgICAgICAvL25vIG1hdGNoIGF0IGFsbFxuICAgICAgICAgIHRoaXMucmVtb3ZlQWxsQ2VsbHMobm9kZSwgZmFsc2UsIGZpcnN0SW5kZXgpO1xuICAgICAgICAgIHRoaXMuYWRkQ2VsbEF0U3RhcnQobm9kZSwgcm93SW5kZXgsIHZpc2libGUuZmlyc3QsIHZpc2libGUubGFzdCwgZnJvemVuU2hpZnQsIGNvbHVtbnMpO1xuICAgICAgICB9IGVsc2UgaWYgKHZpc2libGUuZmlyc3QgPCBmaXJzdEluZGV4KSB7XG4gICAgICAgICAgLy9zb21lIGZpcnN0IHJvd3MgbWlzc2luZyBhbmQgc29tZSBsYXN0IHJvd3MgdG8gbXVjaFxuICAgICAgICAgIHRoaXMucmVtb3ZlQ2VsbEZyb21FbmQobm9kZSwgdmlzaWJsZS5sYXN0ICsgMSwgZmlyc3RJbmRleCk7XG4gICAgICAgICAgdGhpcy5hZGRDZWxsQXRTdGFydChub2RlLCByb3dJbmRleCwgdmlzaWJsZS5maXJzdCwgZmlyc3RJbmRleCAtIDEsIGZyb3plblNoaWZ0LCBjb2x1bW5zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvL3NvbWUgbGFzdCByb3dzIG1pc3NpbmcgYW5kIHNvbWUgZmlyc3Qgcm93cyB0byBtdWNoXG4gICAgICAgICAgdGhpcy5yZW1vdmVDZWxsRnJvbVN0YXJ0KG5vZGUsIGZpcnN0SW5kZXgsIHZpc2libGUuZmlyc3QgLSAxLCBmcm96ZW5TaGlmdCk7XG4gICAgICAgICAgdGhpcy5hZGRDZWxsQXRFbmQobm9kZSwgcm93SW5kZXgsIGxhc3RJbmRleCArIDEsIHZpc2libGUubGFzdCwgY29sdW1ucyk7XG4gICAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHN5bmNGcm96ZW4oZmlyc3Q6IG51bWJlcikge1xuICAgIGNvbnN0IHtjb2x1bW5zLCBoYXNGcm96ZW5Db2x1bW5zfSA9IHRoaXMuY29udGV4dDtcbiAgICBjb25zdCB2aXNpYmxlID0gdGhpcy52aXNpYmxlQ29sdW1ucztcblxuICAgIGlmICghaGFzRnJvemVuQ29sdW1ucykge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGlmIChmaXJzdCA9PT0gMCkge1xuICAgICAgaWYgKHZpc2libGUuZnJvemVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5yZW1vdmVGcm96ZW5Db2x1bW5zKHZpc2libGUuZnJvemVuLCAwKTtcbiAgICAgICAgdmlzaWJsZS5mcm96ZW4gPSBbXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBjb25zdCBvbGQgPSB2aXNpYmxlLmZyb3plbi5sZW5ndGg7XG4gICAgY29uc3Qge3RhcmdldCwgYWRkZWQsIHJlbW92ZWR9ID0gdXBkYXRlRnJvemVuKHZpc2libGUuZnJvemVuLCBjb2x1bW5zLCBmaXJzdCk7XG4gICAgaWYgKHJlbW92ZWQubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5yZW1vdmVGcm96ZW5Db2x1bW5zKHJlbW92ZWQsIG9sZCAtIHJlbW92ZWQubGVuZ3RoKTtcbiAgICB9XG4gICAgaWYgKGFkZGVkLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuaW5zZXJ0RnJvemVuQ29sdW1ucyhhZGRlZCwgb2xkIC0gcmVtb3ZlZC5sZW5ndGgpO1xuICAgIH1cbiAgICB2aXNpYmxlLmZyb3plbiA9IHRhcmdldDtcbiAgICByZXR1cm4gdGFyZ2V0Lmxlbmd0aDtcbiAgfVxuXG4gIHByaXZhdGUgb25TY3JvbGxlZEhvcml6b250YWxseUltcGwoc2Nyb2xsTGVmdDogbnVtYmVyLCBjbGllbnRXaWR0aDogbnVtYmVyKTogRVNjcm9sbFJlc3VsdCB7XG4gICAgY29uc3Qge2NvbHVtbn0gPSB0aGlzLmNvbnRleHQ7XG4gICAgY29uc3Qge2ZpcnN0LCBsYXN0LCBmaXJzdFJvd1Bvc30gPSByYW5nZShzY3JvbGxMZWZ0LCBjbGllbnRXaWR0aCwgY29sdW1uLmRlZmF1bHRSb3dIZWlnaHQsIGNvbHVtbi5leGNlcHRpb25zLCBjb2x1bW4ubnVtYmVyT2ZSb3dzKTtcblxuICAgIGNvbnN0IHZpc2libGUgPSB0aGlzLnZpc2libGVDb2x1bW5zO1xuICAgIHZpc2libGUuZm9yY2VkRmlyc3QgPSBmaXJzdDtcbiAgICB2aXNpYmxlLmZvcmNlZExhc3QgPSBsYXN0O1xuXG4gICAgaWYgKChmaXJzdCAtIHZpc2libGUuZmlyc3QpID49IDAgJiYgKGxhc3QgLSB2aXNpYmxlLmxhc3QpIDw9IDApIHtcbiAgICAgIC8vbm90aGluZyB0byBkb1xuICAgICAgcmV0dXJuIEVTY3JvbGxSZXN1bHQuTk9ORTtcbiAgICB9XG5cbiAgICBsZXQgcjogRVNjcm9sbFJlc3VsdCA9IEVTY3JvbGxSZXN1bHQuUEFSVElBTDtcblxuICAgIGNvbnN0IGZyb3plblNoaWZ0ID0gdGhpcy5zeW5jRnJvemVuKGZpcnN0KTtcblxuICAgIGlmIChmaXJzdCA+IHZpc2libGUubGFzdCB8fCBsYXN0IDwgdmlzaWJsZS5maXJzdCkge1xuICAgICAgLy9ubyBvdmVybGFwLCBjbGVhbiBhbmQgZHJhdyBldmVyeXRoaW5nXG4gICAgICAvL2NvbnNvbGUubG9nKGBmZiBhZGRlZDogJHtsYXN0IC0gZmlyc3QgKyAxfSByZW1vdmVkOiAke3Zpc2libGVMYXN0IC0gdmlzaWJsZUZpcnN0ICsgMX0gJHtmaXJzdH06JHtsYXN0fSAke29mZnNldH1gKTtcbiAgICAgIC8vcmVtb3ZlUm93cyh2aXNpYmxlRmlyc3QsIHZpc2libGVMYXN0KTtcbiAgICAgIHRoaXMucmVtb3ZlQWxsQ29sdW1ucyhmYWxzZSk7XG4gICAgICB0aGlzLmFkZENvbHVtbkF0RW5kKGZpcnN0LCBsYXN0KTtcbiAgICAgIHIgPSBFU2Nyb2xsUmVzdWx0LkFMTDtcbiAgICB9IGVsc2UgaWYgKGZpcnN0IDwgdmlzaWJsZS5maXJzdCkge1xuICAgICAgLy9zb21lIGZpcnN0IHJvd3MgbWlzc2luZyBhbmQgc29tZSBsYXN0IHJvd3MgdG8gbXVjaFxuICAgICAgLy9jb25zb2xlLmxvZyhgdXAgYWRkZWQ6ICR7dmlzaWJsZUZpcnN0IC0gZmlyc3QgKyAxfSByZW1vdmVkOiAke3Zpc2libGVMYXN0IC0gbGFzdCArIDF9ICR7Zmlyc3R9OiR7bGFzdH0gJHtvZmZzZXR9YCk7XG4gICAgICB0aGlzLnJlbW92ZUNvbHVtbkZyb21FbmQobGFzdCArIDEsIHZpc2libGUubGFzdCk7XG4gICAgICB0aGlzLmFkZENvbHVtbkF0U3RhcnQoZmlyc3QsIHZpc2libGUuZmlyc3QgLSAxLCBmcm96ZW5TaGlmdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vY29uc29sZS5sb2coYGRvIGFkZGVkOiAke2xhc3QgLSB2aXNpYmxlTGFzdCArIDF9IHJlbW92ZWQ6ICR7Zmlyc3QgLSB2aXNpYmxlRmlyc3QgKyAxfSAke2ZpcnN0fToke2xhc3R9ICR7b2Zmc2V0fWApO1xuICAgICAgLy9zb21lIGxhc3Qgcm93cyBtaXNzaW5nIGFuZCBzb21lIGZpcnN0IHJvd3MgdG8gbXVjaFxuICAgICAgdGhpcy5yZW1vdmVDb2x1bW5Gcm9tU3RhcnQodmlzaWJsZS5maXJzdCwgZmlyc3QgLSAxLCBmcm96ZW5TaGlmdCk7XG4gICAgICB0aGlzLmFkZENvbHVtbkF0RW5kKHZpc2libGUubGFzdCArIDEsIGxhc3QpO1xuICAgIH1cblxuICAgIHZpc2libGUuZmlyc3QgPSBmaXJzdDtcbiAgICB2aXNpYmxlLmxhc3QgPSBsYXN0O1xuXG4gICAgdGhpcy51cGRhdGVDb2x1bW5PZmZzZXQoZmlyc3RSb3dQb3MpO1xuXG4gICAgcmV0dXJuIHI7XG4gIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBBQ2VsbEFkYXB0ZXI7XG5cbmZ1bmN0aW9uIHZlcmlmeVJvdyhyb3c6IEhUTUxFbGVtZW50LCBpbmRleDogbnVtYmVyLCBjb2x1bW5zOiBJQ29sdW1uW10pIHtcbiAgY29uc3QgY29scyA9IDxIVE1MRWxlbWVudFtdPkFycmF5LmZyb20ocm93LmNoaWxkcmVuKTtcbiAgLy9zb3J0IGluY3JlbWVudGFsbHlcbiAgaWYgKGNvbHMubGVuZ3RoIDw9IDEpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgY29sT2JqcyA9IGNvbHMubWFwKChjKSA9PiBjb2x1bW5zLmZpbmQoKGQpID0+IGQuaWQgPT09IGMuZGF0YXNldC5pZCkhKTtcbiAgY29uc29sZS5hc3NlcnQoY29sT2Jqcy5ldmVyeSgoZCkgPT4gQm9vbGVhbihkKSksICdhbGwgY29sdW1ucyBtdXN0IGV4aXN0JywgaW5kZXgpO1xuICBjb25zb2xlLmFzc2VydChjb2xPYmpzLmV2ZXJ5KChkLCBpKSA9PiBpID09PSAwIHx8IGQuaW5kZXggPj0gY29sT2Jqc1tpIC0gMV0hLmluZGV4KSwgJ2FsbCBjb2x1bW5zIGluIGFzY2VuZGluZyBvcmRlcicsIGluZGV4KTtcbiAgY29uc29sZS5hc3NlcnQoKG5ldyBTZXQoY29sT2JqcykpLnNpemUgPT09IGNvbE9ianMubGVuZ3RoLCAndW5pcXVlIGNvbHVtbnMnLCBjb2xPYmpzKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvdGFibGUvaW50ZXJuYWwvQUNlbGxBZGFwdGVyLnRzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQVFBO0FBcUJBO0FBQUE7QUFBQTtBQUFBO0FBaEJBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///9\n");

/***/ }),
/* 10 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__ACellRenderer__ = __webpack_require__(11);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"ACellRenderer\", function() { return __WEBPACK_IMPORTED_MODULE_0__ACellRenderer__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ARowRenderer__ = __webpack_require__(2);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"ARowRenderer\", function() { return __WEBPACK_IMPORTED_MODULE_1__ARowRenderer__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__logic__ = __webpack_require__(0);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"uniformContext\", function() { return __WEBPACK_IMPORTED_MODULE_2__logic__[\"e\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"nonUniformContext\", function() { return __WEBPACK_IMPORTED_MODULE_2__logic__[\"b\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"randomContext\", function() { return __WEBPACK_IMPORTED_MODULE_2__logic__[\"c\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"range\", function() { return __WEBPACK_IMPORTED_MODULE_2__logic__[\"d\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"frozenDelta\", function() { return __WEBPACK_IMPORTED_MODULE_2__logic__[\"a\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"updateFrozen\", function() { return __WEBPACK_IMPORTED_MODULE_2__logic__[\"f\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__abortAble__ = __webpack_require__(4);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"ABORTED\", function() { return __WEBPACK_IMPORTED_MODULE_3__abortAble__[\"a\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"isAbortAble\", function() { return __WEBPACK_IMPORTED_MODULE_3__abortAble__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__style__ = __webpack_require__(3);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"GridStyleManager\", function() { return __WEBPACK_IMPORTED_MODULE_4__style__[\"a\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"setColumn\", function() { return __WEBPACK_IMPORTED_MODULE_4__style__[\"d\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"TEMPLATE\", function() { return __WEBPACK_IMPORTED_MODULE_4__style__[\"c\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"setTemplate\", function() { return __WEBPACK_IMPORTED_MODULE_4__style__[\"e\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"StyleManager\", function() { return __WEBPACK_IMPORTED_MODULE_4__style__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__mixin__ = __webpack_require__(1);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"EScrollResult\", function() { return __WEBPACK_IMPORTED_MODULE_5__mixin__[\"a\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"PrefetchMixin\", function() { return __WEBPACK_IMPORTED_MODULE_5__mixin__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__table__ = __webpack_require__(14);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"ACellTableSection\", function() { return __WEBPACK_IMPORTED_MODULE_6__table__[\"a\"]; });\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst version = \"1.0.0-20180108-082103\";\n/* harmony export (immutable) */ __webpack_exports__[\"version\"] = version;\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2luZGV4LnRzP2Y0MWUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9BQ2VsbFJlbmRlcmVyJztcbmV4cG9ydCAqIGZyb20gJy4vQVJvd1JlbmRlcmVyJztcbmV4cG9ydCAqIGZyb20gJy4vbG9naWMnO1xuZXhwb3J0ICogZnJvbSAnLi9hYm9ydEFibGUnO1xuZXhwb3J0ICogZnJvbSAnLi9zdHlsZSc7XG5leHBvcnQgKiBmcm9tICcuL21peGluJztcbmV4cG9ydCAqIGZyb20gJy4vdGFibGUnO1xuXG5kZWNsYXJlIGNvbnN0IF9fVkVSU0lPTl9fOiBzdHJpbmc7XG5leHBvcnQgY29uc3QgdmVyc2lvbiA9IF9fVkVSU0lPTl9fO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9pbmRleC50cyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///10\n");

/***/ }),
/* 11 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__ARowRenderer__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__style__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__table_internal_ACellAdapter__ = __webpack_require__(9);\n\r\n\r\n\r\nclass ACellRenderer extends __WEBPACK_IMPORTED_MODULE_0__ARowRenderer__[\"a\" /* ARowRenderer */] {\r\n    constructor(root, htmlId, options = {}) {\r\n        super(Object(__WEBPACK_IMPORTED_MODULE_1__style__[\"e\" /* setTemplate */])(root).querySelector('main > article'), options);\r\n        this.root = root;\r\n        root.classList.add('lineup-engine');\r\n        this.style = new __WEBPACK_IMPORTED_MODULE_1__style__[\"a\" /* GridStyleManager */](this.root, htmlId);\r\n        const that = this;\r\n        class LocalCell extends __WEBPACK_IMPORTED_MODULE_2__table_internal_ACellAdapter__[\"a\" /* default */] {\r\n            get context() {\r\n                return that.context;\r\n            }\r\n            createHeader(document, column) {\r\n                return that.createHeader(document, column);\r\n            }\r\n            updateHeader(node, column) {\r\n                return that.updateHeader(node, column);\r\n            }\r\n            createCell(document, index, column) {\r\n                return that.createCell(document, index, column);\r\n            }\r\n            updateCell(node, index, column) {\r\n                return that.updateCell(node, index, column);\r\n            }\r\n            forEachRow(callback) {\r\n                return that.forEachRow(callback);\r\n            }\r\n        }\r\n        this.cell = new LocalCell(this.header, this.style, undefined, ...(options.mixins || []));\r\n    }\r\n    get header() {\r\n        return this.root.querySelector('header > article');\r\n    }\r\n    get headerScroller() {\r\n        return this.root.querySelector('header');\r\n    }\r\n    addColumnMixin(mixinClass, options) {\r\n        this.cell.addColumnMixin(mixinClass, options);\r\n    }\r\n    init() {\r\n        this.cell.init();\r\n        const scroller = this.body.parentElement;\r\n        let oldLeft = scroller.scrollLeft;\r\n        const handler = () => {\r\n            const left = scroller.scrollLeft;\r\n            if (Math.abs(oldLeft - left) < this.options.minScrollDelta) {\r\n                return;\r\n            }\r\n            const isGoingRight = left > oldLeft;\r\n            oldLeft = left;\r\n            this.onScrolledHorizontally(left, scroller.clientWidth, isGoingRight);\r\n        };\r\n        scroller.addEventListener('scroll', this.createDelayedHandler(handler));\r\n        super.init();\r\n    }\r\n    destroy() {\r\n        super.destroy();\r\n        this.root.remove();\r\n    }\r\n    onScrolledHorizontally(scrollLeft, clientWidth, isGoingRight) {\r\n        return this.cell.onScrolledHorizontally(scrollLeft, clientWidth, isGoingRight);\r\n    }\r\n    updateHeaders() {\r\n        this.cell.updateHeaders();\r\n    }\r\n    updateColumnWidths() {\r\n        const context = this.context;\r\n        this.style.update(context.defaultRowHeight - context.padding(-1), context.columns, context.column.padding);\r\n    }\r\n    recreate(ctx) {\r\n        const scroller = this.bodyScroller;\r\n        const oldLeft = scroller.scrollLeft;\r\n        this.cell.recreate(oldLeft, scroller.clientWidth);\r\n        super.recreate(ctx);\r\n        scroller.scrollLeft = oldLeft;\r\n    }\r\n    clearPool() {\r\n        super.clearPool();\r\n        this.cell.clearPool();\r\n    }\r\n    createRow(node, rowIndex) {\r\n        this.cell.createRow(node, rowIndex);\r\n    }\r\n    updateRow(node, rowIndex) {\r\n        this.cell.updateRow(node, rowIndex);\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ACellRenderer;\n\r\n/* unused harmony default export */ var _unused_webpack_default_export = (ACellRenderer);\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL0FDZWxsUmVuZGVyZXIudHM/YzczNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0lBbmltYXRpb25Db250ZXh0fSBmcm9tICcuL2FuaW1hdGlvbic7XG5pbXBvcnQge0FSb3dSZW5kZXJlciwgSVJvd1JlbmRlcmVyT3B0aW9uc30gZnJvbSAnLi9BUm93UmVuZGVyZXInO1xuaW1wb3J0IHtFU2Nyb2xsUmVzdWx0LCBJTWl4aW5DbGFzc30gZnJvbSAnLi9taXhpbic7XG5pbXBvcnQge0dyaWRTdHlsZU1hbmFnZXIsIElDb2x1bW4sIHNldFRlbXBsYXRlfSBmcm9tICcuL3N0eWxlJztcbmltcG9ydCBBQ2VsbEFkYXB0ZXIsIHtJQ2VsbEFkYXB0ZXJSZW5kZXJDb250ZXh0fSBmcm9tICcuL3RhYmxlL2ludGVybmFsL0FDZWxsQWRhcHRlcic7XG5cblxuZXhwb3J0IGRlY2xhcmUgdHlwZSBJQ2VsbFJlbmRlckNvbnRleHQ8VCBleHRlbmRzIElDb2x1bW4+ID0gSUNlbGxBZGFwdGVyUmVuZGVyQ29udGV4dDxUPjtcblxuLyoqXG4gKiBhIEBzZWUgQVJvd1JlbmRlcmVyIHdoaWNoIG1hbmFnZXMgbXVsdGlwbGUgY29sdW1ucyBwZXIgcm93XG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBQ2VsbFJlbmRlcmVyPFQgZXh0ZW5kcyBJQ29sdW1uPiBleHRlbmRzIEFSb3dSZW5kZXJlciB7XG5cbiAgcHJvdGVjdGVkIHJlYWRvbmx5IHN0eWxlOiBHcmlkU3R5bGVNYW5hZ2VyO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgY2VsbDogQUNlbGxBZGFwdGVyPFQ+O1xuXG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCByZWFkb25seSByb290OiBIVE1MRWxlbWVudCwgaHRtbElkOiBzdHJpbmcsIG9wdGlvbnM6IFBhcnRpYWw8SVJvd1JlbmRlcmVyT3B0aW9ucz4gPSB7fSkge1xuICAgIHN1cGVyKDxIVE1MRWxlbWVudD5zZXRUZW1wbGF0ZShyb290KS5xdWVyeVNlbGVjdG9yKCdtYWluID4gYXJ0aWNsZScpLCBvcHRpb25zKTtcbiAgICByb290LmNsYXNzTGlzdC5hZGQoJ2xpbmV1cC1lbmdpbmUnKTtcblxuICAgIHRoaXMuc3R5bGUgPSBuZXcgR3JpZFN0eWxlTWFuYWdlcih0aGlzLnJvb3QsIGh0bWxJZCk7XG5cbiAgICBjb25zdCB0aGF0ID0gdGhpcztcblxuICAgIGNsYXNzIExvY2FsQ2VsbCBleHRlbmRzIEFDZWxsQWRhcHRlcjxUPiB7XG4gICAgICBwcm90ZWN0ZWQgZ2V0IGNvbnRleHQoKTogSUNlbGxBZGFwdGVyUmVuZGVyQ29udGV4dDxUPiB7XG4gICAgICAgIHJldHVybiB0aGF0LmNvbnRleHQ7XG4gICAgICB9XG5cbiAgICAgIHByb3RlY3RlZCBjcmVhdGVIZWFkZXIoZG9jdW1lbnQ6IERvY3VtZW50LCBjb2x1bW46IFQpIHtcbiAgICAgICAgcmV0dXJuIHRoYXQuY3JlYXRlSGVhZGVyKGRvY3VtZW50LCBjb2x1bW4pO1xuICAgICAgfVxuXG4gICAgICBwcm90ZWN0ZWQgdXBkYXRlSGVhZGVyKG5vZGU6IEhUTUxFbGVtZW50LCBjb2x1bW46IFQpIHtcbiAgICAgICAgcmV0dXJuIHRoYXQudXBkYXRlSGVhZGVyKG5vZGUsIGNvbHVtbik7XG4gICAgICB9XG5cbiAgICAgIHByb3RlY3RlZCBjcmVhdGVDZWxsKGRvY3VtZW50OiBEb2N1bWVudCwgaW5kZXg6IG51bWJlciwgY29sdW1uOiBUKSB7XG4gICAgICAgIHJldHVybiB0aGF0LmNyZWF0ZUNlbGwoZG9jdW1lbnQsIGluZGV4LCBjb2x1bW4pO1xuICAgICAgfVxuXG4gICAgICBwcm90ZWN0ZWQgdXBkYXRlQ2VsbChub2RlOiBIVE1MRWxlbWVudCwgaW5kZXg6IG51bWJlciwgY29sdW1uOiBUKSB7XG4gICAgICAgIHJldHVybiB0aGF0LnVwZGF0ZUNlbGwobm9kZSwgaW5kZXgsIGNvbHVtbik7XG4gICAgICB9XG5cbiAgICAgIHByb3RlY3RlZCBmb3JFYWNoUm93KGNhbGxiYWNrOiAocm93OiBIVE1MRWxlbWVudCwgcm93SW5kZXg6IG51bWJlcikgPT4gdm9pZCkge1xuICAgICAgICByZXR1cm4gdGhhdC5mb3JFYWNoUm93KGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmNlbGwgPSBuZXcgTG9jYWxDZWxsKHRoaXMuaGVhZGVyLCB0aGlzLnN0eWxlLCB1bmRlZmluZWQsIC4uLiAob3B0aW9ucy5taXhpbnMgfHwgW10pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBnZXQgdGhlIGhlYWRlciByb290IGVsZW1lbnRcbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50fVxuICAgKi9cbiAgcHJvdGVjdGVkIGdldCBoZWFkZXIoKSB7XG4gICAgcmV0dXJuIDxIVE1MRWxlbWVudD50aGlzLnJvb3QucXVlcnlTZWxlY3RvcignaGVhZGVyID4gYXJ0aWNsZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIGdldCB0aGUgaGVhZGVyIHNjcm9sbGluZyBlbGVtZW50LCBpLmUgaXRzIHBhcmVudFxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9XG4gICAqL1xuICBwcm90ZWN0ZWQgZ2V0IGhlYWRlclNjcm9sbGVyKCkge1xuICAgIHJldHVybiA8SFRNTEVsZW1lbnQ+dGhpcy5yb290LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlcicpO1xuICB9XG5cbiAgLyoqXG4gICAqIGFkZCBhbm90aGVyIGNvbHVtbiBtaXhpblxuICAgKiBAcGFyYW0ge0lNaXhpbkNsYXNzfSBtaXhpbkNsYXNzIG1peGluZyBjbGFzcyB0byBpbnN0YW50aWF0ZVxuICAgKiBAcGFyYW0gb3B0aW9ucyBvcHRpb25hbCBvcHRpb25zXG4gICAqL1xuICBwcm90ZWN0ZWQgYWRkQ29sdW1uTWl4aW4obWl4aW5DbGFzczogSU1peGluQ2xhc3MsIG9wdGlvbnM/OiBhbnkpIHtcbiAgICB0aGlzLmNlbGwuYWRkQ29sdW1uTWl4aW4obWl4aW5DbGFzcywgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogaW5pdGlhbGl6ZWQgdGhpcyByZW5kZXJlclxuICAgKi9cbiAgcHJvdGVjdGVkIGluaXQoKSB7XG5cbiAgICB0aGlzLmNlbGwuaW5pdCgpO1xuXG4gICAgY29uc3Qgc2Nyb2xsZXIgPSA8SFRNTEVsZW1lbnQ+dGhpcy5ib2R5LnBhcmVudEVsZW1lbnQ7XG5cbiAgICAvL3N5bmMgc2Nyb2xsaW5nIG9mIGhlYWRlciBhbmQgYm9keVxuICAgIGxldCBvbGRMZWZ0ID0gc2Nyb2xsZXIuc2Nyb2xsTGVmdDtcbiAgICBjb25zdCBoYW5kbGVyID0gKCkgPT4ge1xuICAgICAgY29uc3QgbGVmdCA9IHNjcm9sbGVyLnNjcm9sbExlZnQ7XG4gICAgICBpZiAoTWF0aC5hYnMob2xkTGVmdCAtIGxlZnQpIDwgdGhpcy5vcHRpb25zLm1pblNjcm9sbERlbHRhKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlzR29pbmdSaWdodCA9IGxlZnQgPiBvbGRMZWZ0O1xuICAgICAgb2xkTGVmdCA9IGxlZnQ7XG4gICAgICB0aGlzLm9uU2Nyb2xsZWRIb3Jpem9udGFsbHkobGVmdCwgc2Nyb2xsZXIuY2xpZW50V2lkdGgsIGlzR29pbmdSaWdodCk7XG4gICAgfTtcbiAgICBzY3JvbGxlci5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLmNyZWF0ZURlbGF5ZWRIYW5kbGVyKGhhbmRsZXIpKTtcblxuICAgIHN1cGVyLmluaXQoKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgc3VwZXIuZGVzdHJveSgpO1xuICAgIHRoaXMucm9vdC5yZW1vdmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiB3aWxsIGJlIGNhbGxlZCB3aGVuIHNjcm9sbGVkIGhvcml6b250YWxseVxuICAgKiBAcGFyYW0ge251bWJlcn0gc2Nyb2xsTGVmdFxuICAgKiBAcGFyYW0ge251bWJlcn0gY2xpZW50V2lkdGhcbiAgICogQHBhcmFtIHtib29sZWFufSBpc0dvaW5nUmlnaHRcbiAgICogQHJldHVybnMge0VTY3JvbGxSZXN1bHR9XG4gICAqL1xuICBwcm90ZWN0ZWQgb25TY3JvbGxlZEhvcml6b250YWxseShzY3JvbGxMZWZ0OiBudW1iZXIsIGNsaWVudFdpZHRoOiBudW1iZXIsIGlzR29pbmdSaWdodDogYm9vbGVhbik6IEVTY3JvbGxSZXN1bHQge1xuICAgIHJldHVybiB0aGlzLmNlbGwub25TY3JvbGxlZEhvcml6b250YWxseShzY3JvbGxMZWZ0LCBjbGllbnRXaWR0aCwgaXNHb2luZ1JpZ2h0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiB0aGUgY3VycmVudCByZW5kZXIgY29udGV4dCwgdXBvbiBjaGFuZ2UgYHJlY3JlYXRlYCB0aGUgd2hvbGUgdGFibGVcbiAgICogQHJldHVybnMge0lDZWxsUmVuZGVyQ29udGV4dH1cbiAgICovXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBnZXQgY29udGV4dCgpOiBJQ2VsbFJlbmRlckNvbnRleHQ8VD47XG5cbiAgLyoqXG4gICAqIGNyZWF0ZSBhIG5ldyBoZWFkZXIgbm9kZSBmb3IgdGhlIGdpdmVuIGNvbHVtblxuICAgKiBAcGFyYW0ge0RvY3VtZW50fSBkb2N1bWVudCBkb2N1bWVudCB0byBjcmVhdGUgbm9kZXMgb2ZcbiAgICogQHBhcmFtIHtUfSBjb2x1bW4gdGhlIGNvbHVtbiB0byBjcmVhdGUgdGhlIGhlYWRlciBmb3JcbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50fSB0aGUgbm9kZSByZXByZXNlbnRpbmcgdGhlIGhlYWRlclxuICAgKi9cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGNyZWF0ZUhlYWRlcihkb2N1bWVudDogRG9jdW1lbnQsIGNvbHVtbjogVCk6IEhUTUxFbGVtZW50O1xuXG4gIC8qKlxuICAgKiB1cGRhdGVzIHRoZSBnaXZlbiBoZWFkZXIgbm9kZSB3aXRoIHRoZSBnaXZlbiBjb2x1bW5cbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gbm9kZSBub2RlIHRvIHVwZGF0ZVxuICAgKiBAcGFyYW0ge1R9IGNvbHVtbiB0aGUgY29sdW1uIHRvIHJlcHJlc2VudHNcbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50IHwgdm9pZH0gYW4gb3B0aW9uYWwgbmV3IHJlcGxhY2VtZW50IG5vZGUgZm9yIHRoZSBoZWFkZXJcbiAgICovXG4gIHByb3RlY3RlZCBhYnN0cmFjdCB1cGRhdGVIZWFkZXIobm9kZTogSFRNTEVsZW1lbnQsIGNvbHVtbjogVCk6IEhUTUxFbGVtZW50IHwgdm9pZDtcblxuICAvKipcbiAgICogY3JlYXRlIGEgbmV3IGNlbGwgbm9kZSBmbyB0aGUgZ2l2ZW4gcm93IGluZGV4IGFuZCBjb2x1bW5cbiAgICogQHBhcmFtIHtEb2N1bWVudH0gZG9jdW1lbnQgZG9jdW1lbnQgdGhlIGNyZWF0ZSBub2RlcyBvZlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggdGhlIGN1cnJlbnQgcm93IGluZGV4XG4gICAqIEBwYXJhbSB7VH0gY29sdW1uIHRoZSBjdXJyZW50IGNvbHVtblxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9IHRoZSBub2RlIHJlcHJlc2VudGluZyB0aGUgY2VsbFxuICAgKi9cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGNyZWF0ZUNlbGwoZG9jdW1lbnQ6IERvY3VtZW50LCBpbmRleDogbnVtYmVyLCBjb2x1bW46IFQpOiBIVE1MRWxlbWVudDtcblxuICAvKipcbiAgICogdXBkYXRlcyB0aGUgZ2l2ZW4gY2VsbCBub2RlIHdpdGggdGhlIGdpdmVuIHJvdyBpbmRleCBhbmQgY29sdW1uXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGUgbm9kZSB0byB1cGRhdGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IHJvdyBpbmRleCB0byB1c2VcbiAgICogQHBhcmFtIHtUfSBjb2x1bW4gY29sdW1uIHRvIHVzZVxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnQgfCB2b2lkfSBhbiBvcHRpb25hbCBuZXcgcmVwbGFjZW1lbnQgbm9kZSBmb3IgdGhlIGhlYWRlclxuICAgKi9cbiAgcHJvdGVjdGVkIGFic3RyYWN0IHVwZGF0ZUNlbGwobm9kZTogSFRNTEVsZW1lbnQsIGluZGV4OiBudW1iZXIsIGNvbHVtbjogVCk6IEhUTUxFbGVtZW50IHwgdm9pZDtcblxuICAvKipcbiAgICogdHJpZ2dlciB0byB1cGRhdGUgYWxsIGhlYWRlcnNcbiAgICovXG4gIHByb3RlY3RlZCB1cGRhdGVIZWFkZXJzKCkge1xuICAgIHRoaXMuY2VsbC51cGRhdGVIZWFkZXJzKCk7XG4gIH1cblxuICAvKipcbiAgICogdHJpZ2dlcnMgdG8gdXBkYXRlIGFsbCBjb2x1bW4gd2lkdGhzXG4gICAqL1xuICBwcm90ZWN0ZWQgdXBkYXRlQ29sdW1uV2lkdGhzKCkge1xuICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG4gICAgdGhpcy5zdHlsZS51cGRhdGUoY29udGV4dC5kZWZhdWx0Um93SGVpZ2h0IC0gY29udGV4dC5wYWRkaW5nKC0xKSwgY29udGV4dC5jb2x1bW5zLCBjb250ZXh0LmNvbHVtbi5wYWRkaW5nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiB0cmlnZ2VycyB0byByZWNyZWF0ZSB0aGUgd2hvbGUgdGFibGVcbiAgICogQHBhcmFtIHtJQW5pbWF0aW9uQ29udGV4dH0gY3R4IG9wdGlvbmFsIGFuaW1hdGlvbiBjb250ZXh0XG4gICAqL1xuICBwcm90ZWN0ZWQgcmVjcmVhdGUoY3R4PzogSUFuaW1hdGlvbkNvbnRleHQpIHtcbiAgICBjb25zdCBzY3JvbGxlciA9IHRoaXMuYm9keVNjcm9sbGVyO1xuICAgIGNvbnN0IG9sZExlZnQgPSBzY3JvbGxlci5zY3JvbGxMZWZ0O1xuICAgIHRoaXMuY2VsbC5yZWNyZWF0ZShvbGRMZWZ0LCBzY3JvbGxlci5jbGllbnRXaWR0aCk7XG5cbiAgICBzdXBlci5yZWNyZWF0ZShjdHgpO1xuICAgIC8vIHJlc3RvcmUgbGVmdFxuICAgIHNjcm9sbGVyLnNjcm9sbExlZnQgPSBvbGRMZWZ0O1xuICB9XG5cbiAgcHJvdGVjdGVkIGNsZWFyUG9vbCgpIHtcbiAgICBzdXBlci5jbGVhclBvb2woKTtcbiAgICB0aGlzLmNlbGwuY2xlYXJQb29sKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgY3JlYXRlUm93KG5vZGU6IEhUTUxFbGVtZW50LCByb3dJbmRleDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5jZWxsLmNyZWF0ZVJvdyhub2RlLCByb3dJbmRleCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlUm93KG5vZGU6IEhUTUxFbGVtZW50LCByb3dJbmRleDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5jZWxsLnVwZGF0ZVJvdyhub2RlLCByb3dJbmRleCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQUNlbGxSZW5kZXJlcjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvQUNlbGxSZW5kZXJlci50cyJdLCJtYXBwaW5ncyI6IkFBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBUUE7QUFNQTtBQUNBO0FBREE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUtBO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUE2Q0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///11\n");

/***/ }),
/* 12 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return EAnimationMode; });\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = noAnimationChange;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__KeyFinder__ = __webpack_require__(5);\n/* unused harmony reexport KeyFinder */\n\r\nvar EAnimationMode;\r\n(function (EAnimationMode) {\r\n    EAnimationMode[EAnimationMode[\"UPDATE\"] = 0] = \"UPDATE\";\r\n    EAnimationMode[EAnimationMode[\"UPDATE_CREATE\"] = 1] = \"UPDATE_CREATE\";\r\n    EAnimationMode[EAnimationMode[\"UPDATE_REMOVE\"] = 2] = \"UPDATE_REMOVE\";\r\n    EAnimationMode[EAnimationMode[\"SHOW\"] = 3] = \"SHOW\";\r\n    EAnimationMode[EAnimationMode[\"HIDE\"] = 4] = \"HIDE\";\r\n})(EAnimationMode || (EAnimationMode = {}));\r\nconst NO_CHANGE_DELTA = 1;\r\nfunction noAnimationChange({ previous, mode, nodeY, current }, previousHeight, currentHeight) {\r\n    const prev = previous.height == null ? previousHeight : previous.height;\r\n    const curr = current.height == null ? currentHeight : current.height;\r\n    return mode === EAnimationMode.UPDATE && (Math.abs(previous.y - nodeY) <= NO_CHANGE_DELTA) && (Math.abs(prev - curr) <= NO_CHANGE_DELTA);\r\n}\r\nconst MAX_ANIMATION_TIME = 1100;\r\nconst defaultPhases = [\r\n    {\r\n        delay: 0,\r\n        apply({ mode, previous, nodeY, current, node }) {\r\n            node.dataset.animation = EAnimationMode[mode].toLowerCase();\r\n            node.style.transform = `translate(0, ${previous.y - nodeY}px)`;\r\n            if (mode === EAnimationMode.SHOW) {\r\n                node.style.height = current.height !== null ? `${current.height}px` : null;\r\n            }\r\n            else {\r\n                node.style.height = `${previous.height}px`;\r\n            }\r\n            node.style.opacity = mode === EAnimationMode.SHOW ? '0' : (mode === EAnimationMode.HIDE ? '1' : null);\r\n        }\r\n    },\r\n    {\r\n        delay: 10,\r\n        apply({ mode, current, nodeY, node }) {\r\n            node.style.transform = (mode === EAnimationMode.HIDE || mode === EAnimationMode.UPDATE_REMOVE) ? `translate(0, ${current.y - nodeY}px)` : null;\r\n            if (mode !== EAnimationMode.HIDE) {\r\n                node.style.height = current.height !== null ? `${current.height}px` : null;\r\n            }\r\n            node.style.opacity = mode === EAnimationMode.SHOW ? '1' : (mode === EAnimationMode.HIDE ? '0' : null);\r\n        }\r\n    },\r\n    {\r\n        delay: MAX_ANIMATION_TIME,\r\n        apply({ node }) {\r\n            delete node.dataset.animation;\r\n            node.style.opacity = null;\r\n            node.style.transform = null;\r\n        }\r\n    }\r\n];\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = defaultPhases;\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2FuaW1hdGlvbi9pbmRleC50cz80M2IwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SUV4Y2VwdGlvbkNvbnRleHR9IGZyb20gJy4uL2xvZ2ljJztcbmltcG9ydCBLZXlGaW5kZXIgZnJvbSAnLi9LZXlGaW5kZXInO1xuXG5leHBvcnQge2RlZmF1bHQgYXMgS2V5RmluZGVyfSBmcm9tICcuL0tleUZpbmRlcic7XG5cbmV4cG9ydCBlbnVtIEVBbmltYXRpb25Nb2RlIHtcbiAgVVBEQVRFLFxuICBVUERBVEVfQ1JFQVRFLFxuICBVUERBVEVfUkVNT1ZFLFxuICBTSE9XLFxuICBISURFXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUFuaW1hdGlvbkl0ZW0ge1xuICBtb2RlOiBFQW5pbWF0aW9uTW9kZTtcbiAgbm9kZTogSFRNTEVsZW1lbnQ7XG4gIGtleTogc3RyaW5nO1xuXG4gIHByZXZpb3VzOiB7XG4gICAgaW5kZXg6IG51bWJlciB8IC0xO1xuICAgIHk6IG51bWJlcjtcbiAgICBoZWlnaHQ6IG51bWJlciB8IG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIHBvc2l0aW9uIG9mIHRoZSBhZGRlZCBub2RlIGNvbnNpZGVyaW5nIHRoZSBwcmV2aW91cyBoZWlnaHRcbiAgICovXG4gIG5vZGVZOiBudW1iZXI7XG4gIC8qKlxuICAgKiBwb3NpdGlvbiBvZiB0aGUgYWRkZWQgbm9kZSBjb25zaWRlcmluZyB0aGUgY3VycmVudCBoZWlnaHRcbiAgICovXG4gIG5vZGVZQ3VycmVudEhlaWdodDogbnVtYmVyO1xuXG4gIGN1cnJlbnQ6IHtcbiAgICBpbmRleDogbnVtYmVyIHwgLTE7XG4gICAgeTogbnVtYmVyO1xuICAgIGhlaWdodDogbnVtYmVyIHwgbnVsbDtcbiAgfTtcbn1cblxuY29uc3QgTk9fQ0hBTkdFX0RFTFRBID0gMTtcblxuZXhwb3J0IGZ1bmN0aW9uIG5vQW5pbWF0aW9uQ2hhbmdlKHtwcmV2aW91cywgbW9kZSwgbm9kZVksIGN1cnJlbnR9OiBJQW5pbWF0aW9uSXRlbSwgcHJldmlvdXNIZWlnaHQ6IG51bWJlciwgY3VycmVudEhlaWdodDogbnVtYmVyKSB7XG4gIC8vIHNvdW5kcyBsaWtlIHRoZSBzYW1lXG4gIGNvbnN0IHByZXYgPSBwcmV2aW91cy5oZWlnaHQgPT0gbnVsbCA/IHByZXZpb3VzSGVpZ2h0IDogcHJldmlvdXMuaGVpZ2h0O1xuICBjb25zdCBjdXJyID0gY3VycmVudC5oZWlnaHQgPT0gbnVsbCA/IGN1cnJlbnRIZWlnaHQgOiBjdXJyZW50LmhlaWdodDtcbiAgcmV0dXJuIG1vZGUgPT09IEVBbmltYXRpb25Nb2RlLlVQREFURSAmJiAoTWF0aC5hYnMocHJldmlvdXMueSAtIG5vZGVZKSA8PSBOT19DSEFOR0VfREVMVEEpICYmIChNYXRoLmFicyhwcmV2IC0gY3VycikgPD0gTk9fQ0hBTkdFX0RFTFRBKTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUGhhc2Uge1xuICByZWFkb25seSBkZWxheTogbnVtYmVyO1xuXG4gIGFwcGx5KGl0ZW06IFJlYWRvbmx5PElBbmltYXRpb25JdGVtPiwgcHJldmlvdXNGaW5kZXI6IEtleUZpbmRlciwgY3VycmVudEZpbmRlcjogS2V5RmluZGVyKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQW5pbWF0aW9uQ29udGV4dCB7XG4gIHJlYWRvbmx5IHByZXZpb3VzOiBJRXhjZXB0aW9uQ29udGV4dDtcblxuICBwcmV2aW91c0tleShwcmV2aW91c1Jvd0luZGV4OiBudW1iZXIpOiBzdHJpbmc7XG5cbiAgY3VycmVudEtleShjdXJyZW50Um93SW5kZXg6IG51bWJlcik6IHN0cmluZztcblxuICBwaGFzZXM/OiBJUGhhc2VbXTtcbn1cblxuLyoqXG4gKiBtYXhpbWFsIGR1cmF0aW9uIG9mIGFsbCBhbmltYXRpb25zICsgZXh0cmEgd2FpdGluZyBiZWZvcmUgZS5nLiByb3dzIGFyZSByZWFsbHkgcmVtb3ZlZFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuY29uc3QgTUFYX0FOSU1BVElPTl9USU1FID0gMTEwMDtcblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRQaGFzZXMgPSBbXG4gIHtcbiAgICBkZWxheTogMCwgLy8gYmVmb3JlXG4gICAgYXBwbHkoe21vZGUsIHByZXZpb3VzLCBub2RlWSwgY3VycmVudCwgbm9kZX06IFJlYWRvbmx5PElBbmltYXRpb25JdGVtPikge1xuICAgICAgbm9kZS5kYXRhc2V0LmFuaW1hdGlvbiA9IEVBbmltYXRpb25Nb2RlW21vZGVdLnRvTG93ZXJDYXNlKCk7XG4gICAgICBub2RlLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMCwgJHtwcmV2aW91cy55IC0gbm9kZVl9cHgpYDtcbiAgICAgIGlmIChtb2RlID09PSBFQW5pbWF0aW9uTW9kZS5TSE9XKSB7XG4gICAgICAgIC8vIGFscmVhZHkgdGFyZ2V0IGhlaWdodFxuICAgICAgICBub2RlLnN0eWxlLmhlaWdodCA9IGN1cnJlbnQuaGVpZ2h0ICE9PSBudWxsID8gYCR7Y3VycmVudC5oZWlnaHR9cHhgIDogbnVsbDtcbiAgICAgIH0gZWxzZSB7IC8vIGFsd2F5cyBzZXQgcHJldmlvdXMgaGVpZ2h0IGZvciBkZWZhdWx0IGhlaWdodCBjaGFuZ2VzXG4gICAgICAgIG5vZGUuc3R5bGUuaGVpZ2h0ID0gYCR7cHJldmlvdXMuaGVpZ2h0fXB4YDtcbiAgICAgIH1cbiAgICAgIG5vZGUuc3R5bGUub3BhY2l0eSA9IG1vZGUgPT09IEVBbmltYXRpb25Nb2RlLlNIT1cgPyAnMCcgOiAobW9kZSA9PT0gRUFuaW1hdGlvbk1vZGUuSElERSA/ICcxJyA6IG51bGwpO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIGRlbGF5OiAxMCwgLy8gYWZ0ZXIgc29tZSBkZWxheSBmb3IgdGhlIGJlZm9yZSBwaGFzZSBoYXZlIGJlZW4gYXBwbGllZCB2aXN1YWxseVxuICAgIGFwcGx5KHttb2RlLCBjdXJyZW50LCBub2RlWSwgbm9kZX06IFJlYWRvbmx5PElBbmltYXRpb25JdGVtPikge1xuICAgICAgLy8gbnVsbCBmb3IgYWRkZWQvdXBkYXRlIHNpbmNlIGFscmVhZHkgYXQgdGhlIHJpZ2h0IHBvc2l0aW9uXG4gICAgICBub2RlLnN0eWxlLnRyYW5zZm9ybSA9IChtb2RlID09PSBFQW5pbWF0aW9uTW9kZS5ISURFIHx8IG1vZGUgPT09IEVBbmltYXRpb25Nb2RlLlVQREFURV9SRU1PVkUpID8gYHRyYW5zbGF0ZSgwLCAke2N1cnJlbnQueSAtIG5vZGVZfXB4KWAgOiBudWxsO1xuICAgICAgaWYgKG1vZGUgIT09IEVBbmltYXRpb25Nb2RlLkhJREUpIHsgLy8ga2VlcCBoZWlnaHQgZm9yIHJlbW92YWxcbiAgICAgICAgbm9kZS5zdHlsZS5oZWlnaHQgPSBjdXJyZW50LmhlaWdodCAhPT0gbnVsbCA/IGAke2N1cnJlbnQuaGVpZ2h0fXB4YCA6IG51bGw7XG4gICAgICB9XG4gICAgICBub2RlLnN0eWxlLm9wYWNpdHkgPSBtb2RlID09PSBFQW5pbWF0aW9uTW9kZS5TSE9XID8gJzEnIDogKG1vZGUgPT09IEVBbmltYXRpb25Nb2RlLkhJREUgPyAnMCcgOiBudWxsKTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICBkZWxheTogTUFYX0FOSU1BVElPTl9USU1FLCAvLyBjbGVhbnVwXG4gICAgYXBwbHkoe25vZGV9OiBSZWFkb25seTxJQW5pbWF0aW9uSXRlbT4pIHtcbiAgICAgIGRlbGV0ZSBub2RlLmRhdGFzZXQuYW5pbWF0aW9uO1xuICAgICAgbm9kZS5zdHlsZS5vcGFjaXR5ID0gbnVsbDtcbiAgICAgIG5vZGUuc3R5bGUudHJhbnNmb3JtID0gbnVsbDtcbiAgICB9XG4gIH1cbl07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2FuaW1hdGlvbi9pbmRleC50cyJdLCJtYXBwaW5ncyI6IkFBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE2QkE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBc0JBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///12\n");

/***/ }),
/* 13 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__logic__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__IMixin__ = __webpack_require__(6);\n\r\n\r\nclass PrefetchMixin {\r\n    constructor(adapter, options) {\r\n        this.adapter = adapter;\r\n        this.prefetchTimeout = -1;\r\n        this.options = {\r\n            prefetchRows: 20,\r\n            cleanUpRows: 3,\r\n            delay: 50\r\n        };\r\n        Object.assign(this.options, options);\r\n        return this;\r\n    }\r\n    prefetchDown() {\r\n        this.prefetchTimeout = -1;\r\n        const context = this.adapter.context;\r\n        const nextLast = Math.min(this.adapter.visible.last + this.options.prefetchRows, context.numberOfRows - 1);\r\n        if (this.adapter.visible.last === nextLast && this.adapter.visible.last >= (this.adapter.visible.forcedLast + this.options.prefetchRows)) {\r\n            return;\r\n        }\r\n        this.adapter.addAtBottom(this.adapter.visible.last + 1, nextLast);\r\n        this.adapter.visible.last = nextLast;\r\n    }\r\n    prefetchUp() {\r\n        this.prefetchTimeout = -1;\r\n        if (this.adapter.visible.first <= (this.adapter.visible.forcedFirst - this.options.prefetchRows)) {\r\n            return;\r\n        }\r\n        const context = this.adapter.context;\r\n        const scroller = this.adapter.scroller;\r\n        const fakeOffset = Math.max(scroller.scrollTop - this.options.prefetchRows * context.defaultRowHeight, 0);\r\n        const height = scroller.clientHeight;\r\n        const { first, firstRowPos } = Object(__WEBPACK_IMPORTED_MODULE_0__logic__[\"d\" /* range */])(fakeOffset, height, context.defaultRowHeight, context.exceptions, context.numberOfRows);\r\n        if (first === this.adapter.visible.first) {\r\n            return;\r\n        }\r\n        const frozenShift = this.adapter.syncFrozen ? this.adapter.syncFrozen(first) : 0;\r\n        this.adapter.addAtBeginning(first, this.adapter.visible.first - 1, frozenShift);\r\n        this.adapter.visible.first = first;\r\n        this.adapter.updateOffset(firstRowPos);\r\n    }\r\n    triggerPrefetch(isGoingDown) {\r\n        if (this.prefetchTimeout >= 0) {\r\n            clearTimeout(this.prefetchTimeout);\r\n        }\r\n        const prefetchDownPossible = this.adapter.visible.last < (this.adapter.visible.forcedLast + this.options.prefetchRows);\r\n        const prefetchUpPossible = this.adapter.visible.first > (this.adapter.visible.forcedFirst - this.options.prefetchRows);\r\n        const isLast = this.adapter.visible.last === this.adapter.context.numberOfRows;\r\n        const isFirst = this.adapter.visible.first === 0;\r\n        if ((isGoingDown && !prefetchDownPossible && !isLast) || (!isGoingDown && !prefetchUpPossible && !isFirst)) {\r\n            return;\r\n        }\r\n        const op = (isGoingDown || isFirst) ? this.prefetchDown.bind(this) : this.prefetchUp.bind(this);\r\n        this.prefetchTimeout = setTimeout(op, this.options.delay);\r\n    }\r\n    cleanUpTop(first) {\r\n        this.prefetchTimeout = -1;\r\n        const newFirst = Math.max(0, first - this.options.cleanUpRows);\r\n        if (newFirst <= this.adapter.visible.first) {\r\n            return;\r\n        }\r\n        const frozenShift = this.adapter.syncFrozen ? this.adapter.syncFrozen(newFirst) : 0;\r\n        this.adapter.removeFromBeginning(this.adapter.visible.first, newFirst - 1, frozenShift);\r\n        const context = this.adapter.context;\r\n        let shift = (newFirst - this.adapter.visible.first) * context.defaultRowHeight;\r\n        if (context.exceptions.length > 0) {\r\n            for (let i = this.adapter.visible.first; i < newFirst; ++i) {\r\n                if (context.exceptionsLookup.has(i)) {\r\n                    shift += context.exceptionsLookup.get(i) - context.defaultRowHeight;\r\n                }\r\n            }\r\n        }\r\n        this.adapter.visible.first = newFirst;\r\n        this.adapter.updateOffset(this.adapter.visibleFirstRowPos + shift);\r\n        this.prefetchDown();\r\n    }\r\n    cleanUpBottom(last) {\r\n        this.prefetchTimeout = -1;\r\n        const newLast = last + this.options.cleanUpRows;\r\n        if (this.adapter.visible.last <= newLast) {\r\n            return;\r\n        }\r\n        this.adapter.removeFromBottom(newLast + 1, this.adapter.visible.last);\r\n        this.adapter.visible.last = newLast;\r\n        this.prefetchUp();\r\n    }\r\n    triggerCleanUp(first, last, isGoingDown) {\r\n        if (this.prefetchTimeout >= 0) {\r\n            clearTimeout(this.prefetchTimeout);\r\n        }\r\n        if ((isGoingDown && (first - this.options.cleanUpRows) <= this.adapter.visible.first) || (!isGoingDown && this.adapter.visible.last <= (last + this.options.cleanUpRows))) {\r\n            return;\r\n        }\r\n        this.prefetchTimeout = setTimeout(isGoingDown ? this.cleanUpTop.bind(this) : this.cleanUpBottom.bind(this), this.options.delay, isGoingDown ? first : last);\r\n    }\r\n    onScrolled(isGoingDown, scrollResult) {\r\n        if (scrollResult === __WEBPACK_IMPORTED_MODULE_1__IMixin__[\"a\" /* EScrollResult */].NONE) {\r\n            if (this.options.cleanUpRows > 0) {\r\n                this.triggerCleanUp(this.adapter.visible.forcedFirst, this.adapter.visible.forcedLast, isGoingDown);\r\n            }\r\n        }\r\n        else if (this.options.prefetchRows > 0) {\r\n            this.triggerPrefetch(isGoingDown);\r\n        }\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = PrefetchMixin;\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL21peGluL1ByZWZldGNoTWl4aW4udHM/ZjIwNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3JhbmdlfSBmcm9tICcuLi9sb2dpYyc7XG5pbXBvcnQge0VTY3JvbGxSZXN1bHQsIElNaXhpbiwgSU1peGluQWRhcHRlcn0gZnJvbSAnLi9JTWl4aW4nO1xuXG5leHBvcnQgaW50ZXJmYWNlIElQcmVmZXRjaFJlbmRlcmVyT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBudW1iZXIgb2Ygcm93cyB0byBwcmVmZXRjaFxuICAgKiBAZGVmYXVsdCAyMFxuICAgKi9cbiAgcmVhZG9ubHkgcHJlZmV0Y2hSb3dzOiBudW1iZXI7XG4gIC8qKlxuICAgKiBudW1iZXIgb2Ygcm93cyBleHRyYSBiZWZvcmUgY2xlYW5pbmcgdGhlbSB1cFxuICAgKiBAZGVmYXVsdCAzXG4gICAqL1xuICByZWFkb25seSBjbGVhblVwUm93czogbnVtYmVyO1xuICAvKipcbiAgICogZGVsYXkgdG8gdHJpZ2dlciBhIHByZWZldGNoIG9yIGNsZWFuIHVwXG4gICAqIEBkZWZhdWx0IDUwbXNcbiAgICovXG4gIHJlYWRvbmx5IGRlbGF5OiBudW1iZXI7XG59XG5cbi8qKlxuICogbWl4aW4gdGhhdCBwcmVmZXRjaGVzIHJvd3MgZGVwZW5kaW5nIG9uIHRoZSBzY3JvbGxpbmcgZGlyZWN0aW9uIGZvciBmYXN0ZXIgcmVuZGVyaW5nXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByZWZldGNoTWl4aW4gaW1wbGVtZW50cyBJTWl4aW4ge1xuICBwcml2YXRlIHByZWZldGNoVGltZW91dDogbnVtYmVyID0gLTE7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBvcHRpb25zOiBJUHJlZmV0Y2hSZW5kZXJlck9wdGlvbnMgPSB7XG4gICAgcHJlZmV0Y2hSb3dzOiAyMCxcbiAgICBjbGVhblVwUm93czogMyxcbiAgICBkZWxheTogNTBcbiAgfTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGFkYXB0ZXI6IElNaXhpbkFkYXB0ZXIsIG9wdGlvbnM/OiBQYXJ0aWFsPElQcmVmZXRjaFJlbmRlcmVyT3B0aW9ucz4pIHtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuXG4gIHByaXZhdGUgcHJlZmV0Y2hEb3duKCkge1xuICAgIHRoaXMucHJlZmV0Y2hUaW1lb3V0ID0gLTE7XG4gICAgY29uc3QgY29udGV4dCA9IHRoaXMuYWRhcHRlci5jb250ZXh0O1xuICAgIGNvbnN0IG5leHRMYXN0ID0gTWF0aC5taW4odGhpcy5hZGFwdGVyLnZpc2libGUubGFzdCArIHRoaXMub3B0aW9ucy5wcmVmZXRjaFJvd3MsIGNvbnRleHQubnVtYmVyT2ZSb3dzIC0gMSk7XG4gICAgLy8gYWRkIHNvbWUgcm93cyBpbiBhZHZhbmNlXG4gICAgaWYgKHRoaXMuYWRhcHRlci52aXNpYmxlLmxhc3QgPT09IG5leHRMYXN0ICYmIHRoaXMuYWRhcHRlci52aXNpYmxlLmxhc3QgPj0gKHRoaXMuYWRhcHRlci52aXNpYmxlLmZvcmNlZExhc3QgKyB0aGlzLm9wdGlvbnMucHJlZmV0Y2hSb3dzKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuYWRhcHRlci5hZGRBdEJvdHRvbSh0aGlzLmFkYXB0ZXIudmlzaWJsZS5sYXN0ICsgMSwgbmV4dExhc3QpO1xuICAgIC8vY29uc29sZS5sb2coJ3ByZWZldGNoJywgdmlzaWJsZUZpcnN0LCB2aXNpYmxlTGFzdCArIDEsICc9PicsIG5leHRMYXN0LCByYW5raW5nLmNoaWxkcmVuLmxlbmd0aCk7XG4gICAgdGhpcy5hZGFwdGVyLnZpc2libGUubGFzdCA9IG5leHRMYXN0O1xuICB9XG5cbiAgcHJpdmF0ZSBwcmVmZXRjaFVwKCkge1xuICAgIHRoaXMucHJlZmV0Y2hUaW1lb3V0ID0gLTE7XG4gICAgaWYgKHRoaXMuYWRhcHRlci52aXNpYmxlLmZpcnN0IDw9ICh0aGlzLmFkYXB0ZXIudmlzaWJsZS5mb3JjZWRGaXJzdCAtIHRoaXMub3B0aW9ucy5wcmVmZXRjaFJvd3MhKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5hZGFwdGVyLmNvbnRleHQ7XG4gICAgY29uc3Qgc2Nyb2xsZXIgPSB0aGlzLmFkYXB0ZXIuc2Nyb2xsZXI7XG4gICAgY29uc3QgZmFrZU9mZnNldCA9IE1hdGgubWF4KHNjcm9sbGVyLnNjcm9sbFRvcCAtIHRoaXMub3B0aW9ucy5wcmVmZXRjaFJvd3MhICogY29udGV4dC5kZWZhdWx0Um93SGVpZ2h0LCAwKTtcbiAgICBjb25zdCBoZWlnaHQgPSBzY3JvbGxlci5jbGllbnRIZWlnaHQ7XG4gICAgY29uc3Qge2ZpcnN0LCBmaXJzdFJvd1Bvc30gPSByYW5nZShmYWtlT2Zmc2V0LCBoZWlnaHQsIGNvbnRleHQuZGVmYXVsdFJvd0hlaWdodCwgY29udGV4dC5leGNlcHRpb25zLCBjb250ZXh0Lm51bWJlck9mUm93cyk7XG5cbiAgICBpZiAoZmlyc3QgPT09IHRoaXMuYWRhcHRlci52aXNpYmxlLmZpcnN0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZnJvemVuU2hpZnQgPSB0aGlzLmFkYXB0ZXIuc3luY0Zyb3plbiA/IHRoaXMuYWRhcHRlci5zeW5jRnJvemVuKGZpcnN0KSA6IDA7XG5cbiAgICB0aGlzLmFkYXB0ZXIuYWRkQXRCZWdpbm5pbmcoZmlyc3QsIHRoaXMuYWRhcHRlci52aXNpYmxlLmZpcnN0IC0gMSwgZnJvemVuU2hpZnQpO1xuICAgIC8vY29uc29sZS5sb2coJ3ByZWZldGNoIHVwICcsIHZpc2libGVGaXJzdCwgJz0+JywgZmlyc3QsIHZpc2libGVMYXN0LCByYW5raW5nLmNoaWxkcmVuLmxlbmd0aCk7XG4gICAgdGhpcy5hZGFwdGVyLnZpc2libGUuZmlyc3QgPSBmaXJzdDtcblxuICAgIHRoaXMuYWRhcHRlci51cGRhdGVPZmZzZXQoZmlyc3RSb3dQb3MpO1xuICB9XG5cbiAgcHJpdmF0ZSB0cmlnZ2VyUHJlZmV0Y2goaXNHb2luZ0Rvd246IGJvb2xlYW4pIHtcbiAgICBpZiAodGhpcy5wcmVmZXRjaFRpbWVvdXQgPj0gMCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucHJlZmV0Y2hUaW1lb3V0KTtcbiAgICB9XG5cbiAgICBjb25zdCBwcmVmZXRjaERvd25Qb3NzaWJsZSA9IHRoaXMuYWRhcHRlci52aXNpYmxlLmxhc3QgPCAodGhpcy5hZGFwdGVyLnZpc2libGUuZm9yY2VkTGFzdCArIHRoaXMub3B0aW9ucy5wcmVmZXRjaFJvd3MpO1xuICAgIGNvbnN0IHByZWZldGNoVXBQb3NzaWJsZSA9IHRoaXMuYWRhcHRlci52aXNpYmxlLmZpcnN0ID4gKHRoaXMuYWRhcHRlci52aXNpYmxlLmZvcmNlZEZpcnN0IC0gdGhpcy5vcHRpb25zLnByZWZldGNoUm93cyk7XG5cbiAgICBjb25zdCBpc0xhc3QgPSB0aGlzLmFkYXB0ZXIudmlzaWJsZS5sYXN0ID09PSB0aGlzLmFkYXB0ZXIuY29udGV4dC5udW1iZXJPZlJvd3M7XG4gICAgY29uc3QgaXNGaXJzdCA9IHRoaXMuYWRhcHRlci52aXNpYmxlLmZpcnN0ID09PSAwO1xuXG4gICAgaWYgKChpc0dvaW5nRG93biAmJiAhcHJlZmV0Y2hEb3duUG9zc2libGUgJiYgIWlzTGFzdCkgfHwgKCFpc0dvaW5nRG93biAmJiAhcHJlZmV0Y2hVcFBvc3NpYmxlICYmICFpc0ZpcnN0KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGdvIGRvd24gaWYgd2UgYXJlIGFscmVhZHkgYXQgdGhlIHRvcCwgdG9vXG4gICAgY29uc3Qgb3AgPSAoaXNHb2luZ0Rvd24gfHwgaXNGaXJzdCkgPyB0aGlzLnByZWZldGNoRG93bi5iaW5kKHRoaXMpIDogdGhpcy5wcmVmZXRjaFVwLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLnByZWZldGNoVGltZW91dCA9IHNldFRpbWVvdXQob3AsIHRoaXMub3B0aW9ucy5kZWxheSk7XG4gIH1cblxuICBwcml2YXRlIGNsZWFuVXBUb3AoZmlyc3Q6IG51bWJlcikge1xuICAgIHRoaXMucHJlZmV0Y2hUaW1lb3V0ID0gLTE7XG4gICAgY29uc3QgbmV3Rmlyc3QgPSBNYXRoLm1heCgwLCBmaXJzdCAtIHRoaXMub3B0aW9ucy5jbGVhblVwUm93cyk7XG5cbiAgICBpZiAobmV3Rmlyc3QgPD0gdGhpcy5hZGFwdGVyLnZpc2libGUuZmlyc3QpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBmcm96ZW5TaGlmdCA9IHRoaXMuYWRhcHRlci5zeW5jRnJvemVuID8gdGhpcy5hZGFwdGVyLnN5bmNGcm96ZW4obmV3Rmlyc3QpIDogMDtcblxuICAgIHRoaXMuYWRhcHRlci5yZW1vdmVGcm9tQmVnaW5uaW5nKHRoaXMuYWRhcHRlci52aXNpYmxlLmZpcnN0LCBuZXdGaXJzdCAtIDEsIGZyb3plblNoaWZ0KTtcbiAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5hZGFwdGVyLmNvbnRleHQ7XG4gICAgLy9jb25zb2xlLmxvZygnY2xlYW51cCB1cCAnLCB2aXNpYmxlRmlyc3QsICc9PicsIG5ld0ZpcnN0LCB2aXNpYmxlTGFzdCwgcmFua2luZy5jaGlsZHJlbi5sZW5ndGgpO1xuICAgIGxldCBzaGlmdCA9IChuZXdGaXJzdCAtIHRoaXMuYWRhcHRlci52aXNpYmxlLmZpcnN0KSAqIGNvbnRleHQuZGVmYXVsdFJvd0hlaWdodDtcbiAgICBpZiAoY29udGV4dC5leGNlcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAobGV0IGkgPSB0aGlzLmFkYXB0ZXIudmlzaWJsZS5maXJzdDsgaSA8IG5ld0ZpcnN0OyArK2kpIHtcbiAgICAgICAgaWYgKGNvbnRleHQuZXhjZXB0aW9uc0xvb2t1cC5oYXMoaSkpIHtcbiAgICAgICAgICBzaGlmdCArPSBjb250ZXh0LmV4Y2VwdGlvbnNMb29rdXAuZ2V0KGkpISAtIGNvbnRleHQuZGVmYXVsdFJvd0hlaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmFkYXB0ZXIudmlzaWJsZS5maXJzdCA9IG5ld0ZpcnN0O1xuICAgIHRoaXMuYWRhcHRlci51cGRhdGVPZmZzZXQodGhpcy5hZGFwdGVyLnZpc2libGVGaXJzdFJvd1BvcyArIHNoaWZ0KTtcblxuICAgIHRoaXMucHJlZmV0Y2hEb3duKCk7XG4gIH1cblxuICBwcml2YXRlIGNsZWFuVXBCb3R0b20obGFzdDogbnVtYmVyKSB7XG4gICAgdGhpcy5wcmVmZXRjaFRpbWVvdXQgPSAtMTtcbiAgICBjb25zdCBuZXdMYXN0ID0gbGFzdCArIHRoaXMub3B0aW9ucy5jbGVhblVwUm93cztcbiAgICBpZiAodGhpcy5hZGFwdGVyLnZpc2libGUubGFzdCA8PSBuZXdMYXN0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuYWRhcHRlci5yZW1vdmVGcm9tQm90dG9tKG5ld0xhc3QgKyAxLCB0aGlzLmFkYXB0ZXIudmlzaWJsZS5sYXN0KTtcbiAgICAvL2NvbnNvbGUubG9nKCdjbGVhbnVwIGJvdHRvbScsIHZpc2libGVGaXJzdCwgdmlzaWJsZUxhc3QsICc9PicsIG5ld0xhc3QsIHJhbmtpbmcuY2hpbGRyZW4ubGVuZ3RoKTtcbiAgICB0aGlzLmFkYXB0ZXIudmlzaWJsZS5sYXN0ID0gbmV3TGFzdDtcblxuICAgIHRoaXMucHJlZmV0Y2hVcCgpO1xuICB9XG5cbiAgcHJpdmF0ZSB0cmlnZ2VyQ2xlYW5VcChmaXJzdDogbnVtYmVyLCBsYXN0OiBudW1iZXIsIGlzR29pbmdEb3duOiBib29sZWFuKSB7XG4gICAgaWYgKHRoaXMucHJlZmV0Y2hUaW1lb3V0ID49IDApIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnByZWZldGNoVGltZW91dCk7XG4gICAgfVxuICAgIGlmICgoaXNHb2luZ0Rvd24gJiYgKGZpcnN0IC0gdGhpcy5vcHRpb25zLmNsZWFuVXBSb3dzKSA8PSB0aGlzLmFkYXB0ZXIudmlzaWJsZS5maXJzdCkgfHwgKCFpc0dvaW5nRG93biAmJiB0aGlzLmFkYXB0ZXIudmlzaWJsZS5sYXN0IDw9IChsYXN0ICsgdGhpcy5vcHRpb25zLmNsZWFuVXBSb3dzKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnByZWZldGNoVGltZW91dCA9IHNldFRpbWVvdXQoaXNHb2luZ0Rvd24gPyB0aGlzLmNsZWFuVXBUb3AuYmluZCh0aGlzKSA6IHRoaXMuY2xlYW5VcEJvdHRvbS5iaW5kKHRoaXMpLCB0aGlzLm9wdGlvbnMuZGVsYXksIGlzR29pbmdEb3duID8gZmlyc3QgOiBsYXN0KTtcbiAgfVxuXG4gIG9uU2Nyb2xsZWQoaXNHb2luZ0Rvd246IGJvb2xlYW4sIHNjcm9sbFJlc3VsdDogRVNjcm9sbFJlc3VsdCkge1xuICAgIGlmIChzY3JvbGxSZXN1bHQgPT09IEVTY3JvbGxSZXN1bHQuTk9ORSkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5jbGVhblVwUm93cyA+IDApIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyQ2xlYW5VcCh0aGlzLmFkYXB0ZXIudmlzaWJsZS5mb3JjZWRGaXJzdCwgdGhpcy5hZGFwdGVyLnZpc2libGUuZm9yY2VkTGFzdCwgaXNHb2luZ0Rvd24pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLnByZWZldGNoUm93cyA+IDApIHtcbiAgICAgIHRoaXMudHJpZ2dlclByZWZldGNoKGlzR29pbmdEb3duKTtcbiAgICB9XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvbWl4aW4vUHJlZmV0Y2hNaXhpbi50cyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUF1QkE7QUFTQTtBQUFBO0FBUkE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///13\n");

/***/ }),
/* 14 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__ACellTableSection__ = __webpack_require__(15);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_0__ACellTableSection__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__MultiTableRowRenderer__ = __webpack_require__(16);\n/* unused harmony reexport default */\n\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3RhYmxlL2luZGV4LnRzP2QwYzYiXSwic291cmNlc0NvbnRlbnQiOlsiXG5leHBvcnQge0lDZWxsUmVuZGVyQ29udGV4dCBhcyBJVGFibGVDZWxsUmVuZGVyQ29udGV4dCwgQUNlbGxUYWJsZVNlY3Rpb259IGZyb20gJy4vQUNlbGxUYWJsZVNlY3Rpb24nO1xuZXhwb3J0IHtJTXVsdGlUYWJsZVJvd1JlbmRlcmVyT3B0aW9ucywgSVNlcGFyYXRvckZhY3RvcnksIElUYWJsZUZhY3RvcnksIElUYWJsZVNlY3Rpb24sIGRlZmF1bHR9IGZyb20gJy4vTXVsdGlUYWJsZVJvd1JlbmRlcmVyJztcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvdGFibGUvaW5kZXgudHMiXSwibWFwcGluZ3MiOiJBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///14\n");

/***/ }),
/* 15 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__ARowRenderer__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mixin__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__internal_ACellAdapter__ = __webpack_require__(9);\n\r\n\r\n\r\nclass ACellTableSection extends __WEBPACK_IMPORTED_MODULE_0__ARowRenderer__[\"b\" /* default */] {\r\n    constructor(header, body, tableId, style, options = {}) {\r\n        super(body, options);\r\n        this.header = header;\r\n        this.tableId = tableId;\r\n        this.style = style;\r\n        const that = this;\r\n        class LocalCell extends __WEBPACK_IMPORTED_MODULE_2__internal_ACellAdapter__[\"a\" /* default */] {\r\n            get context() {\r\n                return that.context;\r\n            }\r\n            createHeader(document, column) {\r\n                return that.createHeader(document, column);\r\n            }\r\n            updateHeader(node, column) {\r\n                return that.updateHeader(node, column);\r\n            }\r\n            createCell(document, index, column) {\r\n                return that.createCell(document, index, column);\r\n            }\r\n            updateCell(node, index, column) {\r\n                return that.updateCell(node, index, column);\r\n            }\r\n            forEachRow(callback) {\r\n                return that.forEachRow(callback);\r\n            }\r\n        }\r\n        this.cell = new LocalCell(this.header, this.style, tableId, ...(options.mixins || []));\r\n    }\r\n    addColumnMixin(mixinClass, options) {\r\n        this.cell.addColumnMixin(mixinClass, options);\r\n    }\r\n    get width() {\r\n        return this.context.column.totalHeight;\r\n    }\r\n    get hidden() {\r\n        return this.header.classList.contains('loading');\r\n    }\r\n    set hidden(value) {\r\n        const old = this.hidden;\r\n        if (old === value) {\r\n            return;\r\n        }\r\n        this.header.classList.toggle('loading', value);\r\n        this.body.classList.toggle('loading', value);\r\n        this.onVisibilityChanged(!value);\r\n    }\r\n    onVisibilityChanged(_visible) {\r\n    }\r\n    hide() {\r\n        this.hidden = true;\r\n    }\r\n    show(scrollLeft, clientWidth, isGoingRight) {\r\n        this.hidden = false;\r\n        this.cell.onScrolledHorizontally(scrollLeft, clientWidth, isGoingRight);\r\n    }\r\n    init() {\r\n        this.hide();\r\n        this.cell.init();\r\n        super.init();\r\n    }\r\n    destroy() {\r\n        super.destroy();\r\n        this.header.remove();\r\n        this.style.remove(this.tableId);\r\n    }\r\n    onScrolledVertically(scrollTop, clientHeight, isGoingDown) {\r\n        if (this.hidden) {\r\n            return __WEBPACK_IMPORTED_MODULE_1__mixin__[\"a\" /* EScrollResult */].NONE;\r\n        }\r\n        return super.onScrolledVertically(scrollTop, clientHeight, isGoingDown);\r\n    }\r\n    onScrolledHorizontally(scrollLeft, clientWidth, isGoingRight) {\r\n        return this.cell.onScrolledHorizontally(scrollLeft, clientWidth, isGoingRight);\r\n    }\r\n    updateHeaders() {\r\n        this.cell.updateHeaders();\r\n    }\r\n    updateColumnWidths() {\r\n        const context = this.context;\r\n        this.style.update(context.defaultRowHeight - context.padding(-1), context.columns, context.column.padding, this.tableId);\r\n    }\r\n    recreate(ctx) {\r\n        const scroller = this.bodyScroller;\r\n        const oldLeft = scroller.scrollLeft;\r\n        this.cell.recreate(oldLeft, scroller.clientWidth);\r\n        super.recreate(ctx);\r\n        scroller.scrollLeft = oldLeft;\r\n    }\r\n    clearPool() {\r\n        super.clearPool();\r\n        this.cell.clearPool();\r\n    }\r\n    createRow(node, rowIndex) {\r\n        this.cell.createRow(node, rowIndex);\r\n    }\r\n    updateRow(node, rowIndex) {\r\n        this.cell.updateRow(node, rowIndex);\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ACellTableSection;\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3RhYmxlL0FDZWxsVGFibGVTZWN0aW9uLnRzP2NiMjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtJQW5pbWF0aW9uQ29udGV4dH0gZnJvbSAnLi4vYW5pbWF0aW9uJztcbmltcG9ydCBBUm93UmVuZGVyZXIsIHtJUm93UmVuZGVyZXJPcHRpb25zfSBmcm9tICcuLi9BUm93UmVuZGVyZXInO1xuaW1wb3J0IHtFU2Nyb2xsUmVzdWx0LCBJTWl4aW5DbGFzc30gZnJvbSAnLi4vbWl4aW4nO1xuaW1wb3J0IEdyaWRTdHlsZU1hbmFnZXIgZnJvbSAnLi4vc3R5bGUvR3JpZFN0eWxlTWFuYWdlcic7XG5pbXBvcnQge0lDb2x1bW59IGZyb20gJy4uL3N0eWxlJztcbmltcG9ydCBBQ2VsbEFkYXB0ZXIsIHtJQ2VsbEFkYXB0ZXJSZW5kZXJDb250ZXh0fSBmcm9tICcuL2ludGVybmFsL0FDZWxsQWRhcHRlcic7XG5pbXBvcnQge0lUYWJsZVNlY3Rpb259IGZyb20gJy4vTXVsdGlUYWJsZVJvd1JlbmRlcmVyJztcblxuZXhwb3J0IGRlY2xhcmUgdHlwZSBJQ2VsbFJlbmRlckNvbnRleHQ8VCBleHRlbmRzIElDb2x1bW4+ID0gSUNlbGxBZGFwdGVyUmVuZGVyQ29udGV4dDxUPjtcblxuLyoqXG4gKiBiYXNlIGNsYXNzIGZvciBhIGNlbGwgcmVuZGVyZXIgYXMgdGFibGUgc2VjdGlvblxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQUNlbGxUYWJsZVNlY3Rpb248VCBleHRlbmRzIElDb2x1bW4+IGV4dGVuZHMgQVJvd1JlbmRlcmVyIGltcGxlbWVudHMgSVRhYmxlU2VjdGlvbiB7XG4gIHByaXZhdGUgcmVhZG9ubHkgY2VsbDogQUNlbGxBZGFwdGVyPFQ+O1xuXG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCByZWFkb25seSBoZWFkZXI6IEhUTUxFbGVtZW50LCBib2R5OiBIVE1MRWxlbWVudCwgcHJvdGVjdGVkIHJlYWRvbmx5IHRhYmxlSWQ6IHN0cmluZywgcHJvdGVjdGVkIHJlYWRvbmx5IHN0eWxlOiBHcmlkU3R5bGVNYW5hZ2VyLCBvcHRpb25zOiBQYXJ0aWFsPElSb3dSZW5kZXJlck9wdGlvbnM+ID0ge30pIHtcbiAgICBzdXBlcihib2R5LCBvcHRpb25zKTtcblxuICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xuXG4gICAgY2xhc3MgTG9jYWxDZWxsIGV4dGVuZHMgQUNlbGxBZGFwdGVyPFQ+IHtcbiAgICAgIHByb3RlY3RlZCBnZXQgY29udGV4dCgpOiBJQ2VsbEFkYXB0ZXJSZW5kZXJDb250ZXh0PFQ+IHtcbiAgICAgICAgcmV0dXJuIHRoYXQuY29udGV4dDtcbiAgICAgIH1cblxuICAgICAgcHJvdGVjdGVkIGNyZWF0ZUhlYWRlcihkb2N1bWVudDogRG9jdW1lbnQsIGNvbHVtbjogVCkge1xuICAgICAgICByZXR1cm4gdGhhdC5jcmVhdGVIZWFkZXIoZG9jdW1lbnQsIGNvbHVtbik7XG4gICAgICB9XG5cbiAgICAgIHByb3RlY3RlZCB1cGRhdGVIZWFkZXIobm9kZTogSFRNTEVsZW1lbnQsIGNvbHVtbjogVCkge1xuICAgICAgICByZXR1cm4gdGhhdC51cGRhdGVIZWFkZXIobm9kZSwgY29sdW1uKTtcbiAgICAgIH1cblxuICAgICAgcHJvdGVjdGVkIGNyZWF0ZUNlbGwoZG9jdW1lbnQ6IERvY3VtZW50LCBpbmRleDogbnVtYmVyLCBjb2x1bW46IFQpIHtcbiAgICAgICAgcmV0dXJuIHRoYXQuY3JlYXRlQ2VsbChkb2N1bWVudCwgaW5kZXgsIGNvbHVtbik7XG4gICAgICB9XG5cbiAgICAgIHByb3RlY3RlZCB1cGRhdGVDZWxsKG5vZGU6IEhUTUxFbGVtZW50LCBpbmRleDogbnVtYmVyLCBjb2x1bW46IFQpIHtcbiAgICAgICAgcmV0dXJuIHRoYXQudXBkYXRlQ2VsbChub2RlLCBpbmRleCwgY29sdW1uKTtcbiAgICAgIH1cblxuICAgICAgcHJvdGVjdGVkIGZvckVhY2hSb3coY2FsbGJhY2s6IChyb3c6IEhUTUxFbGVtZW50LCByb3dJbmRleDogbnVtYmVyKSA9PiB2b2lkKSB7XG4gICAgICAgIHJldHVybiB0aGF0LmZvckVhY2hSb3coY2FsbGJhY2spO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuY2VsbCA9IG5ldyBMb2NhbENlbGwodGhpcy5oZWFkZXIsIHRoaXMuc3R5bGUsIHRhYmxlSWQsIC4uLihvcHRpb25zLm1peGlucyB8fCBbXSkpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGFkZENvbHVtbk1peGluKG1peGluQ2xhc3M6IElNaXhpbkNsYXNzLCBvcHRpb25zPzogYW55KSB7XG4gICAgdGhpcy5jZWxsLmFkZENvbHVtbk1peGluKG1peGluQ2xhc3MsIG9wdGlvbnMpO1xuICB9XG5cbiAgYWJzdHJhY3QgZ2V0IGlkKCk6IHN0cmluZztcblxuICBnZXQgd2lkdGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dC5jb2x1bW4udG90YWxIZWlnaHQ7XG4gIH1cblxuICBnZXQgaGlkZGVuKCkge1xuICAgIHJldHVybiB0aGlzLmhlYWRlci5jbGFzc0xpc3QuY29udGFpbnMoJ2xvYWRpbmcnKTtcbiAgfVxuXG4gIHNldCBoaWRkZW4odmFsdWU6IGJvb2xlYW4pIHtcbiAgICBjb25zdCBvbGQgPSB0aGlzLmhpZGRlbjtcbiAgICBpZiAob2xkID09PSB2YWx1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKCdsb2FkaW5nJywgdmFsdWUpO1xuICAgIHRoaXMuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdsb2FkaW5nJywgdmFsdWUpO1xuICAgIHRoaXMub25WaXNpYmlsaXR5Q2hhbmdlZCghdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIGhvb2sgd2hlbiB0aGUgdmlzaWJpbGl0eSBjaGFuZ2VzXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gX3Zpc2libGUgY3VycmVudCB2aXNpYmlsaXR5XG4gICAqL1xuICBwcm90ZWN0ZWQgb25WaXNpYmlsaXR5Q2hhbmdlZChfdmlzaWJsZTogYm9vbGVhbikge1xuICAgIC8vIGhvb2tcbiAgfVxuXG4gIGhpZGUoKSB7XG4gICAgdGhpcy5oaWRkZW4gPSB0cnVlO1xuICB9XG5cbiAgc2hvdyhzY3JvbGxMZWZ0OiBudW1iZXIsIGNsaWVudFdpZHRoOiBudW1iZXIsIGlzR29pbmdSaWdodDogYm9vbGVhbikge1xuICAgIHRoaXMuaGlkZGVuID0gZmFsc2U7XG4gICAgdGhpcy5jZWxsLm9uU2Nyb2xsZWRIb3Jpem9udGFsbHkoc2Nyb2xsTGVmdCwgY2xpZW50V2lkdGgsIGlzR29pbmdSaWdodCk7XG4gIH1cblxuICBpbml0KCkge1xuICAgIHRoaXMuaGlkZSgpOyAvLyBoaWRlIGJ5IGRlZmF1bHRcbiAgICB0aGlzLmNlbGwuaW5pdCgpO1xuICAgIHN1cGVyLmluaXQoKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgc3VwZXIuZGVzdHJveSgpO1xuICAgIHRoaXMuaGVhZGVyLnJlbW92ZSgpO1xuICAgIHRoaXMuc3R5bGUucmVtb3ZlKHRoaXMudGFibGVJZCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgb25TY3JvbGxlZFZlcnRpY2FsbHkoc2Nyb2xsVG9wOiBudW1iZXIsIGNsaWVudEhlaWdodDogbnVtYmVyLCBpc0dvaW5nRG93bjogYm9vbGVhbik6IEVTY3JvbGxSZXN1bHQge1xuICAgIGlmICh0aGlzLmhpZGRlbikge1xuICAgICAgcmV0dXJuIEVTY3JvbGxSZXN1bHQuTk9ORTtcbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLm9uU2Nyb2xsZWRWZXJ0aWNhbGx5KHNjcm9sbFRvcCwgY2xpZW50SGVpZ2h0LCBpc0dvaW5nRG93bik7XG4gIH1cblxuICBwcm90ZWN0ZWQgb25TY3JvbGxlZEhvcml6b250YWxseShzY3JvbGxMZWZ0OiBudW1iZXIsIGNsaWVudFdpZHRoOiBudW1iZXIsIGlzR29pbmdSaWdodDogYm9vbGVhbikge1xuICAgIHJldHVybiB0aGlzLmNlbGwub25TY3JvbGxlZEhvcml6b250YWxseShzY3JvbGxMZWZ0LCBjbGllbnRXaWR0aCwgaXNHb2luZ1JpZ2h0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiB0aGUgY3VycmVudCByZW5kZXIgY29udGV4dCwgdXBvbiBjaGFuZ2UgYHJlY3JlYXRlYCB0aGUgd2hvbGUgdGFibGVcbiAgICogQHJldHVybnMge0lDZWxsUmVuZGVyQ29udGV4dH1cbiAgICovXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBnZXQgY29udGV4dCgpOiBJQ2VsbFJlbmRlckNvbnRleHQ8VD47XG5cbiAgLyoqXG4gICAqIGNyZWF0ZSBhIG5ldyBoZWFkZXIgbm9kZSBmb3IgdGhlIGdpdmVuIGNvbHVtblxuICAgKiBAcGFyYW0ge0RvY3VtZW50fSBkb2N1bWVudCBkb2N1bWVudCB0byBjcmVhdGUgbm9kZXMgb2ZcbiAgICogQHBhcmFtIHtUfSBjb2x1bW4gdGhlIGNvbHVtbiB0byBjcmVhdGUgdGhlIGhlYWRlciBmb3JcbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50fSB0aGUgbm9kZSByZXByZXNlbnRpbmcgdGhlIGhlYWRlclxuICAgKi9cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGNyZWF0ZUhlYWRlcihkb2N1bWVudDogRG9jdW1lbnQsIGNvbHVtbjogVCk6IEhUTUxFbGVtZW50O1xuXG4gIC8qKlxuICAgKiB1cGRhdGVzIHRoZSBnaXZlbiBoZWFkZXIgbm9kZSB3aXRoIHRoZSBnaXZlbiBjb2x1bW5cbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gbm9kZSBub2RlIHRvIHVwZGF0ZVxuICAgKiBAcGFyYW0ge1R9IGNvbHVtbiB0aGUgY29sdW1uIHRvIHJlcHJlc2VudHNcbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50IHwgdm9pZH0gYW4gb3B0aW9uYWwgbmV3IHJlcGxhY2VtZW50IG5vZGUgZm9yIHRoZSBoZWFkZXJcbiAgICovXG4gIHByb3RlY3RlZCBhYnN0cmFjdCB1cGRhdGVIZWFkZXIobm9kZTogSFRNTEVsZW1lbnQsIGNvbHVtbjogVCk6IEhUTUxFbGVtZW50IHwgdm9pZDtcblxuICAvKipcbiAgICogY3JlYXRlIGEgbmV3IGNlbGwgbm9kZSBmbyB0aGUgZ2l2ZW4gcm93IGluZGV4IGFuZCBjb2x1bW5cbiAgICogQHBhcmFtIHtEb2N1bWVudH0gZG9jdW1lbnQgZG9jdW1lbnQgdGhlIGNyZWF0ZSBub2RlcyBvZlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggdGhlIGN1cnJlbnQgcm93IGluZGV4XG4gICAqIEBwYXJhbSB7VH0gY29sdW1uIHRoZSBjdXJyZW50IGNvbHVtblxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9IHRoZSBub2RlIHJlcHJlc2VudGluZyB0aGUgY2VsbFxuICAgKi9cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGNyZWF0ZUNlbGwoZG9jdW1lbnQ6IERvY3VtZW50LCBpbmRleDogbnVtYmVyLCBjb2x1bW46IFQpOiBIVE1MRWxlbWVudDtcblxuICAvKipcbiAgICogdXBkYXRlcyB0aGUgZ2l2ZW4gY2VsbCBub2RlIHdpdGggdGhlIGdpdmVuIHJvdyBpbmRleCBhbmQgY29sdW1uXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGUgbm9kZSB0byB1cGRhdGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IHJvdyBpbmRleCB0byB1c2VcbiAgICogQHBhcmFtIHtUfSBjb2x1bW4gY29sdW1uIHRvIHVzZVxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnQgfCB2b2lkfSBhbiBvcHRpb25hbCBuZXcgcmVwbGFjZW1lbnQgbm9kZSBmb3IgdGhlIGhlYWRlclxuICAgKi9cbiAgcHJvdGVjdGVkIGFic3RyYWN0IHVwZGF0ZUNlbGwobm9kZTogSFRNTEVsZW1lbnQsIGluZGV4OiBudW1iZXIsIGNvbHVtbjogVCk6IEhUTUxFbGVtZW50IHwgdm9pZDtcblxuXG4gIC8qKlxuICAgKiB0cmlnZ2VycyB1cGRhdGluZyB0aGUgaGVhZGVyXG4gICAqL1xuICBwcm90ZWN0ZWQgdXBkYXRlSGVhZGVycygpIHtcbiAgICB0aGlzLmNlbGwudXBkYXRlSGVhZGVycygpO1xuICB9XG5cbiAgLyoqXG4gICAqIHRyaWdnZXIgYW4gdXBkYXRlIGFsbCBhbGwgY29sdW1uIHdpZHRoc1xuICAgKi9cbiAgcHJvdGVjdGVkIHVwZGF0ZUNvbHVtbldpZHRocygpIHtcbiAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgIHRoaXMuc3R5bGUudXBkYXRlKGNvbnRleHQuZGVmYXVsdFJvd0hlaWdodCAtIGNvbnRleHQucGFkZGluZygtMSksIGNvbnRleHQuY29sdW1ucywgY29udGV4dC5jb2x1bW4ucGFkZGluZywgdGhpcy50YWJsZUlkKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZWNyZWF0ZShjdHg/OiBJQW5pbWF0aW9uQ29udGV4dCkge1xuICAgIGNvbnN0IHNjcm9sbGVyID0gdGhpcy5ib2R5U2Nyb2xsZXI7XG4gICAgY29uc3Qgb2xkTGVmdCA9IHNjcm9sbGVyLnNjcm9sbExlZnQ7XG4gICAgdGhpcy5jZWxsLnJlY3JlYXRlKG9sZExlZnQsIHNjcm9sbGVyLmNsaWVudFdpZHRoKTtcblxuICAgIHN1cGVyLnJlY3JlYXRlKGN0eCk7XG4gICAgLy8gcmVzdG9yZSBsZWZ0XG4gICAgc2Nyb2xsZXIuc2Nyb2xsTGVmdCA9IG9sZExlZnQ7XG4gIH1cblxuICBwcm90ZWN0ZWQgY2xlYXJQb29sKCkge1xuICAgIHN1cGVyLmNsZWFyUG9vbCgpO1xuICAgIHRoaXMuY2VsbC5jbGVhclBvb2woKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBjcmVhdGVSb3cobm9kZTogSFRNTEVsZW1lbnQsIHJvd0luZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLmNlbGwuY3JlYXRlUm93KG5vZGUsIHJvd0luZGV4KTtcbiAgfVxuXG4gIHByb3RlY3RlZCB1cGRhdGVSb3cobm9kZTogSFRNTEVsZW1lbnQsIHJvd0luZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLmNlbGwudXBkYXRlUm93KG5vZGUsIHJvd0luZGV4KTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy90YWJsZS9BQ2VsbFRhYmxlU2VjdGlvbi50cyJdLCJtYXBwaW5ncyI6IkFBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBUUE7QUFHQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBOENBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///15\n");

/***/ }),
/* 16 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__logic__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mixin__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__style_index__ = __webpack_require__(3);\n\r\n\r\n\r\nclass MultiTableRowRenderer {\r\n    constructor(node, htmlId, options = {}) {\r\n        this.node = node;\r\n        this.tableId = 0;\r\n        this.sections = [];\r\n        this.visible = {\r\n            first: 0,\r\n            forcedFirst: 0,\r\n            last: 0,\r\n            forcedLast: 0\r\n        };\r\n        this.options = {\r\n            columnPadding: 0\r\n        };\r\n        this.context = Object(__WEBPACK_IMPORTED_MODULE_0__logic__[\"e\" /* uniformContext */])(0, 500);\r\n        Object.assign(this.options, options);\r\n        node.innerHTML = `<header></header><main></main>`;\r\n        node.classList.add('lineup-engine', 'lineup-multi-engine');\r\n        this.style = new __WEBPACK_IMPORTED_MODULE_2__style_index__[\"a\" /* GridStyleManager */](this.node, htmlId);\r\n        const main = this.main;\r\n        let oldLeft = main.scrollLeft;\r\n        main.addEventListener('scroll', () => {\r\n            const left = main.scrollLeft;\r\n            if (left === oldLeft) {\r\n                return;\r\n            }\r\n            const isGoingRight = left > oldLeft;\r\n            oldLeft = left;\r\n            this.onScrolledHorizontally(left, main.clientWidth, isGoingRight);\r\n        });\r\n    }\r\n    update() {\r\n        this.context = Object(__WEBPACK_IMPORTED_MODULE_0__logic__[\"b\" /* nonUniformContext */])(this.sections.map((d) => d.width), NaN, this.options.columnPadding);\r\n        this.updateGrid();\r\n        this.onScrolledHorizontally(this.main.scrollLeft, this.main.clientWidth, false);\r\n    }\r\n    updateGrid() {\r\n        const content = __WEBPACK_IMPORTED_MODULE_2__style_index__[\"a\" /* GridStyleManager */].gridColumn(this.sections);\r\n        this.style.updateRule(`multiTableRule`, `${this.style.id} > header, ${this.style.id} > main { ${content} }`);\r\n    }\r\n    onScrolledHorizontally(scrollLeft, clientWidth, isGoingRight) {\r\n        const { first, last } = Object(__WEBPACK_IMPORTED_MODULE_0__logic__[\"d\" /* range */])(scrollLeft, clientWidth, this.context.defaultRowHeight, this.context.exceptions, this.context.numberOfRows);\r\n        const visible = this.visible;\r\n        visible.forcedFirst = first;\r\n        visible.forcedLast = last;\r\n        let offset = 0;\r\n        this.sections.forEach((s, i) => {\r\n            if (i >= first && i <= last) {\r\n                s.show(Math.max(0, scrollLeft - offset), Math.min(scrollLeft + clientWidth - offset, s.width), isGoingRight);\r\n            }\r\n            else {\r\n                s.hide();\r\n            }\r\n            offset += s.width;\r\n        });\r\n        visible.first = first;\r\n        visible.last = last;\r\n        return __WEBPACK_IMPORTED_MODULE_1__mixin__[\"a\" /* EScrollResult */].PARTIAL;\r\n    }\r\n    destroy() {\r\n        this.sections.forEach((d) => d.destroy());\r\n        this.node.remove();\r\n    }\r\n    get doc() {\r\n        return this.node.ownerDocument;\r\n    }\r\n    get header() {\r\n        return this.node.querySelector('header');\r\n    }\r\n    get main() {\r\n        return this.node.querySelector('main');\r\n    }\r\n    pushTable(factory, ...extras) {\r\n        const header = this.doc.createElement('article');\r\n        const body = this.doc.createElement('article');\r\n        const tableId = `T${this.tableId++}`;\r\n        const ids = this.style.tableIds(tableId);\r\n        header.id = ids.header;\r\n        body.id = ids.body;\r\n        this.header.appendChild(header);\r\n        this.main.appendChild(body);\r\n        const table = factory(header, body, tableId, this.style, ...extras);\r\n        table.init();\r\n        this.sections.push(table);\r\n        this.update();\r\n        return table;\r\n    }\r\n    pushSeparator(factory, ...extras) {\r\n        const header = this.doc.createElement('section');\r\n        const body = this.doc.createElement('section');\r\n        this.header.appendChild(header);\r\n        this.main.appendChild(body);\r\n        const separator = factory(header, body, this.style, ...extras);\r\n        separator.init();\r\n        this.sections.push(separator);\r\n        this.update();\r\n        return separator;\r\n    }\r\n    remove(section) {\r\n        const index = this.sections.indexOf(section);\r\n        if (index < 0) {\r\n            return false;\r\n        }\r\n        this.sections.splice(index, 1);\r\n        section.destroy();\r\n        this.update();\r\n        return true;\r\n    }\r\n    widthChanged() {\r\n        this.update();\r\n    }\r\n}\n/* unused harmony export default */\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3RhYmxlL011bHRpVGFibGVSb3dSZW5kZXJlci50cz80ZDY5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SUV4Y2VwdGlvbkNvbnRleHQsIG5vblVuaWZvcm1Db250ZXh0LCByYW5nZSwgdW5pZm9ybUNvbnRleHR9IGZyb20gJy4uL2xvZ2ljJztcbmltcG9ydCB7RVNjcm9sbFJlc3VsdH0gZnJvbSAnLi4vbWl4aW4nO1xuaW1wb3J0IHtHcmlkU3R5bGVNYW5hZ2VyfSBmcm9tICcuLi9zdHlsZS9pbmRleCc7XG5cbi8qKlxuICogYmFzaWMgaW50ZXJmYWNlIG9mIGEgdGFibGUgc2VjdGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIElUYWJsZVNlY3Rpb24ge1xuICByZWFkb25seSBpZDogc3RyaW5nO1xuICByZWFkb25seSB3aWR0aDogbnVtYmVyO1xuXG4gIGluaXQoKTogdm9pZDtcblxuICAvKipcbiAgICogc2hvdyB0aGUgc2VjdGlvblxuICAgKiBAcGFyYW0ge251bWJlcn0gbGVmdCBsZWZ0IG1hcmdpblxuICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGggdmlzaWJsZSB3aWR0aFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzR29pbmdSaWdodCB3aGV0aGVyIGl0IHdhcyBhIHNoaWZ0IHRvIHRoZSByaWdodFxuICAgKi9cbiAgc2hvdyhsZWZ0OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGlzR29pbmdSaWdodDogYm9vbGVhbik6IHZvaWQ7XG5cbiAgaGlkZSgpOiB2b2lkO1xuXG4gIGRlc3Ryb3koKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJVGFibGVGYWN0b3J5PFQgZXh0ZW5kcyBJVGFibGVTZWN0aW9uPiB7XG4gIChoZWFkZXI6IEhUTUxFbGVtZW50LCBib2R5OiBIVE1MRWxlbWVudCwgdGFibGVJZDogc3RyaW5nLCBzdHlsZTogR3JpZFN0eWxlTWFuYWdlciwgLi4uZXh0cmFzOiBhbnlbXSk6IFQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNlcGFyYXRvckZhY3Rvcnk8VCBleHRlbmRzIElUYWJsZVNlY3Rpb24+IHtcbiAgKGhlYWRlcjogSFRNTEVsZW1lbnQsIGJvZHk6IEhUTUxFbGVtZW50LCBzdHlsZTogR3JpZFN0eWxlTWFuYWdlciwgLi4uZXh0cmFzOiBhbnlbXSk6IFQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSU11bHRpVGFibGVSb3dSZW5kZXJlck9wdGlvbnMge1xuICAvKipcbiAgICogY29sdW1uIHBhZGRpbmcgdG8gdXNlIGJldHdlZW4gY29sdW1uc1xuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuICBjb2x1bW5QYWRkaW5nOiBudW1iZXI7XG59XG5cbi8qKlxuICogbWFuYWdlciBvZiBtdWx0aXBsZSBjb2x1bW5zIHNlcGFyYXRlZCBieSBzZXBhcmF0b3JzIGVhY2ggYW4gb3duIHJvdyByZW5kZXJlclxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNdWx0aVRhYmxlUm93UmVuZGVyZXIge1xuXG4gIHJlYWRvbmx5IHN0eWxlOiBHcmlkU3R5bGVNYW5hZ2VyO1xuICBwcml2YXRlIHRhYmxlSWQgPSAwO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgc2VjdGlvbnM6IElUYWJsZVNlY3Rpb25bXSA9IFtdO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgdmlzaWJsZSA9IHtcbiAgICBmaXJzdDogMCxcbiAgICBmb3JjZWRGaXJzdDogMCxcbiAgICBsYXN0OiAwLFxuICAgIGZvcmNlZExhc3Q6IDBcbiAgfTtcblxuICBwcml2YXRlIHJlYWRvbmx5IG9wdGlvbnM6IFJlYWRvbmx5PElNdWx0aVRhYmxlUm93UmVuZGVyZXJPcHRpb25zPiA9IHtcbiAgICBjb2x1bW5QYWRkaW5nOiAwXG4gIH07XG5cbiAgcHJpdmF0ZSBjb250ZXh0OiBJRXhjZXB0aW9uQ29udGV4dCA9IHVuaWZvcm1Db250ZXh0KDAsIDUwMCk7XG5cbiAgY29uc3RydWN0b3IocHVibGljIHJlYWRvbmx5IG5vZGU6IEhUTUxFbGVtZW50LCBodG1sSWQ6IHN0cmluZywgb3B0aW9uczogUGFydGlhbDxJTXVsdGlUYWJsZVJvd1JlbmRlcmVyT3B0aW9ucz4gPSB7fSkge1xuICAgIE9iamVjdC5hc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKTtcbiAgICBub2RlLmlubmVySFRNTCA9IGA8aGVhZGVyPjwvaGVhZGVyPjxtYWluPjwvbWFpbj5gO1xuICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnbGluZXVwLWVuZ2luZScsICdsaW5ldXAtbXVsdGktZW5naW5lJyk7XG5cbiAgICB0aGlzLnN0eWxlID0gbmV3IEdyaWRTdHlsZU1hbmFnZXIodGhpcy5ub2RlLCBodG1sSWQpO1xuXG4gICAgY29uc3QgbWFpbiA9IHRoaXMubWFpbjtcbiAgICBsZXQgb2xkTGVmdCA9IG1haW4uc2Nyb2xsTGVmdDtcbiAgICBtYWluLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGxlZnQgPSBtYWluLnNjcm9sbExlZnQ7XG4gICAgICBpZiAobGVmdCA9PT0gb2xkTGVmdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBpc0dvaW5nUmlnaHQgPSBsZWZ0ID4gb2xkTGVmdDtcbiAgICAgIG9sZExlZnQgPSBsZWZ0O1xuICAgICAgdGhpcy5vblNjcm9sbGVkSG9yaXpvbnRhbGx5KGxlZnQsIG1haW4uY2xpZW50V2lkdGgsIGlzR29pbmdSaWdodCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZSgpIHtcbiAgICB0aGlzLmNvbnRleHQgPSBub25Vbmlmb3JtQ29udGV4dCh0aGlzLnNlY3Rpb25zLm1hcCgoZCkgPT4gZC53aWR0aCksIE5hTiwgdGhpcy5vcHRpb25zLmNvbHVtblBhZGRpbmcpO1xuXG4gICAgdGhpcy51cGRhdGVHcmlkKCk7XG5cbiAgICB0aGlzLm9uU2Nyb2xsZWRIb3Jpem9udGFsbHkodGhpcy5tYWluLnNjcm9sbExlZnQsIHRoaXMubWFpbi5jbGllbnRXaWR0aCwgZmFsc2UpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVHcmlkKCkge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBHcmlkU3R5bGVNYW5hZ2VyLmdyaWRDb2x1bW4odGhpcy5zZWN0aW9ucyk7XG4gICAgdGhpcy5zdHlsZS51cGRhdGVSdWxlKGBtdWx0aVRhYmxlUnVsZWAsIGAke3RoaXMuc3R5bGUuaWR9ID4gaGVhZGVyLCAke3RoaXMuc3R5bGUuaWR9ID4gbWFpbiB7ICR7Y29udGVudH0gfWApO1xuICB9XG5cbiAgcHJpdmF0ZSBvblNjcm9sbGVkSG9yaXpvbnRhbGx5KHNjcm9sbExlZnQ6IG51bWJlciwgY2xpZW50V2lkdGg6IG51bWJlciwgaXNHb2luZ1JpZ2h0OiBib29sZWFuKSB7XG4gICAgY29uc3Qge2ZpcnN0LCBsYXN0fSA9IHJhbmdlKHNjcm9sbExlZnQsIGNsaWVudFdpZHRoLCB0aGlzLmNvbnRleHQuZGVmYXVsdFJvd0hlaWdodCwgdGhpcy5jb250ZXh0LmV4Y2VwdGlvbnMsIHRoaXMuY29udGV4dC5udW1iZXJPZlJvd3MpO1xuXG4gICAgY29uc3QgdmlzaWJsZSA9IHRoaXMudmlzaWJsZTtcbiAgICB2aXNpYmxlLmZvcmNlZEZpcnN0ID0gZmlyc3Q7XG4gICAgdmlzaWJsZS5mb3JjZWRMYXN0ID0gbGFzdDtcblxuICAgIGxldCBvZmZzZXQgPSAwO1xuICAgIHRoaXMuc2VjdGlvbnMuZm9yRWFjaCgocywgaSkgPT4ge1xuICAgICAgaWYgKGkgPj0gZmlyc3QgJiYgaSA8PSBsYXN0KSB7XG4gICAgICAgIHMuc2hvdyhNYXRoLm1heCgwLCBzY3JvbGxMZWZ0IC0gb2Zmc2V0KSwgTWF0aC5taW4oc2Nyb2xsTGVmdCArIGNsaWVudFdpZHRoIC0gb2Zmc2V0LCBzLndpZHRoKSwgaXNHb2luZ1JpZ2h0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHMuaGlkZSgpO1xuICAgICAgfVxuICAgICAgb2Zmc2V0ICs9IHMud2lkdGg7XG4gICAgfSk7XG5cbiAgICB2aXNpYmxlLmZpcnN0ID0gZmlyc3Q7XG4gICAgdmlzaWJsZS5sYXN0ID0gbGFzdDtcbiAgICByZXR1cm4gRVNjcm9sbFJlc3VsdC5QQVJUSUFMO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnNlY3Rpb25zLmZvckVhY2goKGQpID0+IGQuZGVzdHJveSgpKTtcbiAgICB0aGlzLm5vZGUucmVtb3ZlKCk7XG4gIH1cblxuICBwcml2YXRlIGdldCBkb2MoKSB7XG4gICAgcmV0dXJuIHRoaXMubm9kZS5vd25lckRvY3VtZW50O1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgaGVhZGVyKCkge1xuICAgIHJldHVybiA8SFRNTEVsZW1lbnQ+dGhpcy5ub2RlLnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlcicpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgbWFpbigpIHtcbiAgICByZXR1cm4gPEhUTUxFbGVtZW50PnRoaXMubm9kZS5xdWVyeVNlbGVjdG9yKCdtYWluJyk7XG4gIH1cblxuICAvKipcbiAgICogcHVzaCBhbm90aGVyIHRhYmxlIHRvIHRoaXMgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtJVGFibGVGYWN0b3J5PFQgZXh0ZW5kcyBJVGFibGVTZWN0aW9uPn0gZmFjdG9yeSBmYWN0b3J5IGZvciB0aGUgdGFibGVcbiAgICogQHBhcmFtIGV4dHJhcyBhZGRpdGlvbmFsIGFyZ3VtZW50cyB0byBwcm92aWRlIGZvciB0aGUgZmFjdG9yeVxuICAgKiBAcmV0dXJucyB7VH0gdGhlIHRhYmxlIGluc3RhbmNlXG4gICAqL1xuICBwdXNoVGFibGU8VCBleHRlbmRzIElUYWJsZVNlY3Rpb24+KGZhY3Rvcnk6IElUYWJsZUZhY3Rvcnk8VD4sIC4uLmV4dHJhczogYW55W10pIHtcbiAgICBjb25zdCBoZWFkZXIgPSB0aGlzLmRvYy5jcmVhdGVFbGVtZW50KCdhcnRpY2xlJyk7XG4gICAgY29uc3QgYm9keSA9IHRoaXMuZG9jLmNyZWF0ZUVsZW1lbnQoJ2FydGljbGUnKTtcbiAgICBjb25zdCB0YWJsZUlkID0gYFQke3RoaXMudGFibGVJZCsrfWA7XG4gICAgY29uc3QgaWRzID0gdGhpcy5zdHlsZS50YWJsZUlkcyh0YWJsZUlkKTtcbiAgICBoZWFkZXIuaWQgPSBpZHMuaGVhZGVyO1xuICAgIGJvZHkuaWQgPSBpZHMuYm9keTtcbiAgICB0aGlzLmhlYWRlci5hcHBlbmRDaGlsZChoZWFkZXIpO1xuICAgIHRoaXMubWFpbi5hcHBlbmRDaGlsZChib2R5KTtcblxuICAgIGNvbnN0IHRhYmxlID0gZmFjdG9yeShoZWFkZXIsIGJvZHksIHRhYmxlSWQsIHRoaXMuc3R5bGUsIC4uLmV4dHJhcyk7XG4gICAgdGFibGUuaW5pdCgpO1xuICAgIHRoaXMuc2VjdGlvbnMucHVzaCh0YWJsZSk7XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgICByZXR1cm4gdGFibGU7XG4gIH1cblxuICAvKipcbiAgICogcHVzaCBhbm90aGVyIHNlcGFyYXRvciB0byB0aGUgbWFuYWdlclxuICAgKiBAcGFyYW0ge0lTZXBhcmF0b3JGYWN0b3J5PFQgZXh0ZW5kcyBJVGFibGVTZWN0aW9uPn0gZmFjdG9yeSB0aGUgZmFjdG9yeSB0byBjcmVhdGUgdGhlIHNlcGFyYXRvclxuICAgKiBAcGFyYW0gZXh0cmFzIG9wdGlvbmFsIGFkZGl0aW9uYWwgYXJndW1lbnRzXG4gICAqIEByZXR1cm5zIHtUfSB0aGUgbmV3IGNyZWF0ZWQgc2VwYXJhdG9yXG4gICAqL1xuICBwdXNoU2VwYXJhdG9yPFQgZXh0ZW5kcyBJVGFibGVTZWN0aW9uPihmYWN0b3J5OiBJU2VwYXJhdG9yRmFjdG9yeTxUPiwgLi4uZXh0cmFzOiBhbnlbXSkge1xuICAgIGNvbnN0IGhlYWRlciA9IHRoaXMuZG9jLmNyZWF0ZUVsZW1lbnQoJ3NlY3Rpb24nKTtcbiAgICBjb25zdCBib2R5ID0gdGhpcy5kb2MuY3JlYXRlRWxlbWVudCgnc2VjdGlvbicpO1xuICAgIHRoaXMuaGVhZGVyLmFwcGVuZENoaWxkKGhlYWRlcik7XG4gICAgdGhpcy5tYWluLmFwcGVuZENoaWxkKGJvZHkpO1xuXG4gICAgY29uc3Qgc2VwYXJhdG9yID0gZmFjdG9yeShoZWFkZXIsIGJvZHksIHRoaXMuc3R5bGUsIC4uLmV4dHJhcyk7XG4gICAgc2VwYXJhdG9yLmluaXQoKTtcbiAgICB0aGlzLnNlY3Rpb25zLnB1c2goc2VwYXJhdG9yKTtcbiAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIHJldHVybiBzZXBhcmF0b3I7XG4gIH1cblxuICAvKipcbiAgICogcmVtb3ZlcyBhIGdpdmVuIHRhYmxlIHNlY3Rpb25cbiAgICogQHBhcmFtIHtJVGFibGVTZWN0aW9ufSBzZWN0aW9uIHNlY3Rpb24gdG8gcmVtb3ZlXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBzdWNjZXNzZnVsIGZsYWdcbiAgICovXG4gIHJlbW92ZShzZWN0aW9uOiBJVGFibGVTZWN0aW9uKSB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLnNlY3Rpb25zLmluZGV4T2Yoc2VjdGlvbik7XG4gICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLnNlY3Rpb25zLnNwbGljZShpbmRleCwgMSk7XG4gICAgc2VjdGlvbi5kZXN0cm95KCk7XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiB0cmlnZ2VycyBhbmQgdXBkYXRlIGJlY2F1c2Ugb2YgYSBjaGFuZ2UgaW4gd2lkdGggb2Ygb25lIG9yIG1vcmUgdGFibGUgc2VjdGlvbnNcbiAgICovXG4gIHdpZHRoQ2hhbmdlZCgpIHtcbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9XG5cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvdGFibGUvTXVsdGlUYWJsZVJvd1JlbmRlcmVyLnRzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUEyQ0E7QUFvQkE7QUFBQTtBQWpCQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///16\n");

/***/ })
/******/ ]);
});