/*! For license information please see lineupengine.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.lineupengine=e():t.lineupengine=e()}(globalThis,(function(){return(()=>{"use strict";var t={d:(e,i)=>{for(var o in i)t.o(i,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:i[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{ABORTED:()=>l,ACellRenderer:()=>st,ACellTableSection:()=>at,ARowRenderer:()=>$,EAnimationMode:()=>m,EScrollResult:()=>R,GridStyleManager:()=>rt,KeyFinder:()=>y,MultiTableRowRenderer:()=>ht,PrefetchMixin:()=>lt,StyleManager:()=>tt,abortAble:()=>h,abortAbleAll:()=>d,abortAbleFetch:()=>c,abortAbleResolveNow:()=>p,buildId:()=>dt,defaultPhases:()=>g,frozenDelta:()=>H,isAbortAble:()=>u,isAsyncUpdate:()=>f,isLoadingCell:()=>G,isPromiseLike:()=>s,noAnimationChange:()=>v,nonUniformContext:()=>E,randomContext:()=>A,range:()=>F,setTemplate:()=>et,setTransform:()=>J,tableCSSClasses:()=>ot,tableIds:()=>it,uniformContext:()=>P,updateFrozen:()=>T,version:()=>ct});var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}var r=function(){return(r=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function n(t,e){for(var i=0,o=e.length,r=t.length;i<o;i++,r++)t[r]=e[i];return t}function s(t){return null!=t&&t&&"function"==typeof t.then}Object.create,Object.create;var l=Symbol("aborted");function a(t,e,i){return function(o,r){return{then:a(t.then((function(t){var i=e()?l:t,r=o?o(i):i;return s(r)?r.then((function(t){return e()?l:t})):e()?l:r})),e,i),abort:i,isAborted:e}}}function h(t){var e=null,i=function(){return null===e},o=new Promise((function(t){e=t})),r=function(){null!=e&&(e(l),e=null)};return{then:a(Promise.race([o,t]),i,r),abort:r,isAborted:i}}function c(t,e){var i=new AbortController,o=new Promise((function(o,n){var s=fetch(t,r({signal:i.signal},e||{}));s.then(o),s.catch((function(t){t instanceof DOMException?o(l):n(t)}))})),n=i.abort.bind(i),s=function(){return i.signal.aborted};return{then:a(o,s,n),abort:n,isAborted:s}}function d(t){var e=Promise.all(t),i=null,o=function(){return null===i},r=new Promise((function(t){i=t})),n=function(){if(null!=i){i(l);for(var e=0,o=t;e<o.length;e++){var r=o[e];u(r)&&r.abort()}i=null}};return{then:a(Promise.race([r,e]),o,n),abort:n,isAborted:o}}function u(t){return null!=t&&t&&"function"==typeof t.then&&"function"==typeof t.abort}function f(t){return null!=t&&t&&u(t.ready)}function p(t){return{then:function(e,i){var o=e?e(t):t;return u(o)?o:s(o)?h(o):{then:p(o),abort:function(){},isAborted:function(){return!1}}},abort:function(){},isAborted:function(){return!1}}}const y=function(){function t(t,e){var i=this;this.context=t,this.key=e,this.cache=[],this.lastFilled=0,this.key2index=new Map,this.context.exceptions.forEach((function(t){i.cache[t.index]=t.y,i.key2index.set(e(t.index),t.index)}))}return t.prototype.findValidStart=function(t){for(var e=t-1;e>=0;e-=1)if(void 0!==this.cache[e])return e;return-1},t.prototype.posByKey=function(t){var e=this.key2index.get(t);return null!=e?{index:e,pos:this.pos(e)}:this.fillCacheTillKey(t)},t.prototype.pos=function(t){if(0===this.context.exceptions.length)return t*this.context.defaultRowHeight;var e=this.cache[t];if(void 0!==e)return e;var i=this.findValidStart(t);return i<0?this.fillCache(0,t,0):this.fillCache(i+1,t,this.cache[i]+this.heightOf(i)),this.cache[t]},t.prototype.fillCache=function(t,e,i,o){if(e<=this.lastFilled){if(!o)return;for(var r=t;r<=e;r+=1)o(r,this.key(r),this.cache[r])}else{var n=i;for(r=t;r<=e;r+=1){this.cache[r]=n;var s=this.key(r);this.key2index.set(s,r),o&&o(r,s,n),n+=this.heightOf(r)}}},t.prototype.heightOf=function(t){var e;return null!==(e=this.context.exceptionsLookup.get(t))&&void 0!==e?e:this.context.defaultRowHeight},t.prototype.exceptionHeightOf=function(t,e){void 0===e&&(e=!1);var i=this.context.padding(t),o=this.context.exceptionsLookup.get(t);return null!=o?o-i:e?this.context.defaultRowHeight-i:null},t.prototype.padding=function(t){return this.context.padding(t)},t.prototype.fillCacheTillKey=function(t){for(var e=0,i=this.lastFilled;i<this.context.numberOfRows;i+=1,this.lastFilled+=1){var o=this.cache[i];if(void 0===o){var r=this.key(i);if(this.cache[i]=e,this.key2index.set(r,i),r===t)return{index:i,pos:e};e+=this.heightOf(i)}else e=o+this.heightOf(i)}return{index:-1,pos:-1}},t.prototype.positions=function(t,e,i,o){this.fillCache(t,e,i,o)},t}();var m;function v(t,e,i){var o=t.previous,r=t.mode,n=t.nodeY,s=t.current,l=null==o.height?e:o.height,a=null==s.height?i:s.height;return r===m.UPDATE&&Math.abs(o.y-n)<=1&&Math.abs(l-a)<=1}!function(t){t[t.UPDATE=0]="UPDATE",t[t.UPDATE_CREATE=1]="UPDATE_CREATE",t[t.UPDATE_REMOVE=2]="UPDATE_REMOVE",t[t.SHOW=3]="SHOW",t[t.HIDE=4]="HIDE"}(m||(m={}));var g=[{delay:0,apply:function(t){var e=t.mode,i=t.previous,o=t.nodeY,r=t.current,n=t.node;n.dataset.animation=m[e].toLowerCase(),n.style.transform="translate(0, "+(i.y-o)+"px)",e===m.SHOW?n.style.height=null!==r.height?r.height+"px":null:n.style.height=i.height+"px",e===m.SHOW?n.style.opacity="0":e===m.HIDE?n.style.opacity="1":n.style.opacity=null}},{delay:10,apply:function(t){var e=t.mode,i=t.current,o=t.nodeY,r=t.node;r.style.transform=e===m.HIDE||e===m.UPDATE_REMOVE?"translate(0, "+(i.y-o)+"px)":"",e!==m.HIDE&&(r.style.height=null!==i.height?i.height+"px":null),e===m.SHOW?r.style.opacity="1":e===m.HIDE?r.style.opacity="0":r.style.opacity=null}},{delay:1100,apply:function(t){var e=t.node;delete e.dataset.animation,e.style.opacity=null,e.style.transform=""}}];function b(t){for(;t.lastChild;)t.removeChild(t.lastChild);return t}var C="animation",x=function(){function t(t){var e=this;this.node=t,this.sync={handler:[],prev:null,timer:-1},this.animation={handler:[],prev:null,timer:-1},this.numbers=new Map,this.handleAnimationImpl=function(){1===e.animation.timer&&(e.handle(e.animation),e.animation.timer=-1)},t.addEventListener("scroll",(function(){e.sync.handler.length>0&&e.handle(e.sync),e.handleAnimation(),e.handleTimeouts()}),{passive:!0})}return Object.defineProperty(t.prototype,"current",{get:function(){return this.asInfo()},enumerable:!1,configurable:!0}),t.prototype.handle=function(t){var e=this.current;if(!(t.prev&&Math.abs(e.left-t.prev.left)+Math.abs(e.top-t.prev.top)<4)){t.prev=e;for(var i=0,o=t.handler;i<o.length;i++)(0,o[i])(e)}},t.prototype.handleAnimation=function(){-1===this.animation.timer&&0!==this.animation.handler.length&&(this.animation.timer=1,requestAnimationFrame(this.handleAnimationImpl))},t.prototype.handleTimeouts=function(){var t=this;0!==this.numbers.size&&this.numbers.forEach((function(e,i){0!==e.handler.length&&(e.timer=setTimeout((function(){t.handle(e),e.timer=-1}),i))}))},t.prototype.asInfo=function(){return{left:this.node.scrollLeft,top:this.node.scrollTop,width:this.node.clientWidth,height:this.node.clientHeight}},t.prototype.push=function(t,e){var i;if("number"==typeof t){var o=null!==(i=this.numbers.get(t))&&void 0!==i?i:{handler:[],prev:null,timer:-1};o.handler.push(e),this.numbers.set(t,o)}switch(t){case"sync":this.sync.handler.push(e);break;case"animation":this.animation.handler.push(e)}},t.prototype.remove=function(t){return[this.sync,this.animation].concat(Array.from(this.numbers.values())).some((function(e){var i=e.handler.indexOf(t);return i>=0&&e.handler.splice(i,1),i>=0}))},t.prototype.isWaiting=function(t){var e,i;switch(t){case"animation":return this.animation.timer>=0;case"sync":return!1;default:return null!==(i=(null===(e=this.numbers.get(t))||void 0===e?void 0:e.timer)>=0)&&void 0!==i&&i}},t}();function w(t,e,i){var o=t;o.__le_scroller__||(o.__le_scroller__=new x(t));var r=o.__le_scroller__;return r.push(e,i),r.asInfo()}function S(t,e){var i=t;return!!i.__le_scroller__&&i.__le_scroller__.isWaiting(e)}var R,O=function(){function t(t,e,i){this.index=t,this.y=e,this.height=i}return Object.defineProperty(t.prototype,"y2",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),t}();function P(t,e,i){void 0===i&&(i=0);var o=e+i;return{exceptions:[],exceptionsLookup:{keys:function(){return[].values()},get:function(){return o},has:function(){return!1},size:0},totalHeight:t*o,numberOfRows:t,defaultRowHeight:o,padding:function(){return i}}}function E(t,e,i){void 0===e&&(e=Number.NaN),void 0===i&&(i=0);var o=new Map,r=[],n="function"==typeof i?i:function(){return i},s=e;Number.isNaN(s)&&(s=function(t){var e=new Map;if(t.forEach((function(t){e.set(t,(e.get(t)||0)+1)})),0===e.size)return 20;var i=Array.from(e).sort((function(t,e){return t[1]!==e[1]?e[1]-t[1]:t[0]-e[0]})),o=i[0][0];return 0===o?i.length>1?i[1][0]:20:o}(t)),s+=n(-1);var l=-1,a=0,h=0,c=0;return t.forEach((function(t,e){var i=t+n(e);if(h+=i,c+=1,i!==s){o.set(e,i);var d=(e-l-1)*s;l=e;var u=a+d;a=u+i,r.push(new O(e,u,i))}})),{exceptionsLookup:o,exceptions:r,totalHeight:h,defaultRowHeight:s,numberOfRows:c,padding:n}}function A(t,e,i,o,r,n){void 0===i&&(i=2),void 0===o&&(o=10*e),void 0===r&&(r=.2),void 0===n&&(n=Date.now());var s=n,l=function(){var t=1e4*Math.sin(s);return s+=1,t-Math.floor(t)};return E({forEach:function(n){for(var s=0;s<t;s+=1)n(l()<r?i+Math.round(l()*(o-i)):e,s)}},e)}function F(t,e,i,o,r){if(0===r)return{first:0,last:-1,firstRowPos:0,endPos:0};if(1===r)return{first:0,last:0,firstRowPos:0,endPos:0===o.length?i:o[0].y2};var n=t,s=n+e;function l(t,e){return Math.min(r-1,e+Math.max(0,Math.floor(t/i)))}function a(t,e){var o=s-t,r=l(n-t,e),a=l(o,e);return{first:r,last:a,firstRowPos:t+(r-e)*i,endPos:t+(a+1-e)*i}}var h=a(0,0);if(0===o.length)return h;if(h.last<o[0].index)return h;if(h.last===o[0].index&&o[0].height>i)return Object.assign(h,{endPos:o[0].y2});var c=o[o.length-1];if(n>=c.y){var d=a(c.y2,c.index+1);return n<c.y2?Object.assign(d,{first:c.index,firstRowPos:c.y}):d}for(var u=[],f=o[0],p=0,y=o;p<y.length;p++){var m=y[p],v=m.y,g=m.y2;if(v>=s)break;g<=n?f=m:u.push(m)}if(0===u.length)return a(f.y2,f.index+1);var b=u[0],C=u[u.length-1],x=Math.max(0,b.index-Math.max(0,Math.ceil((b.y-n)/i))),w=C.index;return s>=C.y2&&(w=l(s-C.y2,C.index+1)),{first:x,last:w,firstRowPos:b.y-(b.index-x)*i,endPos:C.y2+(w-C.index)*i}}function H(t,e){var i=t.length,o=e.length;if(0===i)return{added:e,removed:[],common:0};if(0===o)return{added:[],removed:t,common:0};if(i===o)return{added:[],removed:[],common:i};var r=t.slice(Math.min(o,i));return{added:e.slice(Math.min(o,i)),removed:r,common:i-r.length}}function T(t,e,i){for(var o=0===t.length?0:t[t.length-1]+1,r=[],n=[],s=t.length-1;s>=0&&t[s]>=i;s-=1)n.push(t.pop());for(s=o;s<i;s+=1)e[s].frozen&&(r.push(s),t.push(s));return{target:t,added:r,removed:n}}function z(t){return t?"le-"+t:"le"}!function(t){t[t.NONE=0]="NONE",t[t.ALL=1]="ALL",t[t.SOME=2]="SOME",t[t.SOME_BOTTOM=3]="SOME_BOTTOM",t[t.SOME_TOP=4]="SOME_TOP"}(R||(R={}));var _=z("loading"),L=z("frozen"),M=z("hidden"),B=z("multi"),I=z("even"),j=z("shifted"),D=z("scrollbar-tester"),U=z("header"),W=z("body"),N=z("footer"),k=z("thead"),V=z("tbody"),K=z("tr"),q=z("th"),Y=z("td"),X=z("scrolling"),Z=z("row-animation");function G(t){return t.classList.contains(_)}var $=function(){function t(t,e){var i=this;void 0===e&&(e={}),this.body=t,this.pool=[],this.loadingPool=[],this.loading=new WeakMap,this.visible={first:0,forcedFirst:0,last:-1,forcedLast:-1},this.visibleFirstRowPos=0,this.scrollListener=null,this.lastScrollInfo=null,this.abortAnimation=function(){},this.options={async:C,minScrollDelta:10,mixins:[],scrollingHint:!1,batchSize:10,striped:!1,viewportOversize:200},this.adapter=this.createAdapter(),Object.assign(this.options,e),this.mixins=this.options.mixins.map((function(t){return new t(i.adapter)})),this.fragment=t.ownerDocument.createDocumentFragment()}return t.prototype.addMixin=function(t,e){this.mixins.push(new t(this.adapter,e))},t.prototype.createAdapter=function(){var t=this,e=this;return{visible:this.visible,addAtBeginning:function(e,i){return t.addAtBeginning(e,i)},addAtBottom:this.addAtBottom.bind(this),removeFromBeginning:function(e,i){return t.removeFromBeginning(e,i)},removeFromBottom:this.removeFromBottom.bind(this),updateOffset:this.updateOffset.bind(this),isScrollEventWaiting:function(){return S(t.bodyScroller,t.options.async)},get visibleFirstRowPos(){return e.visibleFirstRowPos},get context(){return e.context},get scrollOffset(){return e.lastScrollInfo?e.lastScrollInfo.top:0},get scrollTotal(){return this.lastScrollInfo?this.lastScrollInfo.height:this.bodyScroller.clientHeight}}},Object.defineProperty(t.prototype,"bodyScroller",{get:function(){return this.body.parentElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bodySizer",{get:function(){var t=this.bodyScroller,e=Array.from(t.children).find((function(t){return"footer"===t.tagName.toLowerCase()}));if(e)return e;var i=t.ownerDocument.createElement("footer");return i.classList.add(N,z("footer-"+this.idPrefix)),t.insertBefore(i,t.firstChild),i},enumerable:!1,configurable:!0}),t.prototype.init=function(){var t=this,e=this.bodyScroller,i=w(e,this.options.async,this.scrollListener=function(e){if(t.lastScrollInfo=e,!(Math.abs(i.top-e.top)<t.options.minScrollDelta&&Math.abs(i.height-e.height)<t.options.minScrollDelta)){var o=e.top>i.top;i=e,t.onScrolledVertically(e.top,e.height,o),t.options.scrollingHint&&t.body.classList.remove(X)}});this.options.scrollingHint&&w(e,"animation",(function(){return t.body.classList.add(X)})),this.recreate()},t.prototype.destroy=function(){var t,e,i;t=this.bodyScroller,e=this.scrollListener,(i=t).__le_scroller__&&i.__le_scroller__.remove(e),this.body.remove()},t.cleanUp=function(t){t.style.height=null},t.prototype.select=function(t){var e,i=this.pool.pop();return null!=i?e=this.updateRow(i,t):null!=(i=this.loadingPool.pop())?(i.classList.remove(_),e=this.createRow(i,t)):((i=this.body.ownerDocument.createElement("div")).classList.add(K,z("tr-"+this.idPrefix)),e=this.createRow(i,t)),i.dataset.index=String(t),this.options.striped&&i.classList.toggle(I,t%2==0),{item:i,result:e}},t.prototype.selectProxy=function(){var t=this.loadingPool.pop();return null==t&&(t=this.body.ownerDocument.createElement("div")).classList.add(_,K,z("tr-"+this.idPrefix)),t},t.prototype.recycle=function(e){t.cleanUp(e);var i=this.loading.get(e);null!=i?i.abort():this.pool.push(e)},t.prototype.proxy=function(e,i){var o=this;if(!u(i))return e;var r=i,n=e,s=this.selectProxy();return s.dataset.index=n.dataset.index,s.style.height=n.style.height,this.loading.set(s,r),r.then((function(e){e===l?(t.cleanUp(n),o.pool.push(n)):o.body.replaceChild(n,s),o.loading.delete(s),t.cleanUp(s),o.loadingPool.push(s)}),(function(){t.cleanUp(n),o.pool.push(n),o.loading.delete(s),t.cleanUp(s),o.loadingPool.push(s)})),s},t.prototype.create=function(t){var e=this.select(t),i=e.item,o=e.result,r=this.context,n=r.exceptionsLookup,s=r.padding,l=n.get(t);return null!=l&&(i.style.height=l-s(t)+"px"),this.proxy(i,o)},t.prototype.removeAll=function(t){void 0===t&&(t=!0);var e=this.body;if(!t)return Array.from(e.children);for(var i=[];e.lastElementChild;){var o=e.lastElementChild;e.removeChild(o),this.recycle(o),i.push(o)}return i},t.prototype.update=function(){var t=this,e=this.visible.first,i=this.fragment,o=Array.from(this.body.children);b(this.body),o.forEach((function(o,r){if(t.loading.has(o))i.appendChild(o);else{var n=t.updateRow(o,r+e);i.appendChild(t.proxy(o,n))}})),this.body.appendChild(i)},t.prototype.forEachRow=function(t,e){var i=this;void 0===e&&(e=!1);var o=Array.from(this.body.children),r=this.fragment;e||b(this.body),o.forEach((function(o,n){G(o)||"update_remove"===o.dataset.animation||"hide"===o.dataset.animation||t(o,n+i.visible.first),e||r.appendChild(o)})),e||this.body.appendChild(r)},t.prototype.removeFromBeginning=function(t,e,i){return void 0===i&&(i=!0),this.remove(t,e,!0,i)},t.prototype.removeFromBottom=function(t,e,i){return void 0===i&&(i=!0),this.remove(t,e,!1,i)},t.prototype.remove=function(t,e,i,o){if(void 0===o&&(o=!0),e<t)return[];for(var r=this.body,n=[],s=i?r.firstChild:r.lastChild,l=t;l<=e;l+=1){var a=s;s=i?s.nextSibling:s.previousSibling,o&&(r.removeChild(a),this.recycle(a)),n.push(a)}return n},t.prototype.addAtBeginning=function(t,e,i){if(void 0===i&&(i=!0),e<t)return null;var o=this.fragment;if(t===e&&i)return this.body.insertBefore(this.create(t),this.body.firstChild),null;for(var r=t;r<=e;r+=1)o.appendChild(this.create(r));return i&&this.body.insertBefore(o,this.body.firstChild),o},t.prototype.addAtBottom=function(t,e,i){if(void 0===i&&(i=!0),e<t)return null;if(t===e&&i)return this.body.appendChild(this.create(t)),null;for(var o=this.fragment,r=t;r<=e;r+=1)o.appendChild(this.create(r));return i&&this.body.appendChild(o),o},t.prototype.updateOffset=function(t){this.visibleFirstRowPos=t,this.updateSizer(t)},t.prototype.updateSizer=function(t){var e=this.context.totalHeight;J(this.body,0,t.toFixed(0)),J(this.bodySizer,0,Math.max(0,e-1).toFixed(0))},t.prototype.recreate=function(t){return this.abortAnimation(),t?this.recreateAnimated(t):this.recreatePure()},t.prototype.recreatePure=function(){var t=this.context,e=this.bodyScroller;this.updateOffset(0),this.removeAll(),this.clearPool();var i=F(e.scrollTop,e.clientHeight,t.defaultRowHeight,t.exceptions,t.numberOfRows),o=i.first,r=i.last,n=i.firstRowPos;this.visible.first=o,this.visible.forcedFirst=o,this.visible.last=r,this.visible.forcedLast=r,o<0?this.updateOffset(0):(this.addAtBottom(o,r),this.updateOffset(n))},t.prototype.recreateAnimated=function(t){var e=this,i=new Map,o=new y(t.previous,t.previousKey),n=new y(this.context,t.currentKey),s=F(this.bodyScroller.scrollTop,this.bodyScroller.clientHeight,n.context.defaultRowHeight,n.context.exceptions,n.context.numberOfRows),l=Array.from(this.body.children),a=r({},this.visible);b(this.body),o.positions(a.first,Math.min(a.last,a.first+l.length),this.visibleFirstRowPos,(function(t,e,o){var r=l[t];r&&i.set(e,{n:r,pos:o,i:t})})),this.visible.first=s.first,this.visible.forcedFirst=s.first,this.visible.last=s.last,this.visible.forcedLast=s.last;var h=this.fragment,c=[],d=s.firstRowPos;n.positions(s.first,s.last,s.firstRowPos,(function(t,r,s){var l,a,u=m.UPDATE,f=i.get(r);if(null!=f)i.delete(r),f.n.dataset.index=String(t),l=e.proxy(f.n,e.updateRow(f.n,t)),a={index:f.i,y:f.pos,height:o.exceptionHeightOf(f.i,!0)};else{var p=o.posByKey(r);l=e.create(t),u=p.index<0?m.SHOW:m.UPDATE_CREATE,a={index:p.index,y:p.pos>=0?p.pos:s,height:p.index<0?n.exceptionHeightOf(t,!0):o.exceptionHeightOf(p.index,!0)}}c.push({node:l,key:r,mode:u,previous:a,nodeY:d,nodeYCurrentHeight:s,current:{index:t,y:s,height:n.exceptionHeightOf(t)}}),l.style.transform="translate(0, "+(d-s)+"px)",d+=a.height+(a.index<0?n.padding(t):o.padding(a.index)),h.appendChild(l)}));var u=s.endPos;i.forEach((function(t,e){var i=n.posByKey(e),r=i.pos>=0?i.pos:t.pos,s=t.n;s.style.transform="translate(0, "+(t.pos-d)+"px)",h.appendChild(s);var l=o.exceptionHeightOf(t.i,!0);c.push({node:t.n,key:e,mode:i.index<0?m.HIDE:m.UPDATE_REMOVE,previous:{index:t.i,y:t.pos,height:l},nodeY:d,nodeYCurrentHeight:u,current:{index:i.index,y:r,height:i.index<0?null:n.exceptionHeightOf(i.index)}}),u+=i.index<0?n.context.defaultRowHeight:n.exceptionHeightOf(i.index,!0)+n.padding(i.index),d+=l+o.padding(t.i)})),this.updateOffset(s.firstRowPos),this.animate(c,t.phases||g,o,n,h)},t.prototype.animate=function(t,e,i,o,r){var n=this,s=t;if(s.length<=0)this.body.appendChild(r);else{for(var l=-1,a=0,h=function(t,e){void 0===e&&(e=s),e.forEach((function(e){return t.apply(e,i,o)}))},c=function(){if(console.assert(s[0].node.offsetTop>=0,"dummy log for forcing dom update"),h(e[a]),(a+=1)<e.length){var t=e[a];l=self.setTimeout(c,t.delay)}else{var i=n.body.classList;Array.from(i).forEach((function(t){t.startsWith(z())&&t.endsWith("-animation")&&i.remove(t)})),s.forEach((function(t){var e=t.node,i=t.mode;i!==m.UPDATE_REMOVE&&i!==m.HIDE||(e.remove(),e.style.transform="",n.recycle(e))})),n.abortAnimation=function(){},l=-1}};0===e[a].delay;)h(e[a]),a+=1;var d=this.body;this.body.appendChild(r);var u=[];s=s.filter((function(t){return!v(t,i.context.defaultRowHeight,o.context.defaultRowHeight)||(u.push(t),!1)})),u.length>0&&e.slice(a).forEach((function(t){return h(t,u)})),0!==s.length&&(d.classList.add(Z),new Set(s.map((function(t){return t.mode}))).forEach((function(t){d.classList.add(z(m[t].toLowerCase().split("_")[0]+"-animation"))})),this.abortAnimation=function(){l<=0||(clearTimeout(l),l=-1,a=e.length-1,c())},l=self.setTimeout(c,e[a].delay))}},t.prototype.clearPool=function(){this.pool.splice(0,this.pool.length)},t.prototype.revalidate=function(){var t=this.bodyScroller;this.onScrolledVertically(t.scrollTop,t.clientHeight,!0),this.updateOffset(this.visibleFirstRowPos)},t.prototype.onScrolledVertically=function(t,e,i){for(var o=this.options.viewportOversize,r=Math.max(0,t-o),n=this.onScrolledImpl(r,e+o+(t-r)),s=0,l=this.mixins;s<l.length;s++)l[s].onScrolled(i,n);return n},t.prototype.shiftLast=function(t,e){if(e>=this.options.batchSize)return t;var i=this.context.numberOfRows;return Math.min(i-1,t+(this.options.batchSize-e))},t.prototype.shiftFirst=function(t,e,i){var o;if(i>=this.options.batchSize||t<=0)return{first:t,firstRowPos:e};for(var r=Math.max(0,t-(this.options.batchSize-i)),n=this.context,s=n.exceptionsLookup,l=n.defaultRowHeight,a=e,h=r;h<t;h+=1)a-=null!==(o=s.get(h))&&void 0!==o?o:l;return{first:r,firstRowPos:a}},t.prototype.onScrolledImpl=function(t,e){var i=this.context,o=F(t,e,i.defaultRowHeight,i.exceptions,i.numberOfRows),r=o.first,n=o.last,s=o.firstRowPos,l=this.visible;if(l.forcedFirst=r,l.forcedLast=n,r-l.first>=0&&n-l.last<=0)return R.NONE;var a,h,c=R.SOME,d=!1;if(r>l.last||n<l.first)a=this.removeAll(!1),h=this.addAtBottom(r,n,!1),d=!0,c=R.ALL;else if(r<l.first){l.last-(n+1)>=this.options.batchSize?a=this.removeFromBottom(n+1,l.last,!1):n=l.last;var u=this.shiftFirst(r,s,l.first-1-r);r=u.first,s=u.firstRowPos,h=this.addAtBeginning(r,l.first-1,!1),d=!1,c=R.SOME_TOP}else r-1-l.first>=this.options.batchSize?a=this.removeFromBeginning(l.first,r-1,!1):(r=l.first,s=this.visibleFirstRowPos),n=this.shiftLast(n,n-l.last+1),h=this.addAtBottom(l.last+1,n,!1),d=!0,c=R.SOME_BOTTOM;return l.first=r,l.last=n,this.updateOffset(s),this.manipulate(a,h,d),c},t.prototype.manipulate=function(t,e,i){if(t)for(var o=0,r=t;o<r.length;o++){var n=r[o];n.remove(),this.recycle(n)}e&&(i?this.body.appendChild(e):this.body.insertBefore(e,this.body.firstChild))},t}();function J(t,e,i){var o="translate("+e+"px, "+i+"px)",r=t;r.__transform__!==o&&(r.__transform__=o,t.style.transform=o)}function Q(t,e){for(var i=0,o=Object.keys(e);i<o.length;i++){var r=o[i],n=e[r];if(n.endsWith(" !important")){var s=n.slice(0,-" !important".length);if(t[r]!==s){t[r]=s;var l=r.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase();t.setProperty(l,s,"important")}}else t[r]!==n&&(t[r]=n)}}const tt=function(){function t(t){this.rules=[],this.testVerifyTimeout=-1,this.node=t.ownerDocument.createElement("style"),this.node.appendChild(t.ownerDocument.createTextNode("")),t.appendChild(this.node)}return t.prototype.destroy=function(){this.node.remove()},t.prototype.verifySheet=function(){var t=this,e=this.sheet;if(e){var i=e.cssRules;if(i.length!==this.rules.length||!this.rules.every((function(t,e){return i[e].selectorText===t.selector}))){for(var o=i.length,r=0;r<o;r+=1)e.deleteRule(r);for(var n=0,s=this.rules;n<s.length;n++){var l=s[n],a=e.insertRule(l.selector+" {}",e.cssRules.length),h=e.cssRules[a];l.selector=h.selectorText,Q(h.style,l.style)}}}else{if(this.testVerifyTimeout>=0)return;this.testVerifyTimeout=self.setTimeout((function(){t.testVerifyTimeout=-1,t.verifySheet()}),20)}},Object.defineProperty(t.prototype,"sheet",{get:function(){return this.node.sheet},enumerable:!1,configurable:!0}),t.prototype.getSheetRule=function(t){var e=this.sheet;return e?e.cssRules[t]:null},t.prototype.addRule=function(t,e,i){this.verifySheet();var o=this.sheet;if(!o)return this.rules.push({id:t,selector:e,style:i}),null;var r=o.insertRule(e+" {}",o.cssRules.length),n=o.cssRules[r];return this.rules.push({id:t,selector:n.selectorText,style:i}),Q(n.style,i),t},t.prototype.updateRule=function(t,e,i){this.verifySheet();var o=this.rules.findIndex((function(e){return e.id===t}));if(o<0)return this.addRule(t,e,i);var r=this.rules[o];r.selector=e,r.style=i;var n=this.getSheetRule(o);return n&&(n.selectorText.replace(/\s/gm,"")!==e.replace(/\s/gm,"")&&(n.selectorText=e,r.selector=n.selectorText),Q(n.style,i)),t},t.prototype.deleteRule=function(t){this.verifySheet();var e=this.rules.findIndex((function(e){return e.id===t}));if(!(e<0)){this.rules.splice(e,1);var i=this.sheet;i&&i.deleteRule(e)}},Object.defineProperty(t.prototype,"ruleNames",{get:function(){return this.rules.map((function(t){return t.id}))},enumerable:!1,configurable:!0}),t}();function et(t,e){var i=e.startsWith("#")?e.slice(1):e;return t.innerHTML='\n  <header id="header-'+i+'" class="'+U+" "+z("header-"+i)+'">\n    <article class="'+k+" "+z("thead-"+i)+'"></article>\n  </header>\n  <main id="body-'+i+'" class="'+W+" "+z("body-"+i)+'">\n    <footer class="'+N+'">&nbsp;</footer>\n    <article class="'+V+" "+z("tbody-"+i)+'"></article>\n  </main>',t}function it(t){return{thead:"thead-"+t,tbody:"tbody-"+t,tr:"tr-"+t,th:"th-"+t,td:"td-"+t}}function ot(t){var e=it(t);return{thead:z(e.thead),tbody:z(e.tbody),tr:z(e.tr),th:z(e.th),td:z(e.td)}}const rt=function(t){function e(e,i){var o=t.call(this,e)||this;o.id=i.startsWith("#")?i.slice(1):i,o.ids=it(o.id),o.cssClasses=ot(o.id);var r=e.getElementsByTagName("header")[0],n=e.getElementsByTagName("main")[0];self.setTimeout((function(){var t=function(t){var e,i=null===(e=t.ownerDocument)||void 0===e?void 0:e.body;if(!i)return{width:10,height:10};i.insertAdjacentHTML("beforeend",'<div class="'+D+'"><div></div></div>');var o=i.lastElementChild,r=o.offsetWidth-o.clientWidth,n=o.offsetHeight-o.clientHeight;return o.remove(),{width:r,height:n}}(e).width;o.updateRule("__scrollBarFix2","#header-"+o.id+" > article:last-of-type",{borderRight:t+"px solid transparent"})}),20);var s=r.scrollLeft;return w(n,"animation",(function(t){var i=t.left;s!==i&&(r.scrollLeft=i,s=i),e.classList.toggle(j,t.left>0)})),o}return o(e,t),e.prototype.update=function(t,e,i,o,r,n){void 0===n&&(n="px");var s=it(r),l=ot(r),a=""+e.reduce((function(t,e,o){return t+e.width+i(o)}),0)+n;this.updateRule("__heightsRule"+l.tr,"."+l.tr,{height:t+"px",width:a}),this.updateRule("__heightsRule"+l.tbody,"#"+s.tbody,{width:a}),this.updateColumns(e,i,l,o,n)},e.prototype.remove=function(t){var e=ot(t);this.deleteRule("__heightsRule"+e.tr),this.deleteRule("__heightsRule"+e.tbody);for(var i="__col"+e.td+"_",o=this.ruleNames.reduce((function(t,e){return t+(e.startsWith(i)?1:0)}),0),r=0;r<o;r+=1)this.deleteRule(""+i+r)},e.prototype.updateColumns=function(t,e,i,o,r){var n=this;void 0===r&&(r="px");var s="__col"+i.td+"_",l=new Set(this.ruleNames.filter((function(t){return t.startsWith(s)}))),a=0;t.forEach((function(t,h){var c="."+i.th+'[data-id="'+t.id+'"]',d={width:""+t.width+r},u="."+i.td+'[data-id="'+t.id+'"]',f={transform:"translateX("+a+r+")",width:""+t.width+r};t.frozen&&(d.left=a+"px",n.updateRule(""+s+u+"F","."+i.td+"."+j+'[data-id="'+t.id+'"]',{transform:"translateX(0)",left:""+(a+o)+r}),l.delete(""+s+u+"F")),n.updateRule(""+s+c,c,d),l.delete(""+s+c),n.updateRule(""+s+u,u,f),l.delete(""+s+u),a+=t.width+e(h)})),l.forEach((function(t){return n.deleteRule(t)}))},e}(tt);var nt=function(){function t(t,e,i,o){var r=this;void 0===o&&(o=[]),this.header=t,this.style=e,this.tableId=i,this.cellPool=[],this.loading=new WeakMap,this.visibleColumns={frozen:[],first:0,forcedFirst:0,last:-1,forcedLast:-1},this.visibleFirstColumnPos=0,this.horizontallyShifted=!1,this.columnAdapter=this.createColumnAdapter(),this.columnMixins=o.map((function(t){return new t(r.columnAdapter)})),this.columnFragment=t.ownerDocument.createDocumentFragment()}return t.prototype.leftShift=function(){var t=this.context,e=this.visibleColumns.frozen.reduce((function(e,i){return e+t.columns[i].width+t.column.padding(i)}),0);return this.visibleFirstColumnPos-e},Object.defineProperty(t.prototype,"headerScroller",{get:function(){return this.header.parentElement},enumerable:!1,configurable:!0}),t.prototype.addColumnMixin=function(t,e){this.columnMixins.push(new t(this.columnAdapter,e))},t.prototype.createColumnAdapter=function(){var t=this,e=this;return{visible:this.visibleColumns,addAtBeginning:this.addColumnAtStart.bind(this),addAtBottom:this.addColumnAtEnd.bind(this),removeFromBeginning:this.removeColumnFromStart.bind(this),removeFromBottom:this.removeColumnFromEnd.bind(this),updateOffset:this.updateColumnOffset.bind(this),scroller:this.headerScroller,syncFrozen:this.syncFrozen.bind(this),isScrollEventWaiting:function(){return S(t.headerScroller,"animation")},get visibleFirstRowPos(){return e.visibleFirstColumnPos},get context(){return e.context.column},get scrollOffset(){return e.lastScrollInfo?e.lastScrollInfo.left:0},get scrollTotal(){return e.lastScrollInfo?e.lastScrollInfo.width:e.headerScroller.clientWidth}}},t.prototype.init=function(){var t=this,e=this.context;this.style.update(e.defaultRowHeight-e.padding(-1),e.columns,e.column.padding,0,this.tableId),e.columns.forEach((function(){t.cellPool.push([])}))},t.prototype.onScrolledHorizontally=function(t,e,i){for(var o=this.onScrolledHorizontallyImpl(t,e),r=0,n=this.columnMixins;r<n.length;r++)n[r].onScrolled(i,o);return o},t.prototype.removeColumnFromStart=function(t,e,i){var o=this;void 0===i&&(i=this.visibleColumns.frozen.length),this.forEachRow((function(r){o.removeCellFromStart(r,t,e,i)}))},t.prototype.removeCellFromStart=function(t,e,i,o){for(var r=e;r<=i;r+=1){var n=0===o?t.firstElementChild:t.children[o];n.remove(),this.recycleCell(n,r)}},t.prototype.removeColumnFromEnd=function(t,e){var i=this;this.forEachRow((function(o){i.removeCellFromEnd(o,t,e)}))},t.prototype.removeCellFromEnd=function(t,e,i){for(var o=i;o>=e;o-=1){var r=t.lastElementChild;r.remove(),this.recycleCell(r,o)}},t.prototype.removeFrozenCells=function(t,e,i){for(var o=0,r=e;o<r.length;o++){var n=r[o],s=t.children[i];s.remove(),this.recycleCell(s,n)}},t.prototype.removeFrozenColumns=function(t,e){var i=this;this.forEachRow((function(o){i.removeFrozenCells(o,t,e)}))},t.prototype.removeAllColumns=function(t){var e=this;this.forEachRow((function(i){e.removeAllCells(i,t)}))},t.prototype.removeAllCells=function(t,e,i){var o=this;void 0===i&&(i=this.visibleColumns.first);var r=Array.from(t.children),n=this.visibleColumns.frozen;if(b(t),e||0===n.length)for(var s=0,l=n;s<l.length;s++){var a=l[s];this.recycleCell(r.shift(),a)}else for(a=0;a<n.length;a+=1)t.appendChild(r.shift());r.forEach((function(t,e){o.recycleCell(t,e+i)}))},t.prototype.selectProxyCell=function(t,e,i){var o,r,n=this.cellPool[e],s=i[e],l=n.pop(),a=l?this.updateCell(l,t,s)||l:this.createCell(this.header.ownerDocument,t,s);return f(a)?(o=a.item,r=a.ready):o=a,o!==l&&(o.dataset.id=s.id,o.classList.add(Y,this.style.cssClasses.td,z("td-"+this.tableId))),this.updateShiftedState(o,s),{item:o,ready:r}},t.prototype.handleCellReady=function(t,e,i){var o=this;void 0===i&&(i=-1),t.classList.add(_);var r=e;return this.loading.set(t,r),r.then((function(e){o.loading.delete(t),t.classList.remove(_),e===l&&i>=0&&o.cellPool[i].push(t)})),t},t.prototype.selectCell=function(t,e,i){var o=this.selectProxyCell(t,e,i),r=o.item,n=o.ready;return u(n)?this.handleCellReady(r,n,e):r},t.prototype.updateShiftedState=function(t,e){t.classList.toggle(j,e.frozen&&this.horizontallyShifted)},t.prototype.recycleCell=function(t,e){void 0===e&&(e=-1);var i=this.loading.get(t);null!=i?i.abort():!G(t)&&e>=0&&this.cellPool[e].push(t)},t.prototype.addColumnAtStart=function(t,e,i){var o=this;void 0===i&&(i=this.visibleColumns.frozen.length);var r=this.context.columns;this.forEachRow((function(n,s){o.addCellAtStart(n,s,t,e,i,r)}))},t.prototype.addCellAtStart=function(t,e,i,o,r,n){for(var s=o;s>=i;s-=1){var l=this.selectCell(e,s,n);t.insertBefore(l,r>0?t.children[r]:t.firstChild)}},t.prototype.insertFrozenCells=function(t,e,i,o,r){for(var n=t.children[o],s=0,l=i;s<l.length;s++){var a=l[s],h=this.selectCell(e,a,r);n?t.insertBefore(h,n):t.appendChild(h)}},t.prototype.insertFrozenColumns=function(t,e){var i=this,o=this.context.columns;this.forEachRow((function(r,n){i.insertFrozenCells(r,n,t,e,o)}))},t.prototype.addColumnAtEnd=function(t,e){var i=this,o=this.context.columns;this.forEachRow((function(r,n){i.addCellAtEnd(r,n,t,e,o)}))},t.prototype.addCellAtEnd=function(t,e,i,o,r){for(var n=i;n<=o;n+=1){var s=this.selectCell(e,n,r);t.appendChild(s)}},t.prototype.updateHeaders=function(){var t=this,e=this.context.columns;Array.from(this.header.children).forEach((function(i,o){var r,n=i,s=e[o],l=t.updateHeader(n,s);(r=f(l)?t.handleCellReady(l.item,l.ready,-1):l||n)!==n&&(r.dataset.id=s.id,r.classList.add(q,t.style.cssClasses.th,z("th-"+t.tableId)),t.header.replaceChild(n,r))}))},t.prototype.recreate=function(t,e){var i,o=this,r=this.context;this.style.update(r.defaultRowHeight-r.padding(-1),r.columns,r.column.padding,0,this.tableId),this.clearPool();for(var n=this.cellPool.length;n<r.columns.length;n+=1)this.cellPool.push([]);for(var s=this.columnFragment,l=s.ownerDocument,a=new Map;this.header.lastChild;){var h=this.header.lastChild;this.header.removeChild(h),a.set(null!==(i=h.dataset.id)&&void 0!==i?i:"",h)}r.columns.forEach((function(t){var e,i=a.get(t.id),r=i?o.updateHeader(i,t)||i:o.createHeader(l,t);(e=f(r)?o.handleCellReady(r.item,r.ready,-1):r)!==i&&(e.dataset.id=t.id,e.classList.add(q,o.style.cssClasses.th,z("th-"+o.tableId))),s.appendChild(e)})),this.header.appendChild(s);var c=F(t,e,r.column.defaultRowHeight,r.column.exceptions,r.column.numberOfRows),d=c.first,u=c.last,p=c.firstRowPos;if(this.visibleColumns.first=d,this.visibleColumns.forcedFirst=d,this.visibleColumns.last=u,this.visibleColumns.forcedLast=u,r.columns.some((function(t){return t.frozen}))){var y=T([],r.columns,d).target;this.visibleColumns.frozen=y}else this.visibleColumns.frozen=[];this.updateColumnOffset(p)},t.prototype.clearPool=function(){this.cellPool.forEach((function(t){return t.splice(0,t.length)}))},t.prototype.updateColumnOffset=function(t){var e=t!==this.visibleFirstColumnPos;if(this.visibleFirstColumnPos=t,e){var i=this.context;this.style.update(i.defaultRowHeight-i.padding(-1),i.columns,i.column.padding,0,this.tableId)}},t.prototype.createRow=function(t,e){var i=this.context.columns,o=this.visibleColumns;if(o.frozen.length>0)for(var r=0,n=o.frozen;r<n.length;r++){var s=n[r],l=this.selectCell(e,s,i);t.appendChild(l)}for(s=o.first;s<=o.last;s+=1)l=this.selectCell(e,s,i),t.appendChild(l)},t.prototype.updateRow=function(t,e){var i,o=this.context.columns,r=this.visibleColumns;switch(t.childElementCount){case 0:r.frozen.length>0&&this.insertFrozenCells(t,e,r.frozen,0,o),this.addCellAtEnd(t,e,r.first,r.last,o);break;case 1:var n=t.firstElementChild,s=null!==(i=n.dataset.id)&&void 0!==i?i:"",l=o.findIndex((function(t){return t.id===s}));t.removeChild(n),l>=0&&this.recycleCell(n,l),r.frozen.length>0&&this.insertFrozenCells(t,e,r.frozen,0,o),this.addCellAtEnd(t,e,r.first,r.last,o);break;default:this.mergeColumns(t,e)}},t.prototype.mergeColumns=function(t,e){for(var i=this,o=this.context.columns,r=this.visibleColumns,n=new Map;t.lastChild;){var s=t.lastChild;t.removeChild(s),n.set(s.dataset.id,s)}for(var l=function(r){var s=o[r],l=n.get(s.id);if(l){n.delete(s.id);var a,h=i.updateCell(l,e,s)||l;(a=f(h)?i.handleCellReady(h.item,h.ready,r):h)&&a!==l&&(a.dataset.id=s.id,a.classList.add(Y,i.style.cssClasses.td,z("td-"+i.tableId))),i.updateShiftedState(a,s),t.appendChild(a)}else{var c=i.selectCell(e,r,o);t.appendChild(c)}},a=0,h=r.frozen;a<h.length;a++)l(h[a]);for(var c=r.first;c<=r.last;c+=1)l(c);if(0!==n.size){var d=new Map(o.map((function(t,e){return[t.id,e]})));n.forEach((function(t,e){var o=d.get(e);null!=o&&o>=0&&i.recycleCell(t,o)}))}},t.prototype.updateShiftedStates=function(){if(this.context.columns.some((function(t){return t.frozen}))){var t=this.horizontallyShifted,e=j;if(t){for(var i=Array.from(this.header.querySelectorAll("."+L+":not(."+e+")")),o=Array.from(this.body.querySelectorAll("."+L+":not(."+e+")")),r=0,n=i;r<n.length;r++)n[r].classList.add(e);for(var s=0,l=o;s<l.length;s++)l[s].classList.add(e)}else{i=Array.from(this.header.querySelectorAll("."+L+"."+e)),o=Array.from(this.body.querySelectorAll("."+L+"."+e));for(var a=0,h=i;a<h.length;a++)h[a].classList.remove(e);for(var c=0,d=o;c<d.length;c++)d[c].classList.remove(e)}}},t.prototype.syncFrozen=function(t){var e=this.context.columns,i=this.visibleColumns;if(!e.some((function(t){return t.frozen})))return 0;if(0===t)return i.frozen.length>0&&(this.removeFrozenColumns(i.frozen,0),i.frozen=[]),0;var o=i.frozen.length,r=T(i.frozen,e,t),n=r.target,s=r.added,l=r.removed;return l.length>0&&this.removeFrozenColumns(l,o-l.length),s.length>0&&this.insertFrozenColumns(s,o-l.length),i.frozen=n,n.length},t.prototype.onScrolledHorizontallyImpl=function(t,e){var i=this.horizontallyShifted!==t>0;this.horizontallyShifted=t>0;var o=this.context.column,r=F(t,e,o.defaultRowHeight,o.exceptions,o.numberOfRows),n=r.first,s=r.last,l=r.firstRowPos,a=this.visibleColumns;if(a.forcedFirst=n,a.forcedLast=s,n-a.first>=0&&s-a.last<=0)return i&&this.updateShiftedStates(),R.NONE;var h=R.SOME,c=this.syncFrozen(n);return n>a.last||s<a.first?(this.removeAllColumns(!1),this.addColumnAtEnd(n,s),h=R.ALL):n<a.first?(this.removeColumnFromEnd(s+1,a.last),this.updateShiftedStates(),this.addColumnAtStart(n,a.first-1,c),h=R.SOME_TOP):(this.removeColumnFromStart(a.first,n-1,c),this.updateShiftedStates(),this.addColumnAtEnd(a.last+1,s),h=R.SOME_BOTTOM),a.first=n,a.last=s,this.updateColumnOffset(l),h},t}(),st=function(t){function e(e,i,r){void 0===r&&(r={});var n=t.call(this,et(e,i).querySelector("main > article"),r)||this;n.root=e,e.classList.add(z(),"lineup-engine"),n.style=new rt(n.root,i);var s=n,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"context",{get:function(){return s.context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return s.body},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastScrollInfo",{get:function(){return s.lastScrollInfo},enumerable:!1,configurable:!0}),e.prototype.createHeader=function(t,e){return s.createHeader(t,e)},e.prototype.updateHeader=function(t,e){return s.updateHeader(t,e)},e.prototype.createCell=function(t,e,i){return s.createCell(t,e,i)},e.prototype.updateCell=function(t,e,i){return s.updateCell(t,e,i)},e.prototype.updateColumnOffset=function(e){t.prototype.updateColumnOffset.call(this,e),s.updateOffset(s.visibleFirstRowPos)},e.prototype.forEachRow=function(t){return s.forEachRow(t)},e}(nt);return n.cell=new l(n.header,n.style,n.style.id,r.mixins||[]),n}return o(e,t),Object.defineProperty(e.prototype,"idPrefix",{get:function(){return this.style.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this.root.querySelector("header > article")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerScroller",{get:function(){return this.root.getElementsByTagName("header")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleColumns",{get:function(){return this.cell.visibleColumns},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleFirstColumnPos",{get:function(){return this.cell.visibleFirstColumnPos},enumerable:!1,configurable:!0}),e.prototype.addColumnMixin=function(t,e){this.cell.addColumnMixin(t,e)},e.prototype.init=function(){var e=this;this.cell.init();var i=w(this.body.parentElement,this.options.async,(function(t){if(!(Math.abs(i.left-t.left)<e.options.minScrollDelta&&Math.abs(i.width-t.width)<e.options.minScrollDelta)){var o=t.left>i.left;i=t,e.onScrolledHorizontally(t.left,t.width,o)}}));t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.root.remove()},e.prototype.onScrolledHorizontally=function(t,e,i){return this.cell.onScrolledHorizontally(t,e,i)},e.prototype.updateHeaders=function(){this.cell.updateHeaders()},e.prototype.handleCellReady=function(t,e,i){return void 0===i&&(i=-1),this.cell.handleCellReady(t,e,i)},e.prototype.recycleCell=function(t,e){void 0===e&&(e=-1),this.cell.recycleCell(t,e)},e.prototype.updateColumnWidths=function(){var t=this.context;this.style.update(t.defaultRowHeight-t.padding(-1),t.columns,t.column.padding,0,this.idPrefix)},e.prototype.updateSizer=function(t){var e=this.context,i=e.totalHeight,o=e.column.totalHeight;this.updateShifts(t,this.cell.leftShift()),this.bodySizer.style.transform="translate("+Math.max(0,o-1).toFixed(0)+"px, "+Math.max(0,i-1).toFixed(0)+"px)"},e.prototype.updateShifts=function(t,e){J(this.body,0,t.toFixed(0))},e.prototype.recreate=function(e){var i=this.bodyScroller,o=i.scrollLeft;this.cell.recreate(o,i.clientWidth),t.prototype.recreate.call(this,e),i.scrollLeft=o},e.prototype.clearPool=function(){t.prototype.clearPool.call(this),this.cell.clearPool()},e.prototype.createRow=function(t,e){this.cell.createRow(t,e)},e.prototype.updateRow=function(t,e){this.cell.updateRow(t,e)},e}($);const lt=function(){function t(t,e){return this.adapter=t,this.prefetchTimeout=-1,this.cleanupTimeout=-1,this.options={prefetchRows:20,cleanUpRows:10,delay:200},Object.assign(this.options,e),this}return t.prototype.prefetchDown=function(){if(this.prefetchTimeout=-1,!this.adapter.isScrollEventWaiting()){var t=this.adapter.context,e=Math.min(this.adapter.visible.forcedLast+this.options.prefetchRows,t.numberOfRows-1);this.adapter.visible.last===e&&this.adapter.visible.last>=this.adapter.visible.forcedLast+this.options.prefetchRows||(this.adapter.addAtBottom(this.adapter.visible.last+1,e),this.adapter.visible.last=e)}},t.prototype.prefetchUp=function(){if(this.prefetchTimeout=-1,!(this.adapter.isScrollEventWaiting()||this.adapter.visible.first<=this.adapter.visible.forcedFirst-this.options.prefetchRows)){var t=this.adapter.context,e=F(Math.max(this.adapter.scrollOffset-this.options.prefetchRows*t.defaultRowHeight,0),this.adapter.scrollTotal,t.defaultRowHeight,t.exceptions,t.numberOfRows),i=e.first,o=e.firstRowPos;if(i!==this.adapter.visible.first){var r=this.adapter.syncFrozen?this.adapter.syncFrozen(i):0;this.adapter.addAtBeginning(i,this.adapter.visible.first-1,r),this.adapter.visible.first=i,this.adapter.updateOffset(o)}}},t.prototype.triggerPrefetch=function(t){this.prefetchTimeout>=0&&clearTimeout(this.prefetchTimeout);var e=this.adapter.visible.last<this.adapter.visible.forcedLast+this.options.prefetchRows,i=this.adapter.visible.first>this.adapter.visible.forcedFirst-this.options.prefetchRows,o=this.adapter.visible.last===this.adapter.context.numberOfRows,r=0===this.adapter.visible.first;if((!t||e||o)&&(t||i||r)){var n=t||r?this.prefetchDown.bind(this):this.prefetchUp.bind(this);this.prefetchTimeout=self.setTimeout(n,this.options.delay)}},t.prototype.cleanUpTop=function(t){if(this.cleanupTimeout=-1,!this.adapter.isScrollEventWaiting()){var e=Math.max(0,t-this.options.cleanUpRows);if(!(e<=this.adapter.visible.first)){var i=this.adapter.syncFrozen?this.adapter.syncFrozen(e):0;this.adapter.removeFromBeginning(this.adapter.visible.first,e-1,i);var o=this.adapter.context,r=(e-this.adapter.visible.first)*o.defaultRowHeight;if(o.exceptions.length>0)for(var n=this.adapter.visible.first;n<e;n+=1){var s=o.exceptionsLookup.get(n);null!=s&&(r+=s-o.defaultRowHeight)}this.adapter.visible.first=e,this.adapter.updateOffset(this.adapter.visibleFirstRowPos+r),this.prefetchDown()}}},t.prototype.cleanUpBottom=function(t){this.cleanupTimeout=-1;var e=t+this.options.cleanUpRows;this.adapter.visible.last<=e||(this.adapter.removeFromBottom(e+1,this.adapter.visible.last),this.adapter.visible.last=e,this.prefetchUp())},t.prototype.triggerCleanUp=function(t,e,i){this.cleanupTimeout>=0&&clearTimeout(this.cleanupTimeout),i&&t-this.options.cleanUpRows<=this.adapter.visible.first||!i&&this.adapter.visible.last<=e+this.options.cleanUpRows||(this.cleanupTimeout=self.setTimeout(i?this.cleanUpTop.bind(this):this.cleanUpBottom.bind(this),this.options.delay,i?t:e))},t.prototype.onScrolled=function(t,e){this.adapter.isScrollEventWaiting()||(e!==R.ALL&&this.options.cleanUpRows>0&&this.triggerCleanUp(this.adapter.visible.forcedFirst,this.adapter.visible.forcedLast,t),e!==R.NONE&&this.options.prefetchRows>0&&this.triggerPrefetch(t))},t}();var at=function(t){function e(e,i,r,n,s){void 0===s&&(s={});var l=t.call(this,i,s)||this;l.header=e,l.body=i,l.tableId=r,l.style=n;var a=l,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"context",{get:function(){return a.context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return a.body},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastScrollInfo",{get:function(){return a.lastScrollInfo},enumerable:!1,configurable:!0}),e.prototype.createHeader=function(t,e){return a.createHeader(t,e)},e.prototype.updateHeader=function(t,e){return a.updateHeader(t,e)},e.prototype.createCell=function(t,e,i){return a.createCell(t,e,i)},e.prototype.updateColumnOffset=function(e){t.prototype.updateColumnOffset.call(this,e),a.updateOffset(a.visibleFirstRowPos)},e.prototype.updateCell=function(t,e,i){return a.updateCell(t,e,i)},e.prototype.forEachRow=function(t){return a.forEachRow(t)},e}(nt);return l.cell=new h(l.header,l.style,r,s.mixins||[]),l}return o(e,t),e.prototype.addColumnMixin=function(t,e){this.cell.addColumnMixin(t,e)},Object.defineProperty(e.prototype,"idPrefix",{get:function(){return this.tableId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.context.column.totalHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleColumns",{get:function(){return this.cell.visibleColumns},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleFirstColumnPos",{get:function(){return this.cell.visibleFirstColumnPos},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.context.totalHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hidden",{get:function(){return this.header.classList.contains(_)},set:function(t){this.hidden!==t&&(this.header.classList.toggle(_,t),this.body.classList.toggle(_,t),this.header.classList.toggle(M,t),this.body.classList.toggle(M,t),this.onVisibilityChanged(!t))},enumerable:!1,configurable:!0}),e.prototype.updateSizer=function(t){this.updateShifts(t,this.cell.leftShift())},e.prototype.updateShifts=function(t,e){J(this.body,0,t.toFixed(0))},e.prototype.onVisibilityChanged=function(t){},e.prototype.hide=function(){this.hidden=!0},e.prototype.show=function(t,e,i){var o=this.hidden;this.hidden=!1,o?this.revalidate():this.onScrolledHorizontally(t,e,i)},e.prototype.init=function(){this.hide(),this.cell.init(),t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.header.remove(),this.style.remove(this.tableId)},e.prototype.onScrolledVertically=function(e,i,o){return this.hidden?R.NONE:t.prototype.onScrolledVertically.call(this,e,i,o)},e.prototype.onScrolledHorizontally=function(t,e,i){var o=this.cell.onScrolledHorizontally(t,e,i);return this.updateSizer(this.visibleFirstRowPos),o},e.prototype.updateHeaders=function(){this.cell.updateHeaders()},e.prototype.handleCellReady=function(t,e,i){return void 0===i&&(i=-1),this.cell.handleCellReady(t,e,i)},e.prototype.recycleCell=function(t,e){void 0===e&&(e=-1),this.cell.recycleCell(t,e)},e.prototype.updateColumnWidths=function(){var t=this.context;this.style.update(t.defaultRowHeight-t.padding(-1),t.columns,t.column.padding,0,this.tableId)},e.prototype.recreate=function(e){var i=this.bodyScroller,o=i.scrollLeft;this.cell.recreate(o,i.clientWidth),t.prototype.recreate.call(this,e),i.scrollLeft=o},e.prototype.clearPool=function(){t.prototype.clearPool.call(this),this.cell.clearPool()},e.prototype.createRow=function(t,e){this.cell.createRow(t,e),t.classList.add(this.style.cssClasses.tr)},e.prototype.updateRow=function(t,e){this.cell.updateRow(t,e)},e}($);const ht=function(){function t(t,e,i){var o=this;void 0===i&&(i={}),this.node=t,this.tableId=0,this.sections=[],this.options={columnPadding:0,async:C,minScrollDelta:30},Object.assign(this.options,i);var r=e.startsWith("#")?e.slice(1):e;t.id=r,t.innerHTML='<header id="header-'+r+'" class="'+U+" "+z("header-"+r)+'">\n      <footer class="'+N+" "+z("footer-"+r)+'">&nbsp;</footer>\n    </header>\n    <main id="body-'+r+'" class="'+W+" "+z("body-"+r)+'">\n      <footer class="'+N+'">&nbsp;</footer>\n    </main>',t.classList.add(z(),B,"lineup-engine"),this.style=new rt(this.node,r);var n=w(this.main,this.options.async,(function(t){if(!(Math.abs(n.left-t.left)<o.options.minScrollDelta&&Math.abs(n.width-t.width)<o.options.minScrollDelta)){var e=t.left>n.left;n=t,o.onScrolledHorizontally(t.left,t.width,e)}}))}return t.prototype.update=function(){var t=this;this.onScrolledHorizontally(this.main.scrollLeft,this.main.clientWidth,!1);var e=0;this.sections.forEach((function(i){i.body.style.left=e+"px",i.header.style.left=e+"px",e+=i.width+t.options.columnPadding}))},t.prototype.onScrolledHorizontally=function(t,e,i){var o=this,r=0,n=t+e;this.sections.forEach((function(e){var s=r+e.width;s<t||r>n?e.hide():e.show(Math.max(0,t-r),Math.min(n-r,e.width),i),r=s+o.options.columnPadding})),this.updateOffset()},t.prototype.updateOffset=function(){var t=this,e=this.header.getElementsByTagName("footer")[0],i=this.main.getElementsByTagName("footer")[0],o=this.sections.reduce((function(t,e){return Math.max(t,e.height)}),0),r=this.sections.reduce((function(e,i){return e+i.width+t.options.columnPadding}),0);J(e,r,0),J(i,r,o)},t.prototype.destroy=function(){this.sections.forEach((function(t){return t.destroy()})),this.node.remove()},Object.defineProperty(t.prototype,"doc",{get:function(){return this.node.ownerDocument},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){return this.node.getElementsByTagName("header")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"main",{get:function(){return this.node.getElementsByTagName("main")[0]},enumerable:!1,configurable:!0}),t.prototype.pushTable=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.doc.createElement("article"),r=this.doc.createElement("article"),s=this.node.id+"T"+this.tableId;this.tableId+=1;var l=it(s),a=ot(s);o.id=l.thead,o.classList.add(k,a.thead),r.id=l.tbody,r.classList.add(V,a.tbody),this.header.insertBefore(o,this.header.lastElementChild),this.main.appendChild(r);var h=t.call.apply(t,n([this,o,r,s,this.style],e));return h.init(),this.sections.push(h),this.update(),h},t.prototype.pushSeparator=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.doc.createElement("section"),r=this.doc.createElement("section");o.classList.add(z("header-separator")),r.classList.add(z("separator")),this.header.insertBefore(o,this.header.lastElementChild),this.main.appendChild(r);var s=t.call.apply(t,n([this,o,r,this.style],e));return s.init(),this.sections.push(s),this.update(),s},t.prototype.remove=function(t){var e=this.sections.indexOf(t);return!(e<0||(this.sections.splice(e,1),t.destroy(),this.update(),0))},t.prototype.clear=function(){this.sections.splice(0,this.sections.length).forEach((function(t){return t.destroy()})),this.update()},t.prototype.widthChanged=function(){this.update()},t}();var ct="2.2.0",dt="20210323-115814";return e})()}));
//# sourceMappingURL=lineupengine.js.map