/*! lineupengine - v2.0.0-alpha.5 - 2018
* https://lineupengine.js.org
* Copyright (c) 2018 Samuel Gratzl; Licensed MIT */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.lineupengine=e():t.lineupengine=e()}(window,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(0);function n(t){return null!=t&&t&&"function"==typeof t.then}var o=Symbol("aborted");function r(t,e,i){return function(s,l){return{then:r(t.then(function(t){var i=e()?o:t,r=s?s(i):i;return n(r)?r.then(function(t){return e()?o:t}):e()?o:r}),e,i),abort:i}}}function s(t){var e=null,i=new Promise(function(t){return e=t}),n=function(){null!=e&&(e(o),e=null)};return{then:r(Promise.race([i,t]),function(){return null===e},n),abort:n}}function l(t){var e=Promise.all(t),i=null,n=new Promise(function(t){return i=t}),s=function(){if(null!=i){i(o);for(var e=0,n=t;e<n.length;e++){var r=n[e];a(r)&&r.abort()}i=null}};return{then:r(Promise.race([n,e]),function(){return null===i},s),abort:s}}function a(t){return null!=t&&t&&"function"==typeof t.then&&"function"==typeof t.abort}function h(t){return null!=t&&t&&a(t.ready)}function c(t){return{then:function(e,i){var o=e?e(t):t;return a(o)?o:n(o)?s(o):{then:c(o),abort:function(){}}},abort:function(){}}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function d(t,e){function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var f,p=function(){function t(t,e){var i=this;this.context=t,this.key=e,this.cache=[],this.lastFilled=0,this.key2index=new Map,this.context.exceptions.forEach(function(t){i.cache[t.index]=t.y,i.key2index.set(e(t.index),t.index)})}return t.prototype.findValidStart=function(t){for(var e=t-1;e>=0;--e)if(void 0!==this.cache[e])return e;return-1},t.prototype.posByKey=function(t){if(this.key2index.has(t)){var e=this.key2index.get(t);return{index:e,pos:this.pos(e)}}return this.fillCacheTillKey(t)},t.prototype.pos=function(t){if(0===this.context.exceptions.length)return t*this.context.defaultRowHeight;var e=this.cache[t];if(void 0!==e)return e;var i=this.findValidStart(t);return i<0?this.fillCache(0,t,0):this.fillCache(i+1,t,this.cache[i]+this.heightOf(i)),this.cache[t]},t.prototype.fillCache=function(t,e,i,n){if(e<=this.lastFilled){if(!n)return;for(var o=t;o<=e;++o)n(o,this.key(o),this.cache[o])}else{var r=i;for(o=t;o<=e;++o){this.cache[o]=r;var s=this.key(o);this.key2index.set(s,o),n&&n(o,s,r),r+=this.heightOf(o)}}},t.prototype.heightOf=function(t){var e=this.context.exceptionsLookup;return e.has(t)?e.get(t):this.context.defaultRowHeight},t.prototype.exceptionHeightOf=function(t,e){void 0===e&&(e=!1);var i=this.context.padding(t),n=this.context.exceptionsLookup;return n.has(t)?n.get(t)-i:e?this.context.defaultRowHeight-i:null},t.prototype.padding=function(t){return this.context.padding(t)},t.prototype.fillCacheTillKey=function(t){for(var e=0,i=this.lastFilled;i<this.context.numberOfRows;++i,++this.lastFilled){var n=this.cache[i];if(void 0===n){var o=this.key(i);if(this.cache[i]=e,this.key2index.set(o,i),o===t)return{index:i,pos:e};e+=this.heightOf(i)}else e=n+this.heightOf(i)}return{index:-1,pos:-1}},t.prototype.positions=function(t,e,i,n){this.fillCache(t,e,i,n)},t}();!function(t){t[t.UPDATE=0]="UPDATE",t[t.UPDATE_CREATE=1]="UPDATE_CREATE",t[t.UPDATE_REMOVE=2]="UPDATE_REMOVE",t[t.SHOW=3]="SHOW",t[t.HIDE=4]="HIDE"}(f||(f={}));var y=1;function m(t,e,i){var n=t.previous,o=t.mode,r=t.nodeY,s=t.current,l=null==n.height?e:n.height,a=null==s.height?i:s.height;return o===f.UPDATE&&Math.abs(n.y-r)<=y&&Math.abs(l-a)<=y}var v=[{delay:0,apply:function(t){var e=t.mode,i=t.previous,n=t.nodeY,o=t.current,r=t.node;r.dataset.animation=f[e].toLowerCase(),r.style.transform="translate(0, "+(i.y-n)+"px)",e===f.SHOW?r.style.height=null!==o.height?o.height+"px":null:r.style.height=i.height+"px",r.style.opacity=e===f.SHOW?"0":e===f.HIDE?"1":null}},{delay:10,apply:function(t){var e=t.mode,i=t.current,n=t.nodeY,o=t.node;o.style.transform=e===f.HIDE||e===f.UPDATE_REMOVE?"translate(0, "+(i.y-n)+"px)":null,e!==f.HIDE&&(o.style.height=null!==i.height?i.height+"px":null),o.style.opacity=e===f.SHOW?"1":e===f.HIDE?"0":null}},{delay:1100,apply:function(t){var e=t.node;delete e.dataset.animation,e.style.opacity=null,e.style.transform=null}}],g="animation";var b=function(){function t(t){var e=this;this.node=t,this.sync={handler:[],prev:null,timer:-1},this.animation={handler:[],prev:null,timer:-1},this.numbers=new Map,this.handleAnimationImpl=function(){1===e.animation.timer&&(e.handle(e.animation),e.animation.timer=-1)},t.addEventListener("scroll",function(){e.sync.handler.length>0&&e.handle(e.sync),e.handleAnimation(),e.handleTimeouts()},{passive:!0})}return Object.defineProperty(t.prototype,"current",{get:function(){return this.asInfo()},enumerable:!0,configurable:!0}),t.prototype.handle=function(t){var e=this.current;if(!(t.prev&&Math.abs(e.left-t.prev.left)+Math.abs(e.top-t.prev.top)<4)){t.prev=e;for(var i=0,n=t.handler;i<n.length;i++){(0,n[i])(e)}}},t.prototype.handleAnimation=function(){-1===this.animation.timer&&0!==this.animation.handler.length&&(this.animation.timer=1,requestAnimationFrame(this.handleAnimationImpl))},t.prototype.handleTimeouts=function(){var t=this;0!==this.numbers.size&&this.numbers.forEach(function(e,i){0!==e.handler.length&&(e.timer=self.setTimeout(function(){t.handle(e),e.timer=-1},i))})},t.prototype.asInfo=function(){return{left:this.node.scrollLeft,top:this.node.scrollTop,width:this.node.clientWidth,height:this.node.clientHeight}},t.prototype.push=function(t,e){switch("number"==typeof t&&(this.numbers.has(t)||this.numbers.set(t,{handler:[],prev:null,timer:-1}),this.numbers.get(t).handler.push(e)),t){case"sync":this.sync.handler.push(e);break;case"animation":this.animation.handler.push(e)}},t.prototype.remove=function(t){return[this.sync,this.animation].concat(Array.from(this.numbers.values())).some(function(e){var i=e.handler.indexOf(t);return i>=0&&e.handler.splice(i,1),i>=0})},t.prototype.isWaiting=function(t){switch(t){case"animation":return this.animation.timer>=0;case"sync":return!1;default:return this.numbers.has(t)&&this.numbers.get(t).timer>=0}},t}();function x(t,e,i){t.__le_scroller__||(t.__le_scroller__=new b(t));var n=t.__le_scroller__;return n.push(e,i),n.asInfo()}function C(t,e){return!!t.__le_scroller__&&t.__le_scroller__.isWaiting(e)}function w(t){for(;t.lastChild;)t.removeChild(t.lastChild);return t}var S,R=function(){function t(t,e,i){this.index=t,this.y=e,this.height=i}return Object.defineProperty(t.prototype,"y2",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),t}();function O(t,e,i){return void 0===i&&(i=0),{exceptions:[],exceptionsLookup:{keys:function(){return[].values()},get:function(){return e},has:function(){return!1},size:0},totalHeight:t*(e+=i),numberOfRows:t,defaultRowHeight:e,padding:function(){return i}}}function P(t,e,i){void 0===e&&(e=NaN),void 0===i&&(i=0);var n=new Map,o=[],r="function"==typeof i?i:function(){return i};isNaN(e)&&(e=function(t){var e=new Map;if(t.forEach(function(t){e.set(t,(e.get(t)||0)+1)}),0===e.size)return 20;var i=Array.from(e).sort(function(t,e){return t[1]!==e[1]?e[1]-t[1]:t[0]-e[0]}),n=i[0][0];return 0===n?i.length>1?i[1][0]:20:n}(t)),e+=r(-1);var s=-1,l=0,a=0,h=0;return t.forEach(function(t,i){if(t+=r(i),a+=t,h++,t!==e){n.set(i,t);var c=(i-s-1)*e;s=i;var u=l+c;l=u+t,o.push(new R(i,u,t))}}),{exceptionsLookup:n,exceptions:o,totalHeight:a,defaultRowHeight:e,numberOfRows:h,padding:r}}function E(t,e,i,n,o,r){void 0===i&&(i=2),void 0===n&&(n=10*e),void 0===o&&(o=.2),void 0===r&&(r=Date.now());var s=r,l=function(){var t=1e4*Math.sin(s++);return t-Math.floor(t)};return P({forEach:function(r){for(var s=0;s<t;++s)r(l()<o?i+Math.round(l()*(n-i)):e,s)}},e)}function A(t,e,i,n,o){if(0===o)return{first:0,last:-1,firstRowPos:0,endPos:0};if(1===o)return{first:0,last:0,firstRowPos:0,endPos:0===n.length?i:n[0].y2};var r=t,s=r+e;function l(t,e){return Math.min(o-1,e+Math.max(0,Math.floor(t/i)))}function a(t,e,n){void 0===n&&(n=!1);var a=s-t,h=l(r-t,e),c=l(a,e),u=t+(h-e)*i,d=t+(c+1-e)*i;return console.assert(!n||!(u>r||d<s&&c<o-1),"error",n,u,d,r,s,e,t),{first:h,last:c,firstRowPos:u,endPos:d}}var h=a(0,0,!0);if(0===n.length)return h;if(h.last<n[0].index)return h;if(h.last===n[0].index&&n[0].height>i)return Object.assign(h,{endPos:n[0].y2});var c=n[n.length-1];if(r>=c.y){var u=a(c.y2,c.index+1);return r<c.y2?Object.assign(u,{first:c.index,firstRowPos:c.y}):u}for(var d=[],f=n[0],p=0,y=n;p<y.length;p++){var m=y[p],v=m.y,g=m.y2;if(v>=s)break;g<=r?f=m:d.push(m)}if(0===d.length)return a(f.y2,f.index+1);var b=d[0],x=d[d.length-1],C=Math.max(0,b.index-Math.max(0,Math.ceil((b.y-r)/i))),w=x.index;s>=x.y2&&(w=l(s-x.y2,x.index+1));var S=b.y-(b.index-C)*i,R=x.y2+(w-x.index)*i;return console.assert(S<=r&&(R>=s||w===o-1),"error",S,R,r,s,b,x),{first:C,last:w,firstRowPos:S,endPos:R}}function H(t,e){var i=t.length,n=e.length;if(0===i)return{added:e,removed:[],common:0};if(0===n)return{added:[],removed:t,common:0};if(i===n)return{added:[],removed:[],common:i};var o=t.slice(Math.min(n,i));return{added:e.slice(Math.min(n,i)),removed:o,common:i-o.length}}function F(t,e,i){for(var n=0===t.length?0:t[t.length-1]+1,o=[],r=[],s=t.length-1;s>=0;--s){if(!(t[s]>=i))break;r.push(t.pop())}for(s=n;s<i;++s)e[s].frozen&&(o.push(s),t.push(s));return{target:t,added:o,removed:r}}!function(t){t[t.NONE=0]="NONE",t[t.ALL=1]="ALL",t[t.SOME=2]="SOME",t[t.SOME_BOTTOM=3]="SOME_BOTTOM",t[t.SOME_TOP=4]="SOME_TOP"}(S||(S={}));var T="le";function M(t){return t?T+"-"+t:T}var L=M("loading"),z=M("frozen"),j=M("hidden"),B=M("multi"),I=M("even"),D=M("shifted"),W=M("scrollbar-tester"),U=M("header"),N=M("body"),V=M("footer"),_=M("thead"),q=M("tbody"),K=M("tr"),Y=M("th"),k=M("td"),X=M("scrolling"),G=M("row-animation");function $(t){return t.classList.contains(L)}var J=function(){function t(t,e){void 0===e&&(e={});var i=this;this.body=t,this.pool=[],this.loadingPool=[],this.loading=new WeakMap,this.visible={first:0,forcedFirst:0,last:-1,forcedLast:-1},this.visibleFirstRowPos=0,this.scrollListener=null,this.lastScrollInfo=null,this.abortAnimation=function(){},this.options={async:g,minScrollDelta:10,mixins:[],scrollingHint:!1,batchSize:10,striped:!1,viewportOversize:200},this.adapter=this.createAdapter(),Object.assign(this.options,e),this.mixins=this.options.mixins.map(function(t){return new t(i.adapter)}),this.fragment=t.ownerDocument.createDocumentFragment()}return t.prototype.addMixin=function(t,e){this.mixins.push(new t(this.adapter,e))},t.prototype.createAdapter=function(){var t=this,e={visible:this.visible,addAtBeginning:this.addAtBeginning.bind(this),addAtBottom:this.addAtBottom.bind(this),removeFromBeginning:this.removeFromBeginning.bind(this),removeFromBottom:this.removeFromBottom.bind(this),updateOffset:this.updateOffset.bind(this),isScrollEventWaiting:function(){return C(t.bodyScroller,t.options.async)}};return Object.defineProperties(e,{visibleFirstRowPos:{get:function(){return t.visibleFirstRowPos},enumerable:!0},context:{get:function(){return t.context},enumerable:!0},scrollOffset:{get:function(){return t.lastScrollInfo?t.lastScrollInfo.top:0},enumerable:!0},scrollTotal:{get:function(){return t.lastScrollInfo?t.lastScrollInfo.height:t.bodyScroller.clientHeight},enumerable:!0}}),e},Object.defineProperty(t.prototype,"bodyScroller",{get:function(){return this.body.parentElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bodySizer",{get:function(){var t=this.bodyScroller,e=Array.from(t.children).find(function(t){return"footer"===t.tagName.toLowerCase()});if(e)return e;var i=t.ownerDocument.createElement("footer");return i.classList.add(V,M("footer-"+this.idPrefix)),t.insertBefore(i,t.firstChild),i},enumerable:!0,configurable:!0}),t.prototype.init=function(){var t=this,e=this.bodyScroller,i=x(e,this.options.async,this.scrollListener=function(e){if(t.lastScrollInfo=e,!(Math.abs(i.top-e.top)<t.options.minScrollDelta&&Math.abs(i.height-e.height)<t.options.minScrollDelta)){var n=e.top>i.top;i=e,t.onScrolledVertically(e.top,e.height,n),t.options.scrollingHint&&t.body.classList.remove(X)}});this.options.scrollingHint&&x(e,"animation",function(){return t.body.classList.add(X)}),this.recreate()},t.prototype.destroy=function(){var t,e;t=this.bodyScroller,e=this.scrollListener,t.__le_scroller__&&t.__le_scroller__.remove(e),this.body.remove()},t.cleanUp=function(t){t.style.height=null},t.prototype.select=function(t){var e,i;return this.pool.length>0?(e=this.pool.pop(),i=this.updateRow(e,t)):this.loadingPool.length>0?((e=this.loadingPool.pop()).classList.remove(L),i=this.createRow(e,t)):((e=this.body.ownerDocument.createElement("div")).classList.add(K,M("tr-"+this.idPrefix)),i=this.createRow(e,t)),e.dataset.index=String(t),this.options.striped&&e.classList.toggle(I,t%2==0),{item:e,result:i}},t.prototype.selectProxy=function(){var t;return this.loadingPool.length>0?t=this.loadingPool.pop():(t=this.body.ownerDocument.createElement("div")).classList.add(L,K,M("tr-"+this.idPrefix)),t},t.prototype.recycle=function(e){(t.cleanUp(e),this.loading.has(e))?this.loading.get(e).abort():this.pool.push(e)},t.prototype.proxy=function(e,i){var n=this;if(!a(i))return e;var r=i,s=e,l=this.selectProxy();return l.dataset.index=s.dataset.index,l.style.height=s.style.height,this.loading.set(l,r),r.then(function(e){e===o?(t.cleanUp(s),n.pool.push(s)):n.body.replaceChild(s,l),n.loading.delete(l),t.cleanUp(l),n.loadingPool.push(l)}),l},t.prototype.create=function(t){var e=this.select(t),i=e.item,n=e.result,o=this.context,r=o.exceptionsLookup,s=o.padding;return r.has(t)&&(i.style.height=r.get(t)-s(t)+"px"),this.proxy(i,n)},t.prototype.removeAll=function(t){void 0===t&&(t=!0);var e=this.body;if(!t)return Array.from(e.children);for(var i=[];e.lastElementChild;){var n=e.lastElementChild;e.removeChild(n),this.recycle(n),i.push(n)}return i},t.prototype.update=function(){var t=this,e=this.visible.first,i=this.fragment,n=Array.from(this.body.children);w(this.body),n.forEach(function(n,o){if(t.loading.has(n))i.appendChild(n);else{var r=t.updateRow(n,o+e);i.appendChild(t.proxy(n,r))}}),this.body.appendChild(i)},t.prototype.forEachRow=function(t,e){var i=this;void 0===e&&(e=!1);var n=Array.from(this.body.children),o=this.fragment;e||w(this.body),n.forEach(function(n,r){$(n)||"update_remove"===n.dataset.animation||"hide"===n.dataset.animation||t(n,r+i.visible.first),e||o.appendChild(n)}),e||this.body.appendChild(o)},t.prototype.removeFromBeginning=function(t,e,i){return void 0===i&&(i=!0),this.remove(t,e,!0,i)},t.prototype.removeFromBottom=function(t,e,i){return void 0===i&&(i=!0),this.remove(t,e,!1,i)},t.prototype.remove=function(t,e,i,n){if(void 0===n&&(n=!0),!(e<t)){for(var o=this.body,r=[],s=i?o.firstChild:o.lastChild,l=t;l<=e;++l){var a=s;s=i?s.nextSibling:s.previousSibling,n&&(o.removeChild(a),this.recycle(a)),r.push(a)}return r}},t.prototype.addAtBeginning=function(t,e,i){if(void 0===i&&(i=!0),!(e<t)){var n=this.fragment;if(t!==e||!i){for(var o=t;o<=e;++o)n.appendChild(this.create(o));return i&&this.body.insertBefore(n,this.body.firstChild),n}this.body.insertBefore(this.create(t),this.body.firstChild)}},t.prototype.addAtBottom=function(t,e,i){if(void 0===i&&(i=!0),!(e<t)){if(t!==e||!i){for(var n=this.fragment,o=t;o<=e;++o)n.appendChild(this.create(o));return i&&this.body.appendChild(n),n}this.body.appendChild(this.create(t))}},t.prototype.updateOffset=function(t){this.visibleFirstRowPos=t,this.updateSizer(t)},t.prototype.updateSizer=function(t){var e=this.context.totalHeight;Z(this.body,0,t.toFixed(0)),Z(this.bodySizer,0,Math.max(0,e-1).toFixed(0))},t.prototype.recreate=function(t){return this.abortAnimation(),t?this.recreateAnimated(t):this.recreatePure()},t.prototype.recreatePure=function(){var t=this.context,e=this.bodyScroller;this.updateOffset(0),this.removeAll(),this.clearPool();var i=A(e.scrollTop,e.clientHeight,t.defaultRowHeight,t.exceptions,t.numberOfRows),n=i.first,o=i.last,r=i.firstRowPos;this.visible.first=this.visible.forcedFirst=n,this.visible.last=this.visible.forcedLast=o,n<0?this.updateOffset(0):(this.addAtBottom(n,o),this.updateOffset(r))},t.prototype.recreateAnimated=function(t){var e=this,i=new Map,n=new p(t.previous,t.previousKey),o=new p(this.context,t.currentKey),r=A(this.bodyScroller.scrollTop,this.bodyScroller.clientHeight,o.context.defaultRowHeight,o.context.exceptions,o.context.numberOfRows),s=Array.from(this.body.children),l=Object.assign({},this.visible);w(this.body),n.positions(l.first,Math.min(l.last,l.first+s.length),this.visibleFirstRowPos,function(t,e,n){var o=s[t];o&&i.set(e,{n:o,pos:n,i:t})}),this.visible.first=this.visible.forcedFirst=r.first,this.visible.last=this.visible.forcedLast=r.last;var a=this.fragment,h=[],c=r.firstRowPos;o.positions(r.first,r.last,r.firstRowPos,function(t,r,s){var l,u,d=f.UPDATE;if(i.has(r)){var p=i.get(r);i.delete(r),p.n.dataset.index=String(t),l=e.proxy(p.n,e.updateRow(p.n,t)),u={index:p.i,y:p.pos,height:n.exceptionHeightOf(p.i,!0)}}else{var y=n.posByKey(r);l=e.create(t),d=y.index<0?f.SHOW:f.UPDATE_CREATE,u={index:y.index,y:y.pos>=0?y.pos:s,height:y.index<0?o.exceptionHeightOf(t,!0):n.exceptionHeightOf(y.index,!0)}}h.push({node:l,key:r,mode:d,previous:u,nodeY:c,nodeYCurrentHeight:s,current:{index:t,y:s,height:o.exceptionHeightOf(t)}}),l.style.transform="translate(0, "+(c-s)+"px)",c+=u.height+(u.index<0?o.padding(t):n.padding(u.index)),a.appendChild(l)});var u=r.endPos;i.forEach(function(t,e){var i=o.posByKey(e),r=i.pos>=0?i.pos:t.pos,s=t.n;s.style.transform="translate(0, "+(t.pos-c)+"px)",a.appendChild(s);var l=n.exceptionHeightOf(t.i,!0);h.push({node:t.n,key:e,mode:i.index<0?f.HIDE:f.UPDATE_REMOVE,previous:{index:t.i,y:t.pos,height:l},nodeY:c,nodeYCurrentHeight:u,current:{index:i.index,y:r,height:i.index<0?null:o.exceptionHeightOf(i.index)}}),u+=i.index<0?o.context.defaultRowHeight:o.exceptionHeightOf(i.index,!0)+o.padding(i.index),c+=l+n.padding(t.i)}),this.updateOffset(r.firstRowPos),this.animate(h,t.phases||v,n,o,a)},t.prototype.animate=function(t,e,i,n,o){var r=this;if(t.length<=0)this.body.appendChild(o);else{for(var s=-1,l=0,a=function(e,o){void 0===o&&(o=t),o.forEach(function(t){return e.apply(t,i,n)})},h=function(){if(console.assert(t[0].node.offsetTop>=0,"dummy log for forcing dom update"),a(e[l++]),l<e.length){var i=e[l];s=self.setTimeout(h,i.delay)}else{var n=r.body.classList;Array.from(n).forEach(function(t){t.startsWith(M())&&t.endsWith("-animation")&&n.remove(t)}),t.forEach(function(t){var e=t.node,i=t.mode;i!==f.UPDATE_REMOVE&&i!==f.HIDE||(e.remove(),e.style.transform=null,r.recycle(e))}),r.abortAnimation=function(){},s=-1}};0===e[l].delay;)a(e[l++]);var c=this.body;this.body.appendChild(o);var u=[];t=t.filter(function(t){return!m(t,i.context.defaultRowHeight,n.context.defaultRowHeight)||(u.push(t),!1)}),u.length>0&&e.slice(l).forEach(function(t){return a(t,u)}),0!==t.length&&(c.classList.add(G),new Set(t.map(function(t){return t.mode})).forEach(function(t){c.classList.add(M(f[t].toLowerCase().split("_")[0]+"-animation"))}),this.abortAnimation=function(){s<=0||(clearTimeout(s),s=-1,l=e.length-1,h())},s=self.setTimeout(h,e[l].delay))}},t.prototype.clearPool=function(){this.pool.splice(0,this.pool.length)},t.prototype.revalidate=function(){var t=this.bodyScroller;this.onScrolledVertically(t.scrollTop,t.clientHeight,!0),this.updateOffset(this.visibleFirstRowPos)},t.prototype.onScrolledVertically=function(t,e,i){for(var n=this.options.viewportOversize,o=Math.max(0,t-n),r=this.onScrolledImpl(o,e+n+(t-o)),s=0,l=this.mixins;s<l.length;s++){l[s].onScrolled(i,r)}return r},t.prototype.shiftLast=function(t,e){if(e>=this.options.batchSize)return t;var i=this.context.numberOfRows;return Math.min(i-1,t+(this.options.batchSize-e))},t.prototype.shiftFirst=function(t,e,i){if(i>=this.options.batchSize||t<=0)return{first:t,firstRowPos:e};for(var n=Math.max(0,t-(this.options.batchSize-i)),o=this.context,r=o.exceptionsLookup,s=o.defaultRowHeight,l=e,a=n;a<t;++a)r.has(a)?l-=r.get(a):l-=s;return{first:n,firstRowPos:l}},t.prototype.onScrolledImpl=function(t,e){var i=this.context,n=A(t,e,i.defaultRowHeight,i.exceptions,i.numberOfRows),o=n.first,r=n.last,s=n.firstRowPos,l=this.visible;if(l.forcedFirst=o,l.forcedLast=r,o-l.first>=0&&r-l.last<=0)return S.NONE;var a,h,c=S.SOME,u=!1;if(o>l.last||r<l.first)a=this.removeAll(!1),h=this.addAtBottom(o,r,!1),u=!0,c=S.ALL;else if(o<l.first){l.last-(r+1)>=this.options.batchSize?a=this.removeFromBottom(r+1,l.last,!1):r=l.last;var d=this.shiftFirst(o,s,l.first-1-o);o=d.first,s=d.firstRowPos,h=this.addAtBeginning(o,l.first-1,!1),u=!1,c=S.SOME_TOP}else{o-1-l.first>=this.options.batchSize?a=this.removeFromBeginning(l.first,o-1,!1):(o=l.first,s=this.visibleFirstRowPos),r=this.shiftLast(r,r-l.last+1),h=this.addAtBottom(l.last+1,r,!1),u=!0,c=S.SOME_BOTTOM}return l.first=o,l.last=r,this.updateOffset(s),this.manipulate(a,h,u),c},t.prototype.manipulate=function(t,e,i){if(t)for(var n=0,o=t;n<o.length;n++){var r=o[n];r.remove(),this.recycle(r)}e&&(i?this.body.appendChild(e):this.body.insertBefore(e,this.body.firstChild))},t}(),Q=J;function Z(t,e,i){var n="translate("+e+"px, "+i+"px)",o=t;o.__transform__!==n&&(o.__transform__=t.style.transform=n)}function tt(t,e){for(var i=0,n=Object.keys(e);i<n.length;i++){var o=n[i],r=e[o];if(r.endsWith(" !important")){var s=r.slice(0,-" !important".length);if(t[o]!==s){t[o]=s;var l=o.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase();t.setProperty(l,s,"important")}}else t[o]!==r&&(t[o]=r)}}var et=function(){function t(t){this.rules=[],this.testVerifyTimeout=-1,this.node=t.ownerDocument.createElement("style"),this.node.appendChild(t.ownerDocument.createTextNode("")),t.appendChild(this.node)}return t.prototype.destroy=function(){this.node.remove()},t.prototype.verifySheet=function(){var t=this,e=this.sheet;if(e){var i=e.cssRules;if(i.length!==this.rules.length||!this.rules.every(function(t,e){return i[e].selectorText===t.selector})){console.warn("invalid sheet rules detected");for(var n=i.length,o=0;o<n;++o)e.deleteRule(o);for(var r=0,s=this.rules;r<s.length;r++){var l=s[r],a=e.insertRule(l.selector+" {}",e.cssRules.length),h=e.cssRules[a];l.selector=h.selectorText,tt(h.style,l.style)}}}else{if(this.testVerifyTimeout>=0)return;this.testVerifyTimeout=self.setTimeout(function(){t.testVerifyTimeout=-1,t.verifySheet()},20)}},Object.defineProperty(t.prototype,"sheet",{get:function(){return this.node.sheet},enumerable:!0,configurable:!0}),t.prototype.getSheetRule=function(t){var e=this.sheet;return e?e.cssRules[t]:null},t.prototype.addRule=function(t,e,i){this.verifySheet();var n=this.sheet;if(n){var o=n.insertRule(e+" {}",n.cssRules.length),r=n.cssRules[o];return this.rules.push({id:t,selector:r.selectorText,style:i}),tt(r.style,i),t}this.rules.push({id:t,selector:e,style:i})},t.prototype.updateRule=function(t,e,i){this.verifySheet();var n=this.rules.findIndex(function(e){return e.id===t});if(n<0)return this.addRule(t,e,i);var o=this.rules[n];o.selector=e,o.style=i;var r=this.getSheetRule(n);return r&&(r.selectorText.replace(/\s/gm,"")!==e.replace(/\s/gm,"")&&(r.selectorText=e,o.selector=r.selectorText),tt(r.style,i)),t},t.prototype.deleteRule=function(t){this.verifySheet();var e=this.rules.findIndex(function(e){return e.id===t});if(!(e<0)){this.rules.splice(e,1);var i=this.sheet;i&&i.deleteRule(e)}},Object.defineProperty(t.prototype,"ruleNames",{get:function(){return this.rules.map(function(t){return t.id})},enumerable:!0,configurable:!0}),t}();function it(t,e){return e=e.startsWith("#")?e.slice(1):e,t.innerHTML='\n  <header id="header-'+e+'" class="'+U+" "+M("header-"+e)+'">\n    <article class="'+_+" "+M("thead-"+e)+'"></article>\n  </header>\n  <main id="body-'+e+'" class="'+N+" "+M("body-"+e)+'">\n    <footer class="'+V+'">&nbsp;</footer>\n    <article class="'+q+" "+M("tbody-"+e)+'"></article>\n  </main>',t}function nt(t){return{thead:"thead-"+t,tbody:"tbody-"+t,tr:"tr-"+t,th:"th-"+t,td:"td-"+t}}function ot(t){var e=nt(t);return{thead:M(e.thead),tbody:M(e.tbody),tr:M(e.tr),th:M(e.th),td:M(e.td)}}var rt=function(t){function e(e,i){var n=t.call(this,e)||this;n.id=i.startsWith("#")?i.slice(1):i,n.ids=nt(n.id),n.cssClasses=ot(n.id);var o=e.getElementsByTagName("header")[0],r=e.getElementsByTagName("main")[0];self.setTimeout(function(){var t=function(t){var e=t.ownerDocument.body;e.insertAdjacentHTML("beforeend",'\n    <div class="'+W+'"><div></div></div>\n  ');var i=e.lastElementChild,n=i.offsetWidth-i.clientWidth,o=i.offsetHeight-i.clientHeight;return i.remove(),{width:n,height:o}}(e).width;n.updateRule("__scollBarFix2","#header-"+n.id+" > article:last-of-type",{borderRight:t+"px solid transparent"})},20);var s=o.scrollLeft;return x(r,"animation",function(t){var i=t.left;s!==i&&(s=o.scrollLeft=i),e.classList.toggle(D,t.left>0)}),n}return d(e,t),e.prototype.update=function(t,e,i,n,o,r){void 0===r&&(r="px");var s=nt(o),l=ot(o),a=""+e.reduce(function(t,e,n){return t+e.width+i(n)},0)+r;this.updateRule("__heightsRule"+l.tr,"."+l.tr,{height:t+"px",width:a}),this.updateRule("__heightsRule"+l.tbody,"#"+s.tbody,{width:a}),this.updateColumns(e,i,l,n,r)},e.prototype.remove=function(t){var e=ot(t);this.deleteRule("__heightsRule"+e.tr),this.deleteRule("__heightsRule"+e.tbody);for(var i="__col"+e.td+"_",n=this.ruleNames.reduce(function(t,e){return t+(e.startsWith(i)?1:0)},0),o=0;o<n;++o)this.deleteRule(""+i+o)},e.prototype.updateColumns=function(t,e,i,n,o){var r=this;void 0===o&&(o="px");var s="__col"+i.td+"_",l=new Set(this.ruleNames.filter(function(t){return t.startsWith(s)})),a=0;t.forEach(function(t,h){var c="."+i.th+'[data-id="'+t.id+'"]',u={width:""+t.width+o},d="."+i.td+'[data-id="'+t.id+'"]',f={transform:"translateX("+a+o+")",width:""+t.width+o};t.frozen&&(u.left=a+"px",r.updateRule(""+s+d+"F","."+i.td+"."+D+'[data-id="'+t.id+'"]',{transform:"translateX(0)",left:""+(a+n)+o}),l.delete(""+s+d+"F")),r.updateRule(""+s+c,c,u),l.delete(""+s+c),r.updateRule(""+s+d,d,f),l.delete(""+s+d),a+=t.width+e(h)}),l.forEach(function(t){return r.deleteRule(t)})},e}(et);var st=function(){function t(t,e,i){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];var r=this;this.header=t,this.style=e,this.tableId=i,this.cellPool=[],this.loading=new WeakMap,this.visibleColumns={frozen:[],first:0,forcedFirst:0,last:-1,forcedLast:-1},this.visibleFirstColumnPos=0,this.horizontallyShifted=!1,this.columnAdapter=this.createColumnAdapter(),this.columnMixins=n.map(function(t){return new t(r.columnAdapter)}),this.columnFragment=t.ownerDocument.createDocumentFragment()}return t.prototype.leftShift=function(){var t=this.context,e=this.visibleColumns.frozen.reduce(function(e,i){return e+t.columns[i].width+t.column.padding(i)},0);return this.visibleFirstColumnPos-e},Object.defineProperty(t.prototype,"headerScroller",{get:function(){return this.header.parentElement},enumerable:!0,configurable:!0}),t.prototype.addColumnMixin=function(t,e){this.columnMixins.push(new t(this.columnAdapter,e))},t.prototype.createColumnAdapter=function(){var t=this,e={visible:this.visibleColumns,addAtBeginning:this.addColumnAtStart.bind(this),addAtBottom:this.addColumnAtEnd.bind(this),removeFromBeginning:this.removeColumnFromStart.bind(this),removeFromBottom:this.removeColumnFromEnd.bind(this),updateOffset:this.updateColumnOffset.bind(this),scroller:this.headerScroller,syncFrozen:this.syncFrozen.bind(this),isScrollEventWaiting:function(){return C(t.headerScroller,"animation")}};return Object.defineProperties(e,{visibleFirstRowPos:{get:function(){return t.visibleFirstColumnPos},enumerable:!0},context:{get:function(){return t.context.column},enumerable:!0},scrollOffset:{get:function(){return t.lastScrollInfo?t.lastScrollInfo.left:0},enumerable:!0},scrollTotal:{get:function(){return t.lastScrollInfo?t.lastScrollInfo.width:t.headerScroller.clientWidth},enumerable:!0}}),e},t.prototype.init=function(){var t=this,e=this.context;this.style.update(e.defaultRowHeight-e.padding(-1),e.columns,e.column.padding,0,this.tableId),e.columns.forEach(function(){t.cellPool.push([])})},t.prototype.onScrolledHorizontally=function(t,e,i){for(var n=this.onScrolledHorizontallyImpl(t,e),o=0,r=this.columnMixins;o<r.length;o++){r[o].onScrolled(i,n)}return n},t.prototype.removeColumnFromStart=function(t,e,i){var n=this;void 0===i&&(i=this.visibleColumns.frozen.length),this.forEachRow(function(o){n.removeCellFromStart(o,t,e,i)})},t.prototype.removeCellFromStart=function(t,e,i,n){for(var o=e;o<=i;++o){var r=0===n?t.firstElementChild:t.children[n];r.remove(),this.recycleCell(r,o)}},t.prototype.removeColumnFromEnd=function(t,e){var i=this;this.forEachRow(function(n){i.removeCellFromEnd(n,t,e)})},t.prototype.removeCellFromEnd=function(t,e,i){for(var n=i;n>=e;--n){var o=t.lastElementChild;o.remove(),this.recycleCell(o,n)}},t.prototype.removeFrozenCells=function(t,e,i){for(var n=0,o=e;n<o.length;n++){var r=o[n],s=t.children[i];s.remove(),this.recycleCell(s,r)}},t.prototype.removeFrozenColumns=function(t,e){var i=this;this.forEachRow(function(n){i.removeFrozenCells(n,t,e)})},t.prototype.removeAllColumns=function(t){var e=this;this.forEachRow(function(i){e.removeAllCells(i,t)})},t.prototype.removeAllCells=function(t,e,i){var n=this;void 0===i&&(i=this.visibleColumns.first);var o=Array.from(t.children),r=this.visibleColumns.frozen;if(w(t),e||0===r.length)for(var s=0,l=r;s<l.length;s++){var a=l[s];this.recycleCell(o.shift(),a)}else for(var h=0,c=r;h<c.length;h++){c[h];t.appendChild(o.shift())}o.forEach(function(t,e){n.recycleCell(t,e+i)})},t.prototype.selectProxyCell=function(t,e,i){var n,o,r=this.cellPool[e],s=i[e],l=r.pop(),a=l?this.updateCell(l,t,s)||l:this.createCell(this.header.ownerDocument,t,s);return h(a)?(n=a.item,o=a.ready):n=a,n!==l&&(n.dataset.id=s.id,n.classList.add(k,this.style.cssClasses.td,M("td-"+this.tableId))),this.updateShiftedState(n,s),{item:n,ready:o}},t.prototype.handleCellReady=function(t,e,i){var n=this;void 0===i&&(i=-1),t.classList.add(L);var r=e;return this.loading.set(t,r),r.then(function(e){n.loading.delete(t),t.classList.remove(L),e===o&&i>=0&&n.cellPool[i].push(t)}),t},t.prototype.selectCell=function(t,e,i){var n=this.selectProxyCell(t,e,i),o=n.item,r=n.ready;return a(r)?this.handleCellReady(o,r,e):o},t.prototype.updateShiftedState=function(t,e){t.classList.toggle(D,e.frozen&&this.horizontallyShifted)},t.prototype.recycleCell=function(t,e){(void 0===e&&(e=-1),this.loading.has(t))?this.loading.get(t).abort():!$(t)&&e>=0&&this.cellPool[e].push(t)},t.prototype.addColumnAtStart=function(t,e,i){var n=this;void 0===i&&(i=this.visibleColumns.frozen.length);var o=this.context.columns;this.forEachRow(function(r,s){n.addCellAtStart(r,s,t,e,i,o)})},t.prototype.addCellAtStart=function(t,e,i,n,o,r){for(var s=n;s>=i;--s){var l=this.selectCell(e,s,r);t.insertBefore(l,o>0?t.children[o]:t.firstChild)}},t.prototype.insertFrozenCells=function(t,e,i,n,o){for(var r=t.children[n],s=0,l=i;s<l.length;s++){var a=l[s],h=this.selectCell(e,a,o);r?t.insertBefore(h,r):t.appendChild(h)}},t.prototype.insertFrozenColumns=function(t,e){var i=this,n=this.context.columns;this.forEachRow(function(o,r){i.insertFrozenCells(o,r,t,e,n)})},t.prototype.addColumnAtEnd=function(t,e){var i=this,n=this.context.columns;this.forEachRow(function(o,r){i.addCellAtEnd(o,r,t,e,n)})},t.prototype.verifyRows=function(){var t=this.context.columns;this.forEachRow(function(e,i){return lt(e,i,t)})},t.prototype.addCellAtEnd=function(t,e,i,n,o){for(var r=i;r<=n;++r){var s=this.selectCell(e,r,o);t.appendChild(s)}},t.prototype.updateHeaders=function(){var t=this,e=this.context.columns;Array.from(this.header.children).forEach(function(i,n){var o,r=i,s=e[n],l=t.updateHeader(r,s);(o=h(l)?t.handleCellReady(l.item,l.ready,-1):l||r)!==r&&(o.dataset.id=s.id,o.classList.add(Y,t.style.cssClasses.th,M("th-"+t.tableId)),t.header.replaceChild(r,o))})},t.prototype.recreate=function(t,e){var i=this,n=this.context;this.style.update(n.defaultRowHeight-n.padding(-1),n.columns,n.column.padding,-this.leftShift(),this.tableId),this.clearPool();for(var o=this.cellPool.length;o<n.columns.length;++o)this.cellPool.push([]);for(var r=this.columnFragment,s=r.ownerDocument,l=new Map;this.header.lastChild;){var a=this.header.lastChild;this.header.removeChild(a),l.set(a.dataset.id,a)}n.columns.forEach(function(t){var e,n=l.get(t.id),o=n?i.updateHeader(n,t)||n:i.createHeader(s,t);(e=h(o)?i.handleCellReady(o.item,o.ready,-1):o)!==n&&(e.dataset.id=t.id,e.classList.add(Y,i.style.cssClasses.th,M("th-"+i.tableId))),r.appendChild(e)}),this.header.appendChild(r);var c=A(t,e,n.column.defaultRowHeight,n.column.exceptions,n.column.numberOfRows),u=c.first,d=c.last,f=c.firstRowPos;if(this.visibleColumns.first=this.visibleColumns.forcedFirst=u,this.visibleColumns.last=this.visibleColumns.forcedLast=d,n.columns.some(function(t){return t.frozen})){var p=F([],n.columns,u).target;this.visibleColumns.frozen=p}else this.visibleColumns.frozen=[];this.updateColumnOffset(f)},t.prototype.clearPool=function(){this.cellPool.forEach(function(t){return t.splice(0,t.length)})},t.prototype.updateColumnOffset=function(t){var e=t!==this.visibleFirstColumnPos;if(this.visibleFirstColumnPos=t,e){var i=this.context;this.style.update(i.defaultRowHeight-i.padding(-1),i.columns,i.column.padding,-this.leftShift(),this.tableId)}},t.prototype.createRow=function(t,e){var i=this.context.columns,n=this.visibleColumns;if(n.frozen.length>0)for(var o=0,r=n.frozen;o<r.length;o++){var s=r[o],l=this.selectCell(e,s,i);t.appendChild(l)}for(s=n.first;s<=n.last;++s){l=this.selectCell(e,s,i);t.appendChild(l)}},t.prototype.updateRow=function(t,e){var i=this.context.columns,n=this.visibleColumns;switch(t.childElementCount){case 0:n.frozen.length>0&&this.insertFrozenCells(t,e,n.frozen,0,i),this.addCellAtEnd(t,e,n.first,n.last,i);break;case 1:var o=t.firstElementChild,r=o.dataset.id,s=i.findIndex(function(t){return t.id===r});t.removeChild(o),s>=0&&this.recycleCell(o,s),n.frozen.length>0&&this.insertFrozenCells(t,e,n.frozen,0,i),this.addCellAtEnd(t,e,n.first,n.last,i);break;default:this.mergeColumns(t,e)}},t.prototype.mergeColumns=function(t,e){for(var i=this,n=this.context.columns,o=this.visibleColumns,r=new Map;t.lastChild;){var s=t.lastChild;t.removeChild(s),r.set(s.dataset.id,s)}for(var l=function(o){var s=n[o],l=r.get(s.id);if(l){r.delete(s.id);var a,c=i.updateCell(l,e,s)||l;(a=h(c)?i.handleCellReady(c.item,c.ready,o):c)&&a!==l&&(a.dataset.id=s.id,a.classList.add(k,i.style.cssClasses.td,M("td-"+i.tableId))),i.updateShiftedState(a,s),t.appendChild(a)}else{var u=i.selectCell(e,o,n);t.appendChild(u)}},a=0,c=o.frozen;a<c.length;a++){l(c[a])}for(var u=o.first;u<=o.last;++u)l(u);if(0!==r.size){var d=new Map(n.map(function(t,e){return[t.id,e]}));r.forEach(function(t,e){var n=d.get(e);null!=n&&n>=0&&i.recycleCell(t,n)})}},t.prototype.updateShiftedStates=function(){if(this.context.columns.some(function(t){return t.frozen})){var t=this.horizontallyShifted,e=D;if(t){for(var i=Array.from(this.header.querySelectorAll("."+z+":not(."+e+")")),n=Array.from(this.body.querySelectorAll("."+z+":not(."+e+")")),o=0,r=i;o<r.length;o++){r[o].classList.add(e)}for(var s=0,l=n;s<l.length;s++){l[s].classList.add(e)}}else{i=Array.from(this.header.querySelectorAll("."+z+"."+e)),n=Array.from(this.body.querySelectorAll("."+z+"."+e));for(var a=0,h=i;a<h.length;a++){h[a].classList.remove(e)}for(var c=0,u=n;c<u.length;c++){u[c].classList.remove(e)}}}},t.prototype.syncFrozen=function(t){var e=this.context.columns,i=this.visibleColumns;if(!e.some(function(t){return t.frozen}))return 0;if(0===t)return i.frozen.length>0&&(this.removeFrozenColumns(i.frozen,0),i.frozen=[]),0;var n=i.frozen.length,o=F(i.frozen,e,t),r=o.target,s=o.added,l=o.removed;return l.length>0&&this.removeFrozenColumns(l,n-l.length),s.length>0&&this.insertFrozenColumns(s,n-l.length),i.frozen=r,r.length},t.prototype.onScrolledHorizontallyImpl=function(t,e){var i=this.horizontallyShifted!==t>0;this.horizontallyShifted=t>0;var n=this.context.column,o=A(t,e,n.defaultRowHeight,n.exceptions,n.numberOfRows),r=o.first,s=o.last,l=o.firstRowPos,a=this.visibleColumns;if(a.forcedFirst=r,a.forcedLast=s,r-a.first>=0&&s-a.last<=0)return i&&this.updateShiftedStates(),S.NONE;var h=S.SOME,c=this.syncFrozen(r);return r>a.last||s<a.first?(this.removeAllColumns(!1),this.addColumnAtEnd(r,s),h=S.ALL):r<a.first?(this.removeColumnFromEnd(s+1,a.last),this.updateShiftedStates(),this.addColumnAtStart(r,a.first-1,c),h=S.SOME_TOP):(this.removeColumnFromStart(a.first,r-1,c),this.updateShiftedStates(),this.addColumnAtEnd(a.last+1,s),h=S.SOME_BOTTOM),a.first=r,a.last=s,this.updateColumnOffset(l),h},t}();function lt(t,e,i){var n=Array.from(t.children);if(!(n.length<=1)){var o=n.map(function(t){return i.find(function(e){return e.id===t.dataset.id})});console.assert(o.every(function(t){return Boolean(t)}),"all columns must exist",e),console.assert(o.every(function(t,e){return 0===e||t.index>=o[e-1].index}),"all columns in ascending order",e),console.assert(new Set(o).size===o.length,"unique columns",o)}}var at=function(t){function e(e,i,n){void 0===n&&(n={});var o=t.call(this,it(e,i).querySelector("main > article"),n)||this;o.root=e,e.classList.add(M(),"lineup-engine"),o.style=new rt(o.root,i);var r=o,s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"context",{get:function(){return r.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return r.body},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastScrollInfo",{get:function(){return r.lastScrollInfo},enumerable:!0,configurable:!0}),e.prototype.createHeader=function(t,e){return r.createHeader(t,e)},e.prototype.updateHeader=function(t,e){return r.updateHeader(t,e)},e.prototype.createCell=function(t,e,i){return r.createCell(t,e,i)},e.prototype.updateCell=function(t,e,i){return r.updateCell(t,e,i)},e.prototype.updateColumnOffset=function(e){t.prototype.updateColumnOffset.call(this,e),r.updateOffset(r.visibleFirstRowPos)},e.prototype.forEachRow=function(t){return r.forEachRow(t)},e}(st);return o.cell=new(s.bind.apply(s,[void 0,o.header,o.style,o.style.id].concat(n.mixins||[]))),o}return d(e,t),Object.defineProperty(e.prototype,"idPrefix",{get:function(){return this.style.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this.root.querySelector("header > article")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerScroller",{get:function(){return this.root.getElementsByTagName("header")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleColumns",{get:function(){return this.cell.visibleColumns},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleFirstColumnPos",{get:function(){return this.cell.visibleFirstColumnPos},enumerable:!0,configurable:!0}),e.prototype.addColumnMixin=function(t,e){this.cell.addColumnMixin(t,e)},e.prototype.init=function(){var e=this;this.cell.init();var i=x(this.body.parentElement,this.options.async,function(t){if(!(Math.abs(i.left-t.left)<e.options.minScrollDelta&&Math.abs(i.width-t.width)<e.options.minScrollDelta)){var n=t.left>i.left;i=t,e.onScrolledHorizontally(t.left,t.width,n)}});t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.root.remove()},e.prototype.onScrolledHorizontally=function(t,e,i){return this.cell.onScrolledHorizontally(t,e,i)},e.prototype.updateHeaders=function(){this.cell.updateHeaders()},e.prototype.handleCellReady=function(t,e,i){return void 0===i&&(i=-1),this.cell.handleCellReady(t,e,i)},e.prototype.recycleCell=function(t,e){void 0===e&&(e=-1),this.cell.recycleCell(t,e)},e.prototype.updateColumnWidths=function(){var t=this.context;this.style.update(t.defaultRowHeight-t.padding(-1),t.columns,t.column.padding,-this.cell.leftShift(),this.idPrefix)},e.prototype.updateSizer=function(t){var e=this.context,i=e.totalHeight,n=e.column.totalHeight;this.updateShifts(t,this.cell.leftShift()),this.bodySizer.style.transform="translate("+Math.max(0,n-1).toFixed(0)+"px, "+Math.max(0,i-1).toFixed(0)+"px)"},e.prototype.updateShifts=function(t,e){this.body.style.transform="translate("+e.toFixed(0)+"px, "+t.toFixed(0)+"px)"},e.prototype.recreate=function(e){var i=this.bodyScroller,n=i.scrollLeft;this.cell.recreate(n,i.clientWidth),t.prototype.recreate.call(this,e),i.scrollLeft=n},e.prototype.clearPool=function(){t.prototype.clearPool.call(this),this.cell.clearPool()},e.prototype.createRow=function(t,e){this.cell.createRow(t,e)},e.prototype.updateRow=function(t,e){this.cell.updateRow(t,e)},e}(J),ht=function(){function t(t,e){return this.adapter=t,this.prefetchTimeout=-1,this.cleanupTimeout=-1,this.options={prefetchRows:20,cleanUpRows:10,delay:200},Object.assign(this.options,e),this}return t.prototype.prefetchDown=function(){if(this.prefetchTimeout=-1,!this.adapter.isScrollEventWaiting()){var t=this.adapter.context,e=Math.min(this.adapter.visible.forcedLast+this.options.prefetchRows,t.numberOfRows-1);this.adapter.visible.last===e&&this.adapter.visible.last>=this.adapter.visible.forcedLast+this.options.prefetchRows||(this.adapter.addAtBottom(this.adapter.visible.last+1,e),this.adapter.visible.last=e)}},t.prototype.prefetchUp=function(){if(this.prefetchTimeout=-1,!(this.adapter.isScrollEventWaiting()||this.adapter.visible.first<=this.adapter.visible.forcedFirst-this.options.prefetchRows)){var t=this.adapter.context,e=A(Math.max(this.adapter.scrollOffset-this.options.prefetchRows*t.defaultRowHeight,0),this.adapter.scrollTotal,t.defaultRowHeight,t.exceptions,t.numberOfRows),i=e.first,n=e.firstRowPos;if(i!==this.adapter.visible.first){var o=this.adapter.syncFrozen?this.adapter.syncFrozen(i):0;this.adapter.addAtBeginning(i,this.adapter.visible.first-1,o),this.adapter.visible.first=i,this.adapter.updateOffset(n)}}},t.prototype.triggerPrefetch=function(t){this.prefetchTimeout>=0&&clearTimeout(this.prefetchTimeout);var e=this.adapter.visible.last<this.adapter.visible.forcedLast+this.options.prefetchRows,i=this.adapter.visible.first>this.adapter.visible.forcedFirst-this.options.prefetchRows,n=this.adapter.visible.last===this.adapter.context.numberOfRows,o=0===this.adapter.visible.first;if((!t||e||n)&&(t||i||o)){var r=t||o?this.prefetchDown.bind(this):this.prefetchUp.bind(this);this.prefetchTimeout=self.setTimeout(r,this.options.delay)}},t.prototype.cleanUpTop=function(t){if(this.cleanupTimeout=-1,!this.adapter.isScrollEventWaiting()){var e=Math.max(0,t-this.options.cleanUpRows);if(!(e<=this.adapter.visible.first)){var i=this.adapter.syncFrozen?this.adapter.syncFrozen(e):0;this.adapter.removeFromBeginning(this.adapter.visible.first,e-1,i);var n=this.adapter.context,o=(e-this.adapter.visible.first)*n.defaultRowHeight;if(n.exceptions.length>0)for(var r=this.adapter.visible.first;r<e;++r)n.exceptionsLookup.has(r)&&(o+=n.exceptionsLookup.get(r)-n.defaultRowHeight);this.adapter.visible.first=e,this.adapter.updateOffset(this.adapter.visibleFirstRowPos+o),this.prefetchDown()}}},t.prototype.cleanUpBottom=function(t){this.cleanupTimeout=-1;var e=t+this.options.cleanUpRows;this.adapter.visible.last<=e||(this.adapter.removeFromBottom(e+1,this.adapter.visible.last),this.adapter.visible.last=e,this.prefetchUp())},t.prototype.triggerCleanUp=function(t,e,i){this.cleanupTimeout>=0&&clearTimeout(this.cleanupTimeout),i&&t-this.options.cleanUpRows<=this.adapter.visible.first||!i&&this.adapter.visible.last<=e+this.options.cleanUpRows||(this.cleanupTimeout=self.setTimeout(i?this.cleanUpTop.bind(this):this.cleanUpBottom.bind(this),this.options.delay,i?t:e))},t.prototype.onScrolled=function(t,e){this.adapter.isScrollEventWaiting()||(e!==S.ALL&&this.options.cleanUpRows>0&&this.triggerCleanUp(this.adapter.visible.forcedFirst,this.adapter.visible.forcedLast,t),e!==S.NONE&&this.options.prefetchRows>0&&this.triggerPrefetch(t))},t}(),ct=function(t){function e(e,i,n,o,r){void 0===r&&(r={});var s=t.call(this,i,r)||this;s.header=e,s.body=i,s.tableId=n,s.style=o;var l=s,a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"context",{get:function(){return l.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return l.body},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastScrollInfo",{get:function(){return l.lastScrollInfo},enumerable:!0,configurable:!0}),e.prototype.createHeader=function(t,e){return l.createHeader(t,e)},e.prototype.updateHeader=function(t,e){return l.updateHeader(t,e)},e.prototype.createCell=function(t,e,i){return l.createCell(t,e,i)},e.prototype.updateColumnOffset=function(e){t.prototype.updateColumnOffset.call(this,e),l.updateOffset(l.visibleFirstRowPos)},e.prototype.updateCell=function(t,e,i){return l.updateCell(t,e,i)},e.prototype.forEachRow=function(t){return l.forEachRow(t)},e}(st);return s.cell=new(a.bind.apply(a,[void 0,s.header,s.style,n].concat(r.mixins||[]))),s}return d(e,t),e.prototype.addColumnMixin=function(t,e){this.cell.addColumnMixin(t,e)},Object.defineProperty(e.prototype,"idPrefix",{get:function(){return this.tableId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.context.column.totalHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleColumns",{get:function(){return this.cell.visibleColumns},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleFirstColumnPos",{get:function(){return this.cell.visibleFirstColumnPos},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.context.totalHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hidden",{get:function(){return this.header.classList.contains(L)},set:function(t){this.hidden!==t&&(this.header.classList.toggle(L,t),this.body.classList.toggle(L,t),this.header.classList.toggle(j,t),this.body.classList.toggle(j,t),this.onVisibilityChanged(!t))},enumerable:!0,configurable:!0}),e.prototype.updateSizer=function(t){this.updateShifts(t,this.cell.leftShift())},e.prototype.updateShifts=function(t,e){Z(this.body,0,t.toFixed(0))},e.prototype.onVisibilityChanged=function(t){},e.prototype.hide=function(){this.hidden=!0},e.prototype.show=function(t,e,i){var n=this.hidden;this.hidden=!1,n?this.revalidate():this.onScrolledHorizontally(t,e,i)},e.prototype.init=function(){this.hide(),this.cell.init(),t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.header.remove(),this.style.remove(this.tableId)},e.prototype.onScrolledVertically=function(e,i,n){return this.hidden?S.NONE:t.prototype.onScrolledVertically.call(this,e,i,n)},e.prototype.onScrolledHorizontally=function(t,e,i){var n=this.cell.onScrolledHorizontally(t,e,i);return this.updateSizer(this.visibleFirstRowPos),n},e.prototype.updateHeaders=function(){this.cell.updateHeaders()},e.prototype.handleCellReady=function(t,e,i){return void 0===i&&(i=-1),this.cell.handleCellReady(t,e,i)},e.prototype.recycleCell=function(t,e){void 0===e&&(e=-1),this.cell.recycleCell(t,e)},e.prototype.updateColumnWidths=function(){var t=this.context;this.style.update(t.defaultRowHeight-t.padding(-1),t.columns,t.column.padding,-this.cell.leftShift(),this.tableId)},e.prototype.recreate=function(e){var i=this.bodyScroller,n=i.scrollLeft;this.cell.recreate(n,i.clientWidth),t.prototype.recreate.call(this,e),i.scrollLeft=n},e.prototype.clearPool=function(){t.prototype.clearPool.call(this),this.cell.clearPool()},e.prototype.createRow=function(t,e){this.cell.createRow(t,e),t.classList.add(this.style.cssClasses.tr)},e.prototype.updateRow=function(t,e){this.cell.updateRow(t,e)},e}(Q),ut=function(){function t(t,e,i){void 0===i&&(i={});var n=this;this.node=t,this.tableId=0,this.sections=[],this.options={columnPadding:0,async:g,minScrollDelta:30},Object.assign(this.options,i),e=e.startsWith("#")?e.slice(1):e,t.id=e,t.innerHTML='<header id="header-'+e+'" class="'+U+" "+M("header-"+e)+'">\n      <footer class="'+V+" "+M("footer-"+e)+'">&nbsp;</footer>\n    </header>\n    <main id="body-'+e+'" class="'+N+" "+M("body-"+e)+'">\n      <footer class="'+V+'">&nbsp;</footer>\n    </main>',t.classList.add(M(),B,"lineup-engine"),this.style=new rt(this.node,e);var o=x(this.main,this.options.async,function(t){if(!(Math.abs(o.left-t.left)<n.options.minScrollDelta&&Math.abs(o.width-t.width)<n.options.minScrollDelta)){var e=t.left>o.left;o=t,n.onScrolledHorizontally(t.left,t.width,e)}})}return t.prototype.update=function(){var t=this;this.onScrolledHorizontally(this.main.scrollLeft,this.main.clientWidth,!1);var e=0;this.sections.forEach(function(i){i.body.style.left=i.header.style.left=e+"px",e+=i.width+t.options.columnPadding})},t.prototype.onScrolledHorizontally=function(t,e,i){var n=this,o=0,r=t+e;this.sections.forEach(function(e){var s=o+e.width;s<t||o>r?e.hide():e.show(Math.max(0,t-o),Math.min(r-o,e.width),i),o=s+n.options.columnPadding}),this.updateOffset()},t.prototype.updateOffset=function(){var t=this,e=this.header.getElementsByTagName("footer")[0],i=this.main.getElementsByTagName("footer")[0],n=Math.max.apply(Math,[0].concat(this.sections.map(function(t){return t.height}))),o=this.sections.reduce(function(e,i){return e+i.width+t.options.columnPadding},0);Z(e,o,0),Z(i,o,n)},t.prototype.destroy=function(){this.sections.forEach(function(t){return t.destroy()}),this.node.remove()},Object.defineProperty(t.prototype,"doc",{get:function(){return this.node.ownerDocument},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){return this.node.getElementsByTagName("header")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"main",{get:function(){return this.node.getElementsByTagName("main")[0]},enumerable:!0,configurable:!0}),t.prototype.pushTable=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=this.doc.createElement("article"),o=this.doc.createElement("article"),r=this.node.id+"T"+this.tableId++,s=nt(r),l=ot(r);n.id=s.thead,n.classList.add(_,l.thead),o.id=s.tbody,o.classList.add(q,l.tbody),this.header.insertBefore(n,this.header.lastElementChild),this.main.appendChild(o);var a=t.apply(void 0,[n,o,r,this.style].concat(e));return a.init(),this.sections.push(a),this.update(),a},t.prototype.pushSeparator=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=this.doc.createElement("section"),o=this.doc.createElement("section");n.classList.add(M("header-separator")),o.classList.add(M("separator")),this.header.insertBefore(n,this.header.lastElementChild),this.main.appendChild(o);var r=t.apply(void 0,[n,o,this.style].concat(e));return r.init(),this.sections.push(r),this.update(),r},t.prototype.remove=function(t){var e=this.sections.indexOf(t);return!(e<0)&&(this.sections.splice(e,1),t.destroy(),this.update(),!0)},t.prototype.clear=function(){this.sections.splice(0,this.sections.length).forEach(function(t){return t.destroy()}),this.update()},t.prototype.widthChanged=function(){this.update()},t}();i.d(e,"version",function(){return dt}),i.d(e,"buildId",function(){return ft}),i.d(e,"abortAble",function(){return s}),i.d(e,"isPromiseLike",function(){return n}),i.d(e,"ABORTED",function(){return o}),i.d(e,"abortAbleAll",function(){return l}),i.d(e,"isAbortAble",function(){return a}),i.d(e,"isAsyncUpdate",function(){return h}),i.d(e,"abortAbleResolveNow",function(){return c}),i.d(e,"isLoadingCell",function(){return $}),i.d(e,"ACellRenderer",function(){return at}),i.d(e,"KeyFinder",function(){return p}),i.d(e,"EAnimationMode",function(){return f}),i.d(e,"noAnimationChange",function(){return m}),i.d(e,"defaultPhases",function(){return v}),i.d(e,"ARowRenderer",function(){return J}),i.d(e,"setTransform",function(){return Z}),i.d(e,"uniformContext",function(){return O}),i.d(e,"nonUniformContext",function(){return P}),i.d(e,"randomContext",function(){return E}),i.d(e,"range",function(){return A}),i.d(e,"frozenDelta",function(){return H}),i.d(e,"updateFrozen",function(){return F}),i.d(e,"PrefetchMixin",function(){return ht}),i.d(e,"GridStyleManager",function(){return rt}),i.d(e,"StyleManager",function(){return et}),i.d(e,"MultiTableRowRenderer",function(){return ut}),i.d(e,"EScrollResult",function(){return S}),i.d(e,"setTemplate",function(){return it}),i.d(e,"tableIds",function(){return nt}),i.d(e,"tableCSSClasses",function(){return ot}),i.d(e,"ACellTableSection",function(){return ct});var dt="2.0.0-alpha.5",ft="20181224-140009"}])});
//# sourceMappingURL=lineupengine.js.map